<!DOCTYPE html>
<html>

	<head>
		<script type="text/javascript" src="../tests/jquery/jquery-latest.min.js"></script>
		<script type="text/javascript" src="../jquery.color.js"></script>
		<script type="text/javascript" src="../jquery.svg.js"></script>
		<script type="text/javascript" src="../jquery.cytoscapeweb.core.js"></script>
		<script type="text/javascript" src="../jquery.cytoscapeweb.renderer.null.js"></script>
		<script type="text/javascript" src="../2D.js"></script>
		<script type="text/javascript" src="../jquery.mousewheel.js"></script>
		<script type="text/javascript" src="../jquery.cytoscapeweb.renderer.svg.js"></script>
		<script type="text/javascript" src="../jquery.cytoscapeweb.layout.null.js"></script>
		<script type="text/javascript" src="../jquery.cytoscapeweb.layout.random.js"></script>
		<script type="text/javascript" src="../jquery.cytoscapeweb.layout.grid.js"></script>
		
		<script type="text/javascript">
			$(function(){
				
				$.cytoscapeweb("quiet", false);
				$.cytoscapeweb("debugging", false);
				
				var options = {
					selector: "#cytoscapeweb",
					renderer: {
						name: "svg"
					},
					layout: {
						name: "grid"
					},
					style: {
						edges: {
							width: {
								defaultValue: 1,
								continuousMapper: {
									attr: {
										name: "weight",
									},
									mapped: {
										min: 4,
										max: 1
									}
								}
							}
						},
						
						nodes: {
							labelText: {
								defaultValue: "",
								passthroughMapper: "id"
							},
							labelHalign: "middle",
							labelValign: "top",
							shape: "ellipse",
							size: {
								defaultValue: 5,
								continuousMapper: {
									attr: {
										name: "weight",
									},
									mapped: {
										min: 10,
										max: 30
									}
								}
							}
						}
					},
					data: {
						nodes: [
						], 
						
						edges: [
						]
					}
				};
				
				var numNodes = 10;
				var numEdges = 20;
				
				function randNodeId(){
					return "n" + Math.floor( Math.random() * numNodes );
				}
				
				for(var i = 0; i < numNodes; i++){
					options.data.nodes.push({
						id: "n" + i,
						weight: Math.random() * 100
					});
				}
				
				for(var i = 0; i < numEdges; i++){
					options.data.edges.push({
						id: "e" + i,
						source: randNodeId(),
						target: randNodeId(),
						weight: Math.random() * 100
					});
				}
				
				cy = $.cytoscapeweb(options);
			
				function log(msg){
					$("#console").append('<p>' + msg + '</p>');
				}
				
				cy.nodes().bind("click", function(e){ log("click " + this.data("id")); });
				cy.nodes().bind("mousedown", function(e){ log("mousedown " + this.data("id")); });
				cy.nodes().bind("mouseup", function(e){ log("mouseup " + this.data("id")); });
			});
		</script>
		
		<title>Cytoscape Web demo</title>
		
		<style>
			body { font: 14pt arial; }	
			#cytoscapeweb { border: 1px solid #888; height: 800px; width: 800px; }	
			#console { font-size: 0.75em; max-height: 10em; overflow: auto; width: 800px; }
		</style>
	</head>

	<body>
		<h1>Cytoscape Web demo</h1>
	    
	    <div id="cytoscapeweb"></div>
	    
	    <h2>Console</h2>
	    <div id="console"></div>
	</body>

</html>