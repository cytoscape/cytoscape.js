/*!
 * This file is part of cytoscape.js 2.2.11.
 * 
 * Cytoscape.js is free software: you can redistribute it and/or modify it
 * under the terms of the GNU Lesser General Public License as published by the Free
 * Software Foundation, either version 3 of the License, or (at your option) any
 * later version.
 * 
 * Cytoscape.js is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
 * FOR A PARTICULAR PURPOSE. See the GNU Lesser General Public License for more
 * details.
 * 
 * You should have received a copy of the GNU Lesser General Public License along with
 * cytoscape.js. If not, see <http://www.gnu.org/licenses/>.
 */
var cytoscape;!function(e){"use strict";var t=cytoscape=function(){return cytoscape.init.apply(cytoscape,arguments)};t.init=function(e){return void 0===e&&(e={}),t.is.plainObject(e)?new t.Core(e):t.is.string(e)?t.extension.apply(t.extension,arguments):void 0},t.fn={},"undefined"!=typeof exports&&(exports=module.exports=cytoscape),"undefined"!=typeof define&&define("cytoscape",function(){return cytoscape}),e&&(e.cytoscape=cytoscape)}("undefined"==typeof window?null:window),function(e,t){"use strict";e.is={string:function(e){return null!=e&&"string"==typeof e},fn:function(e){return null!=e&&"function"==typeof e},array:function(e){return Array.isArray?Array.isArray(e):null!=e&&e instanceof Array},plainObject:function(t){return null!=t&&typeof t==typeof{}&&!e.is.array(t)&&t.constructor===Object},number:function(e){return null!=e&&"number"==typeof e&&!isNaN(e)},integer:function(t){return e.is.number(t)&&Math.floor(t)===t},color:function(e){return null!=e&&"string"==typeof e&&""!==$.Color(e).toString()},bool:function(e){return null!=e&&typeof e==typeof!0},elementOrCollection:function(t){return e.is.element(t)||e.is.collection(t)},element:function(t){return t instanceof e.Element&&t._private.single},collection:function(t){return t instanceof e.Collection&&!t._private.single},core:function(t){return t instanceof e.Core},style:function(t){return t instanceof e.Style},stylesheet:function(t){return t instanceof e.Stylesheet},event:function(t){return t instanceof e.Event},emptyString:function(t){return t?e.is.string(t)&&(""===t||t.match(/^\s+$/))?!0:!1:!0},nonemptyString:function(t){return t&&e.is.string(t)&&""!==t&&!t.match(/^\s+$/)?!0:!1},domElement:function(e){return"undefined"==typeof HTMLElement?!1:e instanceof HTMLElement},touch:function(){return t&&("ontouchstart"in t||t.DocumentTouch&&document instanceof DocumentTouch)}}}(cytoscape,"undefined"==typeof window?null:window),function(e,t){"use strict";e.util={extend:function(){var t,r,n,i,a,o,s=arguments[0]||{},l=1,c=arguments.length,u=!1;for("boolean"==typeof s&&(u=s,s=arguments[1]||{},l=2),"object"==typeof s||e.is.fn(s)||(s={}),c===l&&(s=this,--l);c>l;l++)if(null!=(t=arguments[l]))for(r in t)n=s[r],i=t[r],s!==i&&(u&&i&&(e.is.plainObject(i)||(a=e.is.array(i)))?(a?(a=!1,o=n&&e.is.array(n)?n:[]):o=n&&e.is.plainObject(n)?n:{},s[r]=e.util.extend(u,o,i)):void 0!==i&&(s[r]=i));return s},throttle:function(t,r,n){var i=!0,a=!0;return n===!1?i=!1:e.is.plainObject(n)&&(i="leading"in n?n.leading:i,a="trailing"in n?n.trailing:a),n=n||{},n.leading=i,n.maxWait=r,n.trailing=a,e.util.debounce(t,r,n)},now:function(){return+new Date},debounce:function(t,r,n){var i,a,o,s,l,c,u,d=0,p=!1,h=!0;if(e.is.fn(t)){if(r=Math.max(0,r)||0,n===!0){var g=!0;h=!1}else e.is.plainObject(n)&&(g=n.leading,p="maxWait"in n&&(Math.max(r,n.maxWait)||0),h="trailing"in n?n.trailing:h);var v=function(){var n=r-(e.util.now()-s);if(0>=n){a&&clearTimeout(a);var p=u;a=c=u=void 0,p&&(d=e.util.now(),o=t.apply(l,i),c||a||(i=l=null))}else c=setTimeout(v,n)},f=function(){c&&clearTimeout(c),a=c=u=void 0,(h||p!==r)&&(d=e.util.now(),o=t.apply(l,i),c||a||(i=l=null))};return function(){if(i=arguments,s=e.util.now(),l=this,u=h&&(c||!g),p===!1)var n=g&&!c;else{a||g||(d=s);var y=p-(s-d),m=0>=y;m?(a&&(a=clearTimeout(a)),d=s,o=t.apply(l,i)):a||(a=setTimeout(f,y))}return m&&c?c=clearTimeout(c):c||r===p||(c=setTimeout(v,r)),n&&(m=!0,o=t.apply(l,i)),!m||c||a||(i=l=null),o}}},error:function(e){if(!console)throw e;if(console.error)console.error(e);else{if(!console.log)throw e;console.log(e)}},clone:function(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t},copy:function(t){return null==t?t:e.is.array(t)?t.slice():e.is.plainObject(t)?e.util.clone(t):t},mapEmpty:function(e){var t=!0;if(null!=e)for(var r in e){t=!1;break}return t},pushMap:function(t){var r=e.util.getMap(t);null==r?e.util.setMap($.extend({},t,{value:[t.value]})):r.push(t.value)},setMap:function(t){for(var r,n=t.map,i=t.keys,a=i.length,o=0;a>o;o++){var r=i[o];e.is.plainObject(r)&&e.util.error("Tried to set map with object key"),o<i.length-1?(null==n[r]&&(n[r]={}),n=n[r]):n[r]=t.value}},getMap:function(t){for(var r=t.map,n=t.keys,i=n.length,a=0;i>a;a++){var o=n[a];if(e.is.plainObject(o)&&e.util.error("Tried to get map with object key"),r=r[o],null==r)return r}return r},deleteMap:function(t){for(var r=t.map,n=t.keys,i=n.length,a=t.keepChildren,o=0;i>o;o++){var s=n[o];e.is.plainObject(s)&&e.util.error("Tried to delete map with object key");var l=o===t.keys.length-1;if(l)if(a)for(var c in r)a[c]||delete r[c];else delete r[s];else r=r[s]}},capitalize:function(t){return e.is.emptyString(t)?t:t.charAt(0).toUpperCase()+t.substring(1)},camel2dash:function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r],i=n.toLowerCase(),a=n!==i;a?(t.push("-"),t.push(i)):t.push(n)}var o=t.length===e.length;return o?e:t.join("")},dash2camel:function(e){for(var t=[],r=!1,n=0;n<e.length;n++){var i=e[n],a="-"===i;a?r=!0:(t.push(r?i.toUpperCase():i),r=!1)}return t.join("")},trim:function(e){var t,r;for(t=0;t<e.length&&" "===e[t];t++);for(r=e.length-1;r>t&&" "===e[r];r--);return e.substring(t,r+1)},hex2tuple:function(e){if((4===e.length||7===e.length)&&"#"===e[0]){var t,r,n,i=4===e.length,a=16;return i?(t=parseInt(e[1]+e[1],a),r=parseInt(e[2]+e[2],a),n=parseInt(e[3]+e[3],a)):(t=parseInt(e[1]+e[2],a),r=parseInt(e[3]+e[4],a),n=parseInt(e[5]+e[6],a)),[t,r,n]}},hsl2tuple:function(t){function r(e,t,r){return 0>r&&(r+=1),r>1&&(r-=1),1/6>r?e+6*(t-e)*r:.5>r?t:2/3>r?e+(t-e)*(2/3-r)*6:e}var n,i,a,o,s,l,c,u,d=new RegExp("^"+e.util.regex.hsla+"$").exec(t);if(d){if(i=parseInt(d[1]),0>i?i=(360- -1*i%360)%360:i>360&&(i%=360),i/=360,a=parseFloat(d[2]),0>a||a>100)return;if(a/=100,o=parseFloat(d[3]),0>o||o>100)return;if(o/=100,s=d[4],void 0!==s&&(s=parseFloat(s),0>s||s>1))return;if(0===a)l=c=u=Math.round(255*o);else{var p=.5>o?o*(1+a):o+a-o*a,h=2*o-p;l=Math.round(255*r(h,p,i+1/3)),c=Math.round(255*r(h,p,i)),u=Math.round(255*r(h,p,i-1/3))}n=[l,c,u,s]}return n},rgb2tuple:function(t){var r,n=new RegExp("^"+e.util.regex.rgba+"$").exec(t);if(n){r=[];for(var i=[],a=1;3>=a;a++){var o=n[a];if("%"===o[o.length-1]&&(i[a]=!0),o=parseFloat(o),i[a]&&(o=o/100*255),0>o||o>255)return;r.push(Math.floor(o))}var s=i[1]||i[2]||i[3],l=i[1]&&i[2]&&i[3];if(s&&!l)return;var c=n[4];if(void 0!==c){if(c=parseFloat(c),0>c||c>1)return;r.push(c)}}return r},colorname2tuple:function(t){return e.util.colors[t.toLowerCase()]},color2tuple:function(t){return e.util.colorname2tuple(t)||e.util.hex2tuple(t)||e.util.rgb2tuple(t)||e.util.hsl2tuple(t)},tuple2hex:function(e){function t(e){var t=e.toString(16);return 1===t.length&&(t="0"+t),t}var r=e[0],n=e[1],i=e[2];return"#"+t(r)+t(n)+t(i)},colors:{transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},e.util.regex={},e.util.regex.number="(?:[-]?\\d*\\.\\d+|[-]?\\d+|[-]?\\d*\\.\\d+[eE]\\d+)",e.util.regex.rgba="rgb[a]?\\(("+e.util.regex.number+"[%]?)\\s*,\\s*("+e.util.regex.number+"[%]?)\\s*,\\s*("+e.util.regex.number+"[%]?)(?:\\s*,\\s*("+e.util.regex.number+"))?\\)",e.util.regex.rgbaNoBackRefs="rgb[a]?\\((?:"+e.util.regex.number+"[%]?)\\s*,\\s*(?:"+e.util.regex.number+"[%]?)\\s*,\\s*(?:"+e.util.regex.number+"[%]?)(?:\\s*,\\s*(?:"+e.util.regex.number+"))?\\)",e.util.regex.hsla="hsl[a]?\\(("+e.util.regex.number+")\\s*,\\s*("+e.util.regex.number+"[%])\\s*,\\s*("+e.util.regex.number+"[%])(?:\\s*,\\s*("+e.util.regex.number+"))?\\)",e.util.regex.hslaNoBackRefs="hsl[a]?\\((?:"+e.util.regex.number+")\\s*,\\s*(?:"+e.util.regex.number+"[%])\\s*,\\s*(?:"+e.util.regex.number+"[%])(?:\\s*,\\s*(?:"+e.util.regex.number+"))?\\)",e.util.regex.hex3="\\#[0-9a-fA-F]{3}",e.util.regex.hex6="\\#[0-9a-fA-F]{6}";var r=t?t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame:null;r=r||function(e){e&&setTimeout(e,1e3/60)},e.util.requestAnimationFrame=function(e){r(e)}}(cytoscape,"undefined"==typeof window?null:window),function(e){"use strict";e.math={},e.math.signum=function(e){return e>0?1:0>e?-1:0},e.math.distance=function(e,t){var r=t.x-e.x,n=t.y-e.y;return Math.sqrt(r*r+n*n)},e.math.qbezierAt=function(e,t,r,n){return(1-n)*(1-n)*e+2*(1-n)*n*t+n*n*r},e.math.qbezierPtAt=function(t,r,n,i){return{x:e.math.qbezierAt(t.x,r.x,n.x,i),y:e.math.qbezierAt(t.y,r.y,n.y,i)}},e.math.roundRectangleIntersectLine=function(e,t,r,n,i,a,o){var s,l=this.getRoundRectangleRadius(i,a),c=i/2,u=a/2,d=r-c+l-o,p=n-u-o,h=r+c-l+o,g=p;if(s=this.finiteLinesIntersect(e,t,r,n,d,p,h,g,!1),s.length>0)return s;var v=r+c+o,f=n-u+l-o,y=v,m=n+u-l+o;if(s=this.finiteLinesIntersect(e,t,r,n,v,f,y,m,!1),s.length>0)return s;var b=r-c+l-o,x=n+u+o,w=r+c-l+o,_=x;if(s=this.finiteLinesIntersect(e,t,r,n,b,x,w,_,!1),s.length>0)return s;var E=r-c-o,S=n-u+l-o,P=E,k=n+u-l+o;if(s=this.finiteLinesIntersect(e,t,r,n,E,S,P,k,!1),s.length>0)return s;var C,D=r-c+l,N=n-u+l;if(C=this.intersectLineCircle(e,t,r,n,D,N,l+o),C.length>0&&C[0]<=D&&C[1]<=N)return[C[0],C[1]];var T=r+c-l,M=n-u+l;if(C=this.intersectLineCircle(e,t,r,n,T,M,l+o),C.length>0&&C[0]>=T&&C[1]<=M)return[C[0],C[1]];var I=r+c-l,z=n+u-l;if(C=this.intersectLineCircle(e,t,r,n,I,z,l+o),C.length>0&&C[0]>=I&&C[1]>=z)return[C[0],C[1]];var B=r-c+l,R=n+u-l;return C=this.intersectLineCircle(e,t,r,n,B,R,l+o),C.length>0&&C[0]<=B&&C[1]>=R?[C[0],C[1]]:[]},e.math.roundRectangleIntersectBox=function(e,t,r,n,i,a,o,s,l){var c=this.getRoundRectangleRadius(i,a),u=o-i/2-l,d=s-a/2+c-l,p=o+i/2+l,h=s+a/2-c+l,g=o-i/2+c-l,v=s-a/2-l,f=o+i/2-c+l,y=s+a/2+l,m=Math.min(e,r),b=Math.max(e,r),x=Math.min(t,n),w=Math.max(t,n);return u>b?!1:m>p?!1:v>w?!1:x>y?!1:u>=m&&b>=u&&d>=x&&w>=d?!0:p>=m&&b>=p&&d>=x&&w>=d?!0:p>=m&&b>=p&&h>=x&&w>=h?!0:u>=m&&b>=u&&h>=x&&w>=h?!0:m>=u&&p>=m&&x>=d&&h>=x?!0:b>=u&&p>=b&&x>=d&&h>=x?!0:b>=u&&p>=b&&w>=d&&h>=w?!0:m>=u&&p>=m&&w>=d&&h>=w?!0:g>=m&&b>=g&&v>=x&&w>=v?!0:f>=m&&b>=f&&v>=x&&w>=v?!0:f>=m&&b>=f&&y>=x&&w>=y?!0:g>=m&&b>=g&&y>=x&&w>=y?!0:m>=g&&f>=m&&x>=v&&y>=x?!0:b>=g&&f>=b&&x>=v&&y>=x?!0:b>=g&&f>=b&&w>=v&&y>=w?!0:m>=g&&f>=m&&w>=v&&y>=w?!0:this.boxIntersectEllipse(m,x,b,w,l,2*c,2*c,g+l,d+l)?!0:this.boxIntersectEllipse(m,x,b,w,l,2*c,2*c,f-l,d+l)?!0:this.boxIntersectEllipse(m,x,b,w,l,2*c,2*c,f-l,h-l)?!0:this.boxIntersectEllipse(m,x,b,w,l,2*c,2*c,g+l,h-l)?!0:!1},e.math.checkInBoundingCircle=function(e,t,r,n,i,a,o,s){return e=(e-o)/(i+n),t=(t-s)/(a+n),r>=e*e+t*t},e.math.checkInBoundingBox=function(e,t,r,n,i,a,o,s){for(var l=r[0],c=r[1],u=r[0],d=r[1],p=1;p<r.length/2;p++)r[2*p]<l?l=r[2*p]:r[2*p]>u&&(u=r[2*p]),r[2*p+1]<c?c=r[2*p+1]:r[2*p+1]>d&&(d=r[2*p+1]);return e-=o,t-=s,e/=i,t/=a,l>e?!1:e>u?!1:c>t?!1:t>d?!1:!0},e.math.boxInBezierVicinity=function(e,t,r,n,i,a,o,s,l,c,u){var d=.25*i+.5*o+.25*l,p=.25*a+.5*s+.25*c,h=Math.min(e,r)-u,g=Math.min(t,n)-u,v=Math.max(e,r)+u,f=Math.max(t,n)+u;if(i>=h&&v>=i&&a>=g&&f>=a)return 1;if(l>=h&&v>=l&&c>=g&&f>=c)return 1;if(d>=h&&v>=d&&p>=g&&f>=p)return 1;if(o>=h&&v>=o&&s>=g&&f>=s)return 1;var y=Math.min(i,d,l),m=Math.min(a,p,c),b=Math.max(i,d,l),x=Math.max(a,p,c);return y>v||h>b||m>f||g>x?0:1},e.math.checkBezierInBox=function(t,r,n,i,a,o,s,l,c,u){function d(d){var p=e.math.qbezierAt(a,s,c,d),h=e.math.qbezierAt(o,l,u,d);return p>=t&&n>=p&&h>=r&&i>=h}for(var p=0;1>=p;p+=.25)if(!d(p))return!1;return!0},e.math.checkStraightEdgeInBox=function(e,t,r,n,i,a,o,s){return i>=e&&r>=i&&o>=e&&r>=o&&a>=t&&n>=a&&s>=t&&n>=s},e.math.checkStraightEdgeCrossesBox=function(e,t,r,n,i,a,o,s,l){var c,u,d=Math.min(e,r)-l,p=Math.min(t,n)-l,h=Math.max(e,r)+l,g=Math.max(t,n)+l,v=o-i,f=i,y=s-a,m=a;if(Math.abs(v)<1e-4)return i>=d&&h>=i&&Math.min(a,s)<=p&&Math.max(a,s)>=g;var b=(d-f)/v;if(b>0&&1>=b&&(c=y*b+m,c>=p&&g>=c))return!0;var x=(h-f)/v;if(x>0&&1>=x&&(c=y*x+m,c>=p&&g>=c))return!0;var w=(p-m)/y;if(w>0&&1>=w&&(u=v*w+f,u>=d&&h>=u))return!0;var _=(g-m)/y;return _>0&&1>=_&&(u=v*_+f,u>=d&&h>=u)?!0:!1},e.math.checkBezierCrossesBox=function(e,t,r,n,i,a,o,s,l,c,u){var d=Math.min(e,r)-u,p=Math.min(t,n)-u,h=Math.max(e,r)+u,g=Math.max(t,n)+u;if(i>=d&&h>=i&&a>=p&&g>=a)return!0;if(l>=d&&h>=l&&c>=p&&g>=c)return!0;var v=i-2*o+l,f=-2*i+2*o,y=i,m=[];if(Math.abs(v)<1e-4){var b=(d-i)/f,x=(h-i)/f;m.push(b,x)}else{var w,_,E=f*f-4*v*(y-d);if(E>0){var S=Math.sqrt(E);w=(-f+S)/(2*v),_=(-f-S)/(2*v),m.push(w,_)}var P,k,C=f*f-4*v*(y-h);if(C>0){var S=Math.sqrt(C);P=(-f+S)/(2*v),k=(-f-S)/(2*v),m.push(P,k)}}m.sort(function(e,t){return e-t});var D=a-2*s+c,N=-2*a+2*s,T=a,M=[];if(Math.abs(D)<1e-4){var I=(p-a)/N,z=(g-a)/N;M.push(I,z)}else{var B,R,X=N*N-4*D*(T-p);if(X>0){var S=Math.sqrt(X);B=(-N+S)/(2*D),R=(-N-S)/(2*D),M.push(B,R)}var L,O,Y=N*N-4*D*(T-g);if(Y>0){var S=Math.sqrt(Y);L=(-N+S)/(2*D),O=(-N-S)/(2*D),M.push(L,O)}}M.sort(function(e,t){return e-t});for(var V=0;V<m.length;V+=2)for(var A=1;A<M.length;A+=2)if(m[V]<M[A]&&M[A]>=0&&m[V]<=1&&m[V+1]>M[A-1]&&M[A-1]<=1&&m[V+1]>=0)return!0;return!1},e.math.inLineVicinity=function(e,t,r,n,i,a,o){var s=o,l=Math.min(r,i),c=Math.max(r,i),u=Math.min(n,a),d=Math.max(n,a);return e>=l-s&&c+s>=e&&t>=u-s&&d+s>=t},e.math.inBezierVicinity=function(e,t,r,n,i,a,o,s){var l={x1:Math.min(r,o,i),x2:Math.max(r,o,i),y1:Math.min(n,s,a),y2:Math.max(n,s,a)};return e<l.x1||e>l.x2||t<l.y1||t>l.y2?!1:!0},e.math.solveCubic=function(e,t,r,n,i){t/=e,r/=e,n/=e;var a,o,s,l,c,u,d,p;return o=(3*r-t*t)/9,s=-(27*n)+t*(9*r-2*t*t),s/=54,a=o*o*o+s*s,i[1]=0,d=t/3,a>0?(c=s+Math.sqrt(a),c=0>c?-Math.pow(-c,1/3):Math.pow(c,1/3),u=s-Math.sqrt(a),u=0>u?-Math.pow(-u,1/3):Math.pow(u,1/3),i[0]=-d+c+u,d+=(c+u)/2,i[4]=i[2]=-d,d=Math.sqrt(3)*(-u+c)/2,i[3]=d,void(i[5]=-d)):(i[5]=i[3]=0,0===a?(p=0>s?-Math.pow(-s,1/3):Math.pow(s,1/3),i[0]=-d+2*p,void(i[4]=i[2]=-(p+d))):(o=-o,l=o*o*o,l=Math.acos(s/Math.sqrt(l)),p=2*Math.sqrt(o),i[0]=-d+p*Math.cos(l/3),i[2]=-d+p*Math.cos((l+2*Math.PI)/3),void(i[4]=-d+p*Math.cos((l+4*Math.PI)/3))))},e.math.sqDistanceToQuadraticBezier=function(e,t,r,n,i,a,o,s){var l=1*r*r-4*r*i+2*r*o+4*i*i-4*i*o+o*o+n*n-4*n*a+2*n*s+4*a*a-4*a*s+s*s,c=9*r*i-3*r*r-3*r*o-6*i*i+3*i*o+9*n*a-3*n*n-3*n*s-6*a*a+3*a*s,u=3*r*r-6*r*i+r*o-r*e+2*i*i+2*i*e-o*e+3*n*n-6*n*a+n*s-n*t+2*a*a+2*a*t-s*t,d=1*r*i-r*r+r*e-i*e+n*a-n*n+n*t-a*t,p=[];this.solveCubic(l,c,u,d,p);for(var h=1e-7,g=[],v=0;6>v;v+=2)Math.abs(p[v+1])<h&&p[v]>=0&&p[v]<=1&&g.push(p[v]);g.push(1),g.push(0);for(var f,y,m,b,x=-1,w=0;w<g.length;w++)y=Math.pow(1-g[w],2)*r+2*(1-g[w])*g[w]*i+g[w]*g[w]*o,m=Math.pow(1-g[w],2)*n+2*(1-g[w])*g[w]*a+g[w]*g[w]*s,b=Math.pow(y-e,2)+Math.pow(m-t,2),x>=0?x>b&&(x=b,f=g[w]):(x=b,f=g[w]);return x},e.math.sqDistanceToFiniteLine=function(e,t,r,n,i,a){var o=[e-r,t-n],s=[i-r,a-n],l=s[0]*s[0]+s[1]*s[1],c=o[0]*o[0]+o[1]*o[1],u=o[0]*s[0]+o[1]*s[1],d=u*u/l;return 0>u?c:d>l?(e-i)*(e-i)+(t-a)*(t-a):c-d},e.math.pointInsidePolygon=function(e,t,r,n,i,a,o,s,l){var c=new Array(r.length),u=Math.asin(s[1]/Math.sqrt(s[0]*s[0]+s[1]*s[1]));s[0]<0?u+=Math.PI/2:u=-u-Math.PI/2;for(var d=Math.cos(-u),p=Math.sin(-u),h=0;h<c.length/2;h++)c[2*h]=a/2*(r[2*h]*d-r[2*h+1]*p),c[2*h+1]=o/2*(r[2*h+1]*d+r[2*h]*p),c[2*h]+=n,c[2*h+1]+=i;var g;if(l>0){var v=this.expandPolygon(c,-l);g=this.joinLines(v)}else g=c;for(var f,y,m,b,x,w=0,_=0,h=0;h<g.length/2;h++)if(f=g[2*h],y=g[2*h+1],h+1<g.length/2?(m=g[2*(h+1)],b=g[2*(h+1)+1]):(m=g[2*(h+1-g.length/2)],b=g[2*(h+1-g.length/2)+1]),f==e&&m==e);else{if(!(f>=e&&e>=m||e>=f&&m>=e))continue;x=(e-f)/(m-f)*(b-y)+y,x>t&&w++,t>x&&_++}return w%2===0?!1:!0},e.math.joinLines=function(e){for(var t,r,n,i,a,o,s,l,c=new Array(e.length/2),u=0;u<e.length/4;u++){t=e[4*u],r=e[4*u+1],n=e[4*u+2],i=e[4*u+3],u<e.length/4-1?(a=e[4*(u+1)],o=e[4*(u+1)+1],s=e[4*(u+1)+2],l=e[4*(u+1)+3]):(a=e[0],o=e[1],s=e[2],l=e[3]);var d=this.finiteLinesIntersect(t,r,n,i,a,o,s,l,!0);c[2*u]=d[0],c[2*u+1]=d[1]}return c},e.math.expandPolygon=function(e,t){for(var r,n,i,a,o=new Array(2*e.length),s=0;s<e.length/2;s++){r=e[2*s],n=e[2*s+1],s<e.length/2-1?(i=e[2*(s+1)],a=e[2*(s+1)+1]):(i=e[0],a=e[1]);var l=a-n,c=-(i-r),u=Math.sqrt(l*l+c*c),d=l/u,p=c/u;o[4*s]=r+d*t,o[4*s+1]=n+p*t,o[4*s+2]=i+d*t,o[4*s+3]=a+p*t}return o},e.math.intersectLineEllipse=function(e,t,r,n,i,a){var o=r-e,s=n-t;o/=i,s/=a;var l=Math.sqrt(o*o+s*s),c=l-1;if(0>c)return[];var u=c/l;return[(r-e)*u+e,(n-t)*u+t]},e.math.dotProduct=function(e,t){if(2!=e.length||2!=t.length)throw"dot product: arguments are not vectors";return e[0]*t[0]+e[1]*t[1]},e.math.intersectLineCircle=function(e,t,r,n,i,a,o){var s=[r-e,n-t],l=[i,a],c=[e-i,t-a],u=s[0]*s[0]+s[1]*s[1],d=2*(c[0]*s[0]+c[1]*s[1]),l=c[0]*c[0]+c[1]*c[1]-o*o,p=d*d-4*u*l;if(0>p)return[];var h=(-d+Math.sqrt(p))/(2*u),g=(-d-Math.sqrt(p))/(2*u),v=Math.min(h,g),f=Math.max(h,g),y=[];if(v>=0&&1>=v&&y.push(v),f>=0&&1>=f&&y.push(f),0===y.length)return[];var m=y[0]*s[0]+e,b=y[0]*s[1]+t;if(y.length>1){if(y[0]==y[1])return[m,b];var x=y[1]*s[0]+e,w=y[1]*s[1]+t;return[m,b,x,w]}return[m,b]},e.math.findCircleNearPoint=function(e,t,r,n,i){var a=n-e,o=i-t,s=Math.sqrt(a*a+o*o),l=a/s,c=o/s;return[e+l*r,t+c*r]},e.math.findMaxSqDistanceToOrigin=function(e){for(var t,r=1e-6,n=0;n<e.length/2;n++)t=e[2*n]*e[2*n]+e[2*n+1]*e[2*n+1],t>r&&(r=t);return r},e.math.finiteLinesIntersect=function(e,t,r,n,i,a,o,s,l){var c=(o-i)*(t-a)-(s-a)*(e-i),u=(r-e)*(t-a)-(n-t)*(e-i),d=(s-a)*(r-e)-(o-i)*(n-t);if(0!==d){var p=c/d,h=u/d;return p>=0&&1>=p&&h>=0&&1>=h?[e+p*(r-e),t+p*(n-t)]:l?[e+p*(r-e),t+p*(n-t)]:[]}return 0===c||0===u?[e,r,o].sort()[1]===o?[o,s]:[e,r,i].sort()[1]===i?[i,a]:[i,o,r].sort()[1]===r?[r,n]:[]:[]},e.math.boxIntersectEllipse=function(e,t,r,n,i,a,o,s,l){if(e>r){var c=e;e=r,r=c}if(t>n){var u=t;t=n,n=u}var d=[s-a/2-i,l],p=[s+a/2+i,l],h=[s,l-o/2-i],g=[s,l+o/2+i];return r<d[0]?!1:e>p[0]?!1:t>g[1]?!1:n<h[1]?!1:e<=p[0]&&p[0]<=r&&t<=p[1]&&p[1]<=n?!0:e<=d[0]&&d[0]<=r&&t<=d[1]&&d[1]<=n?!0:e<=h[0]&&h[0]<=r&&t<=h[1]&&h[1]<=n?!0:e<=g[0]&&g[0]<=r&&t<=g[1]&&g[1]<=n?!0:(e=(e-s)/(a/2+i),r=(r-s)/(a/2+i),t=(t-l)/(o/2+i),n=(n-l)/(o/2+i),1>=e*e+t*t?!0:1>=r*r+t*t?!0:1>=r*r+n*n?!0:1>=e*e+n*n?!0:!1)},e.math.boxIntersectPolygon=function(t,r,n,i,a,o,s,l,c,u,d){if(t>n){var p=t;t=n,n=p}if(r>i){var h=r;r=i,i=h}var g=new Array(a.length),v=Math.asin(u[1]/Math.sqrt(u[0]*u[0]+u[1]*u[1]));u[0]<0?v+=Math.PI/2:v=-v-Math.PI/2;for(var f=Math.cos(-v),y=Math.sin(-v),m=0;m<g.length/2;m++)g[2*m]=o/2*(a[2*m]*f-a[2*m+1]*y),g[2*m+1]=s/2*(a[2*m+1]*f+a[2*m]*y),g[2*m]+=l,g[2*m+1]+=c;for(var b=g[0],x=g[0],w=g[1],_=g[1],m=1;m<g.length/2;m++)g[2*m]>x&&(x=g[2*m]),g[2*m]<b&&(b=g[2*m]),g[2*m+1]>_&&(_=g[2*m+1]),g[2*m+1]<w&&(w=g[2*m+1]);if(b-d>n)return!1;if(t>x+d)return!1;if(w-d>i)return!1;if(r>_+d)return!1;var E;if(d>0){var S=e.math.expandPolygon(g,-d);E=e.math.joinLines(S)}else E=g;for(var m=0;m<g.length/2;m++)if(t<=g[2*m]&&g[2*m]<=n&&r<=g[2*m+1]&&g[2*m+1]<=i)return!0;for(var m=0;m<E.length/2;m++){var P,k,C=E[2*m],D=E[2*m+1];if(m<E.length/2-1?(P=E[2*(m+1)],k=E[2*(m+1)+1]):(P=E[0],k=E[1]),e.math.finiteLinesIntersect(C,D,P,k,t,r,n,r,!1).length>0)return!0;if(e.math.finiteLinesIntersect(C,D,P,k,t,i,n,i,!1).length>0)return!0;if(e.math.finiteLinesIntersect(C,D,P,k,t,r,t,i,!1).length>0)return!0;if(e.math.finiteLinesIntersect(C,D,P,k,n,r,n,i,!1).length>0)return!0}return!1},e.math.polygonIntersectLine=function(t,r,n,i,a,o,s,l){for(var c,u=[],d=new Array(n.length),p=0;p<d.length/2;p++)d[2*p]=n[2*p]*o+i,d[2*p+1]=n[2*p+1]*s+a;var h;if(l>0){var g=e.math.expandPolygon(d,-l);h=e.math.joinLines(g)}else h=d;for(var v,f,y,m,p=0;p<h.length/2;p++)v=h[2*p],f=h[2*p+1],p<h.length/2-1?(y=h[2*(p+1)],m=h[2*(p+1)+1]):(y=h[0],m=h[1]),c=this.finiteLinesIntersect(t,r,i,a,v,f,y,m),0!==c.length&&u.push(c[0],c[1]);return u},e.math.shortenIntersection=function(e,t,r){var n=[e[0]-t[0],e[1]-t[1]],i=Math.sqrt(n[0]*n[0]+n[1]*n[1]),a=(i-r)/i;return 0>a&&(a=1e-5),[t[0]+a*n[0],t[1]+a*n[1]]},e.math.generateUnitNgonPointsFitToSquare=function(t,r){var n=e.math.generateUnitNgonPoints(t,r);return n=e.math.fitPolygonToSquare(n)},e.math.fitPolygonToSquare=function(e){for(var t,r,n=e.length/2,i=1/0,a=1/0,o=-1/0,s=-1/0,l=0;n>l;l++)t=e[2*l],r=e[2*l+1],i=Math.min(i,t),o=Math.max(o,t),a=Math.min(a,r),s=Math.max(s,r);for(var c=2/(o-i),u=2/(s-a),l=0;n>l;l++)t=e[2*l]=e[2*l]*c,r=e[2*l+1]=e[2*l+1]*u,i=Math.min(i,t),o=Math.max(o,t),a=Math.min(a,r),s=Math.max(s,r);if(-1>a)for(var l=0;n>l;l++)r=e[2*l+1]=e[2*l+1]+(-1-a);return e},e.math.generateUnitNgonPoints=function(e,t){var r=1/e*2*Math.PI,n=e%2===0?Math.PI/2+r/2:Math.PI/2;n+=t;for(var i,a,o,s=new Array(2*e),l=0;e>l;l++)i=l*r+n,a=s[2*l]=Math.cos(i),o=s[2*l+1]=Math.sin(-i);return s},e.math.getRoundRectangleRadius=function(e,t){return Math.min(e/4,t/4,8)}}(cytoscape),function(e){"use strict";e.instances=[],e.instanceCounter=0,e.lastInstanceTime=void 0,e.registerInstance=function(t,r){var n;e.is.core(t)?n=t:e.is.domElement(t)&&(r=t);var i=e.getRegistrationForInstance(t,r);if(i)return i.cy?e.util.error("Tried to register on a pre-existing registration"):(i.cy=t,i.domElement=r),i;var a,o=+new Date;e.lastInstanceTime&&e.lastInstanceTime!==o?++e.instanceCounter:e.instanceCounter=0,e.lastInstanceTime=o,a=e.instanceCounter;var s="cy-"+o+"-"+a,l={id:s,cy:n,domElement:r,readies:[]};return e.instances.push(l),e.instances[s]=l,l},e.removeRegistrationForInstance=function(t,r){var n;if(e.is.core(t)?n=t:e.is.domElement(t)&&(r=t),e.is.core(n)){var i=n._private.instanceId;delete e.instances[i],e.instances.splice(i,1)}else if(e.is.domElement(r))for(var a=0;a<e.instances.length;a++){var o=e.instances[a];o.domElement===r&&(delete e.instances[o.id],e.instances.splice(a,1),a--)}},e.getRegistrationForInstance=function(t,r){var n;if(e.is.core(t)?t.registered()&&(n=t):e.is.domElement(t)&&(r=t),e.is.core(n)){var i=n._private.instanceId;return e.instances[i]}if(e.is.domElement(r))for(var a=e.instances.length-1;a>=0;a--){var o=e.instances[a];if(o.domElement===r)return o}}}(cytoscape),function(e){"use strict";function t(t,r,n){var i={};switch(i[r]=n,t){case"core":case"collection":e.fn[t](i)}return e.util.setMap({map:a,keys:[t,r],value:n})}function r(t,r){return e.util.getMap({map:a,keys:[t,r]})}function n(t,r,n,i,a){return e.util.setMap({map:o,keys:[t,r,n,i],value:a})}function i(t,r,n,i){return e.util.getMap({map:o,keys:[t,r,n,i]})}var a={};e.extensions=a;var o={};e.modules=o,e.extension=function(){return 2==arguments.length?r.apply(this,arguments):3==arguments.length?t.apply(this,arguments):4==arguments.length?i.apply(this,arguments):5==arguments.length?n.apply(this,arguments):void $.error("Invalid extension access syntax")}}(cytoscape),function(e,t){"use strict";e&&(e.fn.cytoscape=function(r){var n=e(this);if("get"===r){var i=t.getRegistrationForInstance(n[0]);return i.cy}if(!t.is.fn(r)){if(t.is.plainObject(r))return n.each(function(){var t=e.extend({},r,{container:e(this)[0]});cytoscape(t)});for(var a=n[0],o=[],s=[],l=1;l<arguments.length;l++)s[l-1]=arguments[l];return n.each(function(){var e=t.getRegistrationForInstance(a),n=e.cy,i=r;if(n&&t.is.fn(n[i])){var l=n[i].apply(n,s);o.push(l)}}),1===o.length?o=o[0]:0===o.length&&(o=e(this)),o}var c=r,a=n[0],i=t.getRegistrationForInstance(a);i||(i=t.registerInstance(a)),i&&i.cy&&i.cy.ready()?i.cy.trigger("ready",[],c):i.readies.push(c)},e.cytoscape=cytoscape,null==e.fn.cy&&null==e.cy&&(e.fn.cy=e.fn.cytoscape,e.cy=e.cytoscape))}("undefined"!=typeof jQuery?jQuery:null,cytoscape),function(e){"use strict";function t(){return!1}function r(){return!0}e.Event=function(n,i){return this instanceof e.Event?(n&&n.type?(this.originalEvent=n,this.type=n.type,this.isDefaultPrevented=n.defaultPrevented||n.getPreventDefault&&n.getPreventDefault()?r:t):this.type=n,i&&e.util.extend(this,i),void(this.timeStamp=n&&n.timeStamp||+new Date)):new e.Event(n,i)},e.Event.prototype={preventDefault:function(){this.isDefaultPrevented=r;var e=this.originalEvent;e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.isPropagationStopped=r;var e=this.originalEvent;e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=r,this.stopPropagation()},isDefaultPrevented:t,isPropagationStopped:t,isImmediatePropagationStopped:t}}(cytoscape),function(e){"use strict";e.define={data:function(t){var r={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,onSet:function(){},canSet:function(){return!0}};return t=e.util.extend({},r,t),function(r,n){var i=t,a=this,o=void 0!==a.length,s=o?a:[a],l=o?a[0]:a;if(e.is.string(r)){if(i.allowGetting&&void 0===n){var c;return l&&(c=l._private[i.field][r]),c}if(i.allowSetting&&void 0!==n){var u=!i.immutableKeys[r];if(u){for(var d=0,p=s.length;p>d;d++)i.canSet(s[d])&&(s[d]._private[i.field][r]=n);i.updateStyle&&a.updateStyle(),i.onSet(a),i.settingTriggersEvent&&a[i.triggerFnName](i.settingEvent)}}}else if(i.allowSetting&&e.is.plainObject(r)){var h,g,v=r;for(h in v){g=v[h];var u=!i.immutableKeys[h];if(u)for(var d=0,p=s.length;p>d;d++)i.canSet(s[d])&&(s[d]._private[i.field][h]=g)}i.updateStyle&&a.updateStyle(),i.onSet(a),i.settingTriggersEvent&&a[i.triggerFnName](i.settingEvent)}else if(i.allowBinding&&e.is.fn(r)){var f=r;a.bind(i.bindingEvent,f)}else if(i.allowGetting&&void 0===r){var c;return l&&(c=l._private[i.field]),c}return a}},batchData:function(t){var r={field:"data",event:"data",triggerFnName:"trigger",immutableKeys:{},updateStyle:!1},n=e.util.extend({},r,t);return function(t){var r=this,i=void 0!==r.length,a=i?r:r._private.elements;if(0===a.length)return r;for(var o=i?a[0]._private.cy:r,s=0;s<a.length;s++){var l=a[s],c=l._private.data.id,u=t[c];if(void 0!==u&&null!==u){var d,p,h=u;for(d in h){p=h[d];var g=!n.immutableKeys[d];g&&(l._private[n.field][d]=p)}}}var v=new e.Collection(o,a);return n.updateStyle&&v.updateStyle(),v[n.triggerFnName](n.event),r}},removeData:function(t){var r={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return t=e.util.extend({},r,t),function(r){var n=t,i=this,a=void 0!==i.length,o=a?i:[i];if(e.is.string(r)){for(var s=r.split(/\s+/),l=s.length,c=0;l>c;c++){var u=s[c];if(!e.is.emptyString(u)){var d=!n.immutableKeys[u];if(d)for(var p=0,h=o.length;h>p;p++)delete o[p]._private[n.field][u]}}n.triggerEvent&&i[n.triggerFnName](n.event)}else if(void 0===r){for(var p=0,h=o.length;h>p;p++){var g=o[p]._private[n.field];for(var u in g){var v=!n.immutableKeys[u];v&&delete g[u]}}n.triggerEvent&&i[n.triggerFnName](n.event)}return i}},event:{regex:/(\w+)(\.\w+)?/,optionalTypeRegex:/(\w+)?(\.\w+)?/,falseCallback:function(){return!1}},on:function(t){var r={unbindSelfOnTrigger:!1,unbindAllBindersOnTrigger:!1};return t=e.util.extend({},r,t),function(r,n,i,a){var o=this,s=void 0!==o.length,l=s?o:[o],c=e.is.string(r),u=t;if(e.is.plainObject(n)?(a=i,i=n,n=void 0):(e.is.fn(n)||n===!1)&&(a=n,i=void 0,n=void 0),(e.is.fn(i)||i===!1)&&(a=i,i=void 0),!e.is.fn(a)&&a!==!1&&c)return o;if(c){var d={};d[r]=a,r=d}for(var p in r)if(a=r[p],a===!1&&(a=e.define.event.falseCallback),e.is.fn(a)){p=p.split(/\s+/);for(var h=0;h<p.length;h++){var g=p[h];if(!e.is.emptyString(g)){var v=g.match(e.define.event.regex);if(v)for(var f=v[1],y=v[2]?v[2]:void 0,m={callback:a,data:i,delegated:n?!0:!1,selector:n,selObj:new e.Selector(n),type:f,namespace:y,unbindSelfOnTrigger:u.unbindSelfOnTrigger,unbindAllBindersOnTrigger:u.unbindAllBindersOnTrigger,binders:l},b=0;b<l.length;b++)l[b]._private.listeners.push(m)}}}return o}},off:function(t){var r={};return t=e.util.extend({},r,t),function(t,r,n){var i=this,a=void 0!==i.length,o=a?i:[i],s=e.is.string(t);if(0===arguments.length){for(var l=0;l<o.length;l++)o[l]._private.listeners=[];return i}if((e.is.fn(r)||r===!1)&&(n=r,r=void 0),s){var c={};c[t]=n,t=c}for(var u in t){n=t[u],n===!1&&(n=e.define.event.falseCallback),u=u.split(/\s+/);for(var d=0;d<u.length;d++){var p=u[d];if(!e.is.emptyString(p)){var h=p.match(e.define.event.optionalTypeRegex);if(h)for(var g=h[1]?h[1]:void 0,v=h[2]?h[2]:void 0,l=0;l<o.length;l++)for(var f=o[l]._private.listeners,y=0;y<f.length;y++){var m=f[y],b=!v||v===m.namespace,x=!g||m.type===g,w=!n||n===m.callback,_=b&&x&&w;_&&(f.splice(y,1),y--)}}}}return i}},trigger:function(t){var r={};return t=e.util.extend({},r,t),function(t,r,n){var i=this,a=void 0!==i.length,o=a?i:[i],s=e.is.string(t),l=e.is.plainObject(t),c=e.is.event(t),u=this._private.cy||this;if(s){var d=t.split(/\s+/);t=[];for(var p=0;p<d.length;p++){var h=d[p];if(!e.is.emptyString(h)){var g=h.match(e.define.event.regex),v=g[1],f=g[2]?g[2]:void 0;t.push({type:v,namespace:f})}}}else if(l){var y=t;t=[y]}r?e.is.array(r)||(r=[r]):r=[];for(var p=0;p<t.length;p++)for(var m=t[p],b=0;b<o.length;b++){var h,x=o[b],w=x._private.listeners,_=e.is.element(x),E=_;if(c?(h=m,h.cyTarget=h.cyTarget||x,h.cy=h.cy||u,h.namespace=h.namespace||m.namespace):h=new e.Event(m,{cyTarget:x,cy:u,namespace:m.namespace}),h.cyPosition){var S=h.cyPosition,P=u.zoom(),k=u.pan();h.cyRenderedPosition={x:S.x*P+k.x,y:S.y*P+k.y}}n&&(w=[{namespace:h.namespace,type:h.type,callback:n}]);
for(var C=0;C<w.length;C++){var D=w[C],N=!D.namespace||D.namespace===h.namespace,T=D.type===h.type,M=D.delegated?x!==h.cyTarget&&e.is.element(h.cyTarget)&&D.selObj.filter(h.cyTarget).length>0:!0,I=N&&T&&M;if(I){var z=[h];if(z=z.concat(r),h.data=D.data?D.data:void 0,(D.unbindSelfOnTrigger||D.unbindAllBindersOnTrigger)&&(w.splice(C,1),C--),D.unbindAllBindersOnTrigger)for(var B=D.binders,R=0;R<B.length;R++){var X=B[R];if(X&&X!==x)for(var L=X._private.listeners,O=0;O<L.length;O++){var Y=L[O];Y===D&&(L.splice(O,1),O--)}}var V=D.delegated?h.cyTarget:x,A=D.callback.apply(V,z);(A===!1||h.isPropagationStopped())&&(E=!1,A===!1&&(h.stopPropagation(),h.preventDefault()))}}if(E){var F=x.parent(),q=0!==F.length;q?(F=F[0],F.trigger(h)):u.trigger(h)}}return i}}}}(cytoscape),function(e){"use strict";e.fn.selector=function(t){for(var r in t){var n=t[r];e.Selector.prototype[r]=n}},e.Selector=function(t,r){if(!(this instanceof e.Selector))return new e.Selector(t,r);void 0===r&&void 0!==t&&(r=t,t=void 0);var n=this;if(n._private={selectorText:null,invalid:!0},!r||e.is.string(r)&&r.match(/^\s*$/))null==t?n.length=0:(n[0]=o(),n[0].group=t,n.length=1);else if(e.is.element(r)){var i=new e.Collection(n.cy(),[r]);n[0]=o(),n[0].collection=i,n.length=1}else if(e.is.collection(r))n[0]=o(),n[0].collection=r,n.length=1;else if(e.is.fn(r))n[0]=o(),n[0].filter=r,n.length=1;else{if(!e.is.string(r))return void e.util.error("A selector must be created from a string; found "+r);var a=null,o=function(){return{classes:[],colonSelectors:[],data:[],group:null,ids:[],meta:[],collection:null,filter:null,parent:null,ancestor:null,subject:null,child:null,descendant:null}},s={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:'"(?:\\\\"|[^"])+"|'+"'(?:\\\\'|[^'])+'",number:e.util.regex.number,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$"};s.variable="(?:[\\w-]|(?:\\\\"+s.metaChar+"))+",s.value=s.string+"|"+s.number,s.className=s.variable,s.id=s.variable;for(var l=function(e){return e.replace(new RegExp("\\\\("+s.metaChar+")","g"),function(e,t){return t})},c=s.comparatorOp.split("|"),u=0;u<c.length;u++){var d=c[u];s.comparatorOp+="|@"+d}var p={group:{query:!0,regex:"(node|edge|\\*)",populate:function(e){this.group="*"==e?e:e+"s"}},state:{query:!0,regex:"(:selected|:unselected|:locked|:unlocked|:visible|:hidden|:transparent|:grabbed|:free|:removed|:inside|:grabbable|:ungrabbable|:animated|:unanimated|:selectable|:unselectable|:parent|:child|:loop|:simple|:active|:inactive|:touch)",populate:function(e){this.colonSelectors.push(e)}},id:{query:!0,regex:"\\#("+s.id+")",populate:function(e){this.ids.push(l(e))}},className:{query:!0,regex:"\\.("+s.className+")",populate:function(e){this.classes.push(l(e))}},dataExists:{query:!0,regex:"\\[\\s*("+s.variable+")\\s*\\]",populate:function(e){this.data.push({field:l(e)})}},dataCompare:{query:!0,regex:"\\[\\s*("+s.variable+")\\s*("+s.comparatorOp+")\\s*("+s.value+")\\s*\\]",populate:function(e,t,r){var n=null!=new RegExp("^"+s.string+"$").exec(r);r=n?r.substring(1,r.length-1):parseFloat(r),this.data.push({field:l(e),operator:t,value:r})}},dataBool:{query:!0,regex:"\\[\\s*("+s.boolOp+")\\s*("+s.variable+")\\s*\\]",populate:function(e,t){this.data.push({field:l(t),operator:e})}},metaCompare:{query:!0,regex:"\\[\\[\\s*("+s.meta+")\\s*("+s.comparatorOp+")\\s*("+s.number+")\\s*\\]\\]",populate:function(e,t,r){this.meta.push({field:l(e),operator:t,value:parseFloat(r)})}},nextQuery:{separator:!0,regex:s.separator,populate:function(){n[++u]=o(),a=null}},child:{separator:!0,regex:s.child,populate:function(){var e=o();e.parent=this,e.subject=a,n[u]=e}},descendant:{separator:!0,regex:s.descendant,populate:function(){var e=o();e.ancestor=this,e.subject=a,n[u]=e}},subject:{modifier:!0,regex:s.subject,populate:function(){return null!=a&&this.subject!=this?(e.util.error("Redefinition of subject in selector `"+r+"`"),!1):(a=this,void(this.subject=this))}}},h=0;for(var g in p)p[h]=p[g],p[h].name=g,h++;p.length=h,n._private.selectorText=r;var v=r,u=0,f=function(t){for(var r,n,i,a=0;a<p.length;a++){var o=p[a],s=o.name;if(!e.is.fn(t)||t(s,o)){var l=v.match(new RegExp("^"+o.regex));if(null!=l){n=l,r=o,i=s;var c=l[0];v=v.substring(c.length);break}}}return{expr:r,match:n,name:i}},y=function(){var e=v.match(/^\s+/);if(e){var t=e[0];v=v.substring(t.length)}};for(n[0]=o(),y();;){var m=f();if(null==m.expr)return void e.util.error("The selector `"+r+"`is invalid");for(var b=[],h=1;h<m.match.length;h++)b.push(m.match[h]);var x=m.expr.populate.apply(n[u],b);if(x===!1)return;if(v.match(/^\s*$/))break}for(n.length=u+1,h=0;h<n.length;h++){var w=n[h];if(null!=w.subject){for(;w.subject!=w;)if(null!=w.parent){var _=w.parent,E=w;E.parent=null,_.child=E,w=_}else{if(null==w.ancestor){e.util.error("When adjusting references for the selector `"+w+"`, neither parent nor ancestor was found");break}var S=w.ancestor,P=w;P.ancestor=null,S.descendant=P,w=S}n[h]=w.subject}}if(null!=t)for(var h=0;h<n.length;h++){if(null!=n[h].group&&n[h].group!=t)return void e.util.error("Group `"+n[h].group+"` conflicts with implicit group `"+t+"` in selector `"+r+"`");n[h].group=t}}n._private.invalid=!1},e.selfn=e.Selector.prototype,e.selfn.size=function(){return this.length},e.selfn.eq=function(e){return this[e]},e.selfn.find=function(){},e.selfn.filter=function(t){var r=this,n=t.cy();if(r._private.invalid)return new e.Collection(n);var i=function(t,r){if(null!=t.group&&"*"!=t.group&&t.group!=r._private.group)return!1;for(var n=!0,a=0;a<t.colonSelectors.length;a++){var o=t.colonSelectors[a];switch(o){case":selected":n=r.selected();break;case":unselected":n=!r.selected();break;case":selectable":n=r.selectable();break;case":unselectable":n=!r.selectable();break;case":locked":n=r.locked();break;case":unlocked":n=!r.locked();break;case":visible":n=r.visible();break;case":hidden":n=!r.visible();break;case":transparent":n=r.transparent();break;case":grabbed":n=r.grabbed();break;case":free":n=!r.grabbed();break;case":removed":n=r.removed();break;case":inside":n=!r.removed();break;case":grabbable":n=r.grabbable();break;case":ungrabbable":n=!r.grabbable();break;case":animated":n=r.animated();break;case":unanimated":n=!r.animated();break;case":parent":n=r.children().nonempty();break;case":child":n=r.parent().nonempty();break;case":loop":n=r.isEdge()&&r.data("source")===r.data("target");break;case":simple":n=r.isEdge()&&r.data("source")!==r.data("target");break;case":active":n=r.active();break;case":inactive":n=!r.active();break;case":touch":n=window&&document&&("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)}if(!n)break}if(!n)return!1;for(var s=!0,a=0;a<t.ids.length;a++){var l=t.ids[a],c=r._private.data.id;if(s=s&&l==c,!s)break}if(!s)return!1;for(var u=!0,a=0;a<t.classes.length;a++){var d=t.classes[a];if(u=u&&r.hasClass(d),!u)break}if(!u)return!1;var p=function(r){for(var n=!0,i=0;i<t[r.name].length;i++){var a,o=t[r.name][i],s=o.operator,l=o.value,c=o.field;if(null!=s&&null!=l){var u=r.fieldValue(c),d=e.is.string(u)||e.is.number(u)?""+u:"",p=""+l,h=!1;switch("@"==s.charAt(0)&&(d=d.toLowerCase(),p=p.toLowerCase(),s=s.substring(1),h=!0),h&&(l=p.toLowerCase(),u=d.toLowerCase()),s){case"*=":a=d.search(p)>=0;break;case"$=":a=null!=new RegExp(p+"$").exec(d);break;case"^=":a=null!=new RegExp("^"+p).exec(d);break;case"=":a=u===l;break;case"!=":a=u!==l;break;case">":a=u>l;break;case">=":a=u>=l;break;case"<":a=l>u;break;case"<=":a=l>=u;break;default:a=!1}}else if(null!=s)switch(s){case"?":a=r.fieldTruthy(c);break;case"!":a=!r.fieldTruthy(c);break;case"^":a=r.fieldUndefined(c)}else a=!r.fieldUndefined(c);if(!a){n=!1;break}}return n},h=p({name:"data",fieldValue:function(e){return r._private.data[e]},fieldRef:function(e){return"element._private.data."+e},fieldUndefined:function(e){return void 0===r._private.data[e]},fieldTruthy:function(e){return r._private.data[e]?!0:!1}});if(!h)return!1;var g=p({name:"meta",fieldValue:function(e){return r[e]()},fieldRef:function(e){return"element."+e+"()"},fieldUndefined:function(e){return null==r[e]()},fieldTruthy:function(e){return r[e]()?!0:!1}});if(!g)return!1;if(null!=t.collection){var v=null!=t.collection._private.ids[r.id()];if(!v)return!1}if(null!=t.filter&&0===r.collection().filter(t.filter).size())return!1;var f=function(e,t){if(null!=e){var r=!1;t=t();for(var n=0;n<t.size();n++)if(i(e,t.eq(n))){r=!0;break}return r}return!0};return f(t.parent,function(){return r.parent()})&&f(t.ancestor,function(){return r.parents()})&&f(t.child,function(){return r.children()})&&f(t.descendant,function(){return r.descendants()})?!0:!1},a=function(e,t){for(var n=0;n<r.length;n++){var a=r[n];if(i(a,t))return!0}return!1};null==r._private.selectorText&&(a=function(){return!0});var o=t.filter(a);return o},e.selfn.toString=e.selfn.selector=function(){for(var t="",r=function(t){return e.is.string(t)?t:""},n=function(e){var t="",a=r(e.group);t+=a.substring(0,a.length-1);for(var o=0;o<e.data.length;o++){var s=e.data[o];t+=s.value?"["+s.field+r(s.operator)+r(s.value)+"]":"["+r(s.operator)+s.field+"]"}for(var o=0;o<e.meta.length;o++){var l=e.meta[o];t+="[["+l.field+r(l.operator)+r(l.value)+"]]"}for(var o=0;o<e.colonSelectors.length;o++){var c=e.colonSelectors[i];t+=c}for(var o=0;o<e.ids.length;o++){var c="#"+e.ids[i];t+=c}for(var o=0;o<e.classes.length;o++){var c="."+e.classes[i];t+=c}return null!=e.parent&&(t=n(e.parent)+" > "+t),null!=e.ancestor&&(t=n(e.ancestor)+" "+t),null!=e.child&&(t+=" > "+n(e.child)),null!=e.descendant&&(t+=" "+n(e.descendant)),t},i=0;i<this.length;i++){var a=this[i];t+=n(a),this.length>1&&i<this.length-1&&(t+=", ")}return t}}(cytoscape),function(e){"use strict";e.Style=function(t){return this instanceof e.Style?e.is.core(t)?(this._private={cy:t,coreStyle:{}},this.length=0,void this.addDefaultStylesheet()):void e.util.error("A style must have a core reference"):new e.Style(t)},e.style=e.Style,e.styfn=e.Style.prototype,e.fn.style=function(t){for(var r in t){var n=t[r];e.Style.prototype=n}},function(){var t=e.util.regex.number,r=e.util.regex.rgbaNoBackRefs,n=e.util.regex.hslaNoBackRefs,i=e.util.regex.hex3,a=e.util.regex.hex6,o=function(e){return"^"+e+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},s=function(e){return"^"+e+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+t+")\\s*\\,\\s*("+t+")\\s*,\\s*("+t+"|\\w+|"+r+"|"+n+"|"+i+"|"+a+")\\s*\\,\\s*("+t+"|\\w+|"+r+"|"+n+"|"+i+"|"+a+")\\)$"};e.style.types={time:{number:!0,min:0,units:"s"},percent:{number:!0,min:0,max:100,units:"%"},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},size:{number:!0,min:0,enums:["auto"]},bgSize:{number:!0,min:0,allowPercent:!0},bgPos:{number:!0,allowPercent:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"]},bgFit:{enums:["none","contain","cover"]},bgClip:{enums:["none","node"]},color:{color:!0},lineStyle:{enums:["solid","dotted","dashed"]},curveStyle:{enums:["bezier","haystack"]},fontFamily:{regex:"^([\\w- ]+(?:\\s*,\\s*[\\w- ]+)*)$"},fontVariant:{enums:["small-caps","normal"]},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","capitalize","uppercase","lowercase"]},nodeShape:{enums:["rectangle","roundrectangle","ellipse","triangle","square","pentagon","hexagon","heptagon","octagon","star"]},arrowShape:{enums:["tee","triangle","square","circle","diamond","none"]},arrowFill:{enums:["filled","hollow"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},cursor:{enums:["auto","crosshair","default","e-resize","n-resize","ne-resize","nw-resize","pointer","progress","s-resize","sw-resize","text","w-resize","wait","grab","grabbing"]},text:{string:!0},data:{mapping:!0,regex:o("data")},layoutData:{mapping:!0,regex:o("layoutData")},mapData:{mapping:!0,regex:s("mapData")},mapLayoutData:{mapping:!0,regex:s("mapLayoutData")},url:{regex:"^url\\s*\\(\\s*([^\\s]+)\\s*\\s*\\)|none|(.+)$"},propList:{propList:!0}};var l=e.style.types;e.style.properties=[{name:"text-valign",type:l.valign},{name:"text-halign",type:l.halign},{name:"color",type:l.color},{name:"content",type:l.text},{name:"text-outline-color",type:l.color},{name:"text-outline-width",type:l.size},{name:"text-outline-opacity",type:l.zeroOneNumber},{name:"text-opacity",type:l.zeroOneNumber},{name:"text-decoration",type:l.textDecoration},{name:"text-transform",type:l.textTransform},{name:"font-family",type:l.fontFamily},{name:"font-style",type:l.fontStyle},{name:"font-variant",type:l.fontVariant},{name:"font-weight",type:l.fontWeight},{name:"font-size",type:l.size},{name:"min-zoomed-font-size",type:l.size},{name:"display",type:l.display},{name:"visibility",type:l.visibility},{name:"opacity",type:l.zeroOneNumber},{name:"z-index",type:l.nonNegativeInt},{name:"overlay-padding",type:l.size},{name:"overlay-color",type:l.color},{name:"overlay-opacity",type:l.zeroOneNumber},{name:"transition-property",type:l.propList},{name:"transition-duration",type:l.time},{name:"transition-delay",type:l.time},{name:"background-blacken",type:l.nOneOneNumber},{name:"background-color",type:l.color},{name:"background-opacity",type:l.zeroOneNumber},{name:"background-image",type:l.url},{name:"background-position-x",type:l.bgPos},{name:"background-position-y",type:l.bgPos},{name:"background-repeat",type:l.bgRepeat},{name:"background-fit",type:l.bgFit},{name:"background-clip",type:l.bgClip},{name:"pie-size",type:l.bgSize},{name:"pie-1-background-color",type:l.color},{name:"pie-2-background-color",type:l.color},{name:"pie-3-background-color",type:l.color},{name:"pie-4-background-color",type:l.color},{name:"pie-5-background-color",type:l.color},{name:"pie-6-background-color",type:l.color},{name:"pie-7-background-color",type:l.color},{name:"pie-8-background-color",type:l.color},{name:"pie-9-background-color",type:l.color},{name:"pie-10-background-color",type:l.color},{name:"pie-11-background-color",type:l.color},{name:"pie-12-background-color",type:l.color},{name:"pie-13-background-color",type:l.color},{name:"pie-14-background-color",type:l.color},{name:"pie-15-background-color",type:l.color},{name:"pie-16-background-color",type:l.color},{name:"pie-1-background-size",type:l.percent},{name:"pie-2-background-size",type:l.percent},{name:"pie-3-background-size",type:l.percent},{name:"pie-4-background-size",type:l.percent},{name:"pie-5-background-size",type:l.percent},{name:"pie-6-background-size",type:l.percent},{name:"pie-7-background-size",type:l.percent},{name:"pie-8-background-size",type:l.percent},{name:"pie-9-background-size",type:l.percent},{name:"pie-10-background-size",type:l.percent},{name:"pie-11-background-size",type:l.percent},{name:"pie-12-background-size",type:l.percent},{name:"pie-13-background-size",type:l.percent},{name:"pie-14-background-size",type:l.percent},{name:"pie-15-background-size",type:l.percent},{name:"pie-16-background-size",type:l.percent},{name:"border-color",type:l.color},{name:"border-opacity",type:l.zeroOneNumber},{name:"border-width",type:l.size},{name:"border-style",type:l.lineStyle},{name:"height",type:l.size},{name:"width",type:l.size},{name:"padding-left",type:l.size},{name:"padding-right",type:l.size},{name:"padding-top",type:l.size},{name:"padding-bottom",type:l.size},{name:"shape",type:l.nodeShape},{name:"source-arrow-shape",type:l.arrowShape},{name:"target-arrow-shape",type:l.arrowShape},{name:"source-arrow-color",type:l.color},{name:"target-arrow-color",type:l.color},{name:"source-arrow-fill",type:l.arrowFill},{name:"target-arrow-fill",type:l.arrowFill},{name:"line-style",type:l.lineStyle},{name:"line-color",type:l.color},{name:"control-point-step-size",type:l.size},{name:"control-point-distance",type:l.size},{name:"control-point-weight",type:l.zeroOneNumber},{name:"curve-style",type:l.curveStyle},{name:"selection-box-color",type:l.color},{name:"selection-box-opacity",type:l.zeroOneNumber},{name:"selection-box-border-color",type:l.color},{name:"selection-box-border-width",type:l.size},{name:"panning-cursor",type:l.cursor},{name:"active-bg-color",type:l.color},{name:"active-bg-opacity",type:l.zeroOneNumber},{name:"active-bg-size",type:l.size},{name:"outside-texture-bg-color",type:l.color},{name:"outside-texture-bg-opacity",type:l.zeroOneNumber}];for(var c=e.style.properties,u=0;u<c.length;u++){var d=c[u];c[d.name]=d}e.style.pieBackgroundN=16}(),e.styfn.addDefaultStylesheet=function(){var t="Helvetica",r="normal",n="normal",i="normal",a="#000",o="none",s=16;this.selector("node, edge").css({"text-valign":"top","text-halign":"center",color:a,"text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":o,"font-family":t,"font-style":r,"font-variant":n,"font-weight":i,"font-size":s,"min-zoomed-font-size":0,visibility:"visible",display:"element",opacity:1,"z-index":0,content:"","overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"transition-property":"none","transition-duration":0,"transition-delay":0,"background-blacken":0,"background-color":"#888","background-opacity":1,"background-image":"none","background-position-x":"50%","background-position-y":"50%","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid",height:30,width:30,"padding-top":0,"padding-bottom":0,"padding-left":0,"padding-right":0,shape:"ellipse","pie-size":"100%","pie-1-background-color":"black","pie-1-background-size":"0%","pie-2-background-color":"black","pie-2-background-size":"0%","pie-3-background-color":"black","pie-3-background-size":"0%","pie-4-background-color":"black","pie-4-background-size":"0%","pie-5-background-color":"black","pie-5-background-size":"0%","pie-6-background-color":"black","pie-6-background-size":"0%","pie-7-background-color":"black","pie-7-background-size":"0%","pie-8-background-color":"black","pie-8-background-size":"0%","pie-9-background-color":"black","pie-9-background-size":"0%","pie-10-background-color":"black","pie-10-background-size":"0%","pie-11-background-color":"black","pie-11-background-size":"0%","pie-12-background-color":"black","pie-12-background-size":"0%","pie-13-background-color":"black","pie-13-background-size":"0%","pie-14-background-color":"black","pie-14-background-size":"0%","pie-15-background-color":"black","pie-15-background-size":"0%","pie-16-background-color":"black","pie-16-background-size":"0%","source-arrow-shape":"none","target-arrow-shape":"none","source-arrow-color":"#bbb","target-arrow-color":"#bbb","source-arrow-fill":"filled","target-arrow-fill":"filled","line-style":"solid","line-color":"#bbb","control-point-step-size":40,"control-point-weight":.5,"curve-style":"bezier"}).selector("$node > node").css({width:"auto",height:"auto",shape:"rectangle","background-opacity":.5,"padding-top":10,"padding-right":10,"padding-left":10,"padding-bottom":10}).selector("edge").css({width:1}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}).selector("core").css({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"panning-cursor":"grabbing","active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":e.is.touch()?40:15,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125})},e.styfn.clear=function(){this._private.newStyle=!0;for(var e=0;e<this.length;e++)delete this[e];return this.length=0,this},e.styfn.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this},e.styfn.core=function(){return this._private.coreStyle},e.styfn.parse=function(t,r,n,i){t=e.util.camel2dash(t);var a=e.style.properties[t],o=r;if(!a)return null;if(void 0===r||null===r)return null;var s=e.is.string(r);s&&(r=e.util.trim(r));var l=a.type;if(!l)return null;if(n&&(""===r||null===r))return{name:t,value:r,bypass:!0,deleteBypass:!0};var c,u,d,p;if(!s||i);else{if((c=new RegExp(e.style.types.data.regex).exec(r))||(d=new RegExp(e.style.types.layoutData.regex).exec(r))){var h=void 0!==d;return c=c||d,{name:t,value:c,strValue:""+r,mapped:h?e.style.types.layoutData:e.style.types.data,field:c[1],bypass:n}}if((u=new RegExp(e.style.types.mapData.regex).exec(r))||(p=new RegExp(e.style.types.mapLayoutData.regex).exec(r))){var h=void 0!==p;if(u=u||p,!l.color&&!l.number)return!1;var g=this.parse(t,u[4]);if(!g||g.mapped)return!1;var v=this.parse(t,u[5]);if(!v||v.mapped)return!1;if(g.value===v.value)return!1;if(l.color){var f=g.value,y=v.value,m=!(f[0]!==y[0]||f[1]!==y[1]||f[2]!==y[2]||f[3]!==y[3]&&(null!=f[3]&&1!==f[3]||null!=y[3]&&1!==y[3]));if(m)return!1}return{name:t,value:u,strValue:""+r,mapped:h?e.style.types.mapLayoutData:e.style.types.mapData,field:u[1],fieldMin:parseFloat(u[2]),fieldMax:parseFloat(u[3]),valueMin:g.value,valueMax:v.value,bypass:n}}}if(l.number){var b,x="px";if(l.units&&(b=l.units),!l.unitless)if(s){var w="px|em"+(l.allowPercent?"|\\%":"");b&&(w=b);var _=r.match("^("+e.util.regex.number+")("+w+")?$");_&&(r=_[1],b=_[2]||x)}else b||(b=x);if(r=parseFloat(r),isNaN(r)&&void 0===l.enums)return null;if(isNaN(r)&&void 0!==l.enums){r=o;for(var E=0;E<l.enums.length;E++){var S=l.enums[E];if(S===r)return{name:t,value:r,strValue:""+r,bypass:n}}return null}if(l.integer&&!e.is.integer(r))return null;if(void 0!==l.min&&r<l.min||void 0!==l.max&&r>l.max)return null;var P={name:t,value:r,strValue:""+r+(b?b:""),units:b,bypass:n};return l.unitless||"px"!==b&&"em"!==b||(P.pxValue="px"!==b&&b?this.getEmSizeInPixels()*r:r),P}if(l.propList){var k=[],C=""+r;if("none"===C);else{for(var D=C.split(","),E=0;E<D.length;E++){var N=e.util.trim(D[E]);e.style.properties[N]&&k.push(N)}if(0===k.length)return null}return{name:t,value:k,strValue:0===k.length?"none":k.join(", "),bypass:n}}if(l.color){var T=e.util.color2tuple(r);return T?{name:t,value:T,strValue:""+r,bypass:n}:null}if(l.enums){for(var E=0;E<l.enums.length;E++){var S=l.enums[E];if(S===r)return{name:t,value:r,strValue:""+r,bypass:n}}return null}if(l.regex){var M=new RegExp(l.regex),I=M.exec(r);return I?{name:t,value:I,strValue:""+r,bypass:n}:null}return l.string?{name:t,value:r,strValue:""+r,bypass:n}:null},e.styfn.selector=function(t){var r="core"===t?null:new e.Selector(t),n=this.length++;return this[n]={selector:r,properties:[]},this},e.styfn.css=function(){var t=arguments;switch(t.length){case 1:for(var r=t[0],n=0;n<e.style.properties.length;n++){var i=e.style.properties[n],a=r[i.name];void 0===a&&(a=r[e.util.dash2camel(i.name)]),void 0!==a&&this.cssRule(i.name,a)}break;case 2:this.cssRule(t[0],t[1])}return this},e.styfn.cssRule=function(e,t){var r=this.parse(e,t);if(r){var n=this.length-1;this[n].properties.push(r);var i=!this[n].selector;i&&(this._private.coreStyle[r.name]=r)}return this}}(cytoscape),function(e){"use strict";e.styfn.apply=function(e){for(var t=this,r=0;r<e.length;r++){var n=e[r],i=n._private,a=[],o=[];t._private.newStyle&&(i.styleCxts=[],i.style={});for(var s=0;s<this.length;s++){var l=this[s],c=l.selector&&l.selector.filter(n).length>0,u=l.properties,d=!i.styleCxts[s];if(c){for(var p=0;p<u.length;p++){var h=u[p],g=i.style[h.name],v=g&&g.context===l,f=h.mapped&&v;(d||f)&&this.applyParsedProperty(n,h,l)}n._private.styleCxts[s]=l,t._private.newStyle===!1&&d&&a.push(l)}else i.styleCxts[s]&&(this.rollBackContext(n,l),o.push(l),delete i.styleCxts[s])}(a.length>0||o.length>0)&&this.updateTransitions(n,a,o),t.updateStyleHints(n)}t._private.newStyle=!1},e.styfn.updateStyleHints=function(t){var r=t._private,n=!1;if("nodes"===r.group)for(var i=1;i<=e.style.pieBackgroundN;i++){var a=r.style["pie-"+i+"-background-size"].value;if(a>0){n=!0;break}}r.hasPie=n;var o=r.style["text-transform"].strValue,s=r.style.content.strValue,l=r.style["font-style"].strValue,a=r.style["font-size"].pxValue+"px",c=r.style["font-family"].strValue,u=r.style["font-variant"].strValue,d=r.style["font-weight"].strValue;r.labelKey=l+"$"+a+"$"+c+"$"+u+"$"+d+"$"+s+"$"+o,r.fontKey=l+"$"+d+"$"+a+"$"+c},e.styfn.rollBackContext=function(e,t){for(var r=0;r<t.properties.length;r++){var n=t.properties[r],i=e._private.style[n.name];i.bypassed&&(i=i.bypassed);for(var a,o=!0,s=0;i.prev;){var l=i.prev;i.context===t&&(o?e._private.style[n.name]=l:a&&(a.prev=l)),a=i,i=l,o=!1,s++}}},e.styfn.applyParsedProperty=function(t,r,n){r=e.util.clone(r);var i,a,o=r,s=t._private.style,l=e.style.properties[o.name].type,c=o.bypass,u=s[o.name],d=u&&u.bypass;if(("height"===r.name||"width"===r.name)&&"auto"===r.value&&t.isNode()&&!t.isParent())return!1;if(c&&o.deleteBypass){var p=s[o.name];return p?p.bypass&&p.bypassed?(s[o.name]=p.bypassed,!0):!1:!0}switch(o.mapped){case e.style.types.mapData:case e.style.types.mapLayoutData:for(var h=o.mapped===e.style.types.mapLayoutData,g=o.field.split("."),i=h?t._private.layoutData:t._private.data,v=0;v<g.length&&i;v++){var f=g[v];i=i[f]}var y;if(y=e.is.number(i)?(i-o.fieldMin)/(o.fieldMax-o.fieldMin):0,0>y?y=0:y>1&&(y=1),l.color){var m=o.valueMin[0],b=o.valueMax[0],x=o.valueMin[1],w=o.valueMax[1],_=o.valueMin[2],E=o.valueMax[2],S=null==o.valueMin[3]?1:o.valueMin[3],P=null==o.valueMax[3]?1:o.valueMax[3],k=[Math.round(m+(b-m)*y),Math.round(x+(w-x)*y),Math.round(_+(E-_)*y),Math.round(S+(P-S)*y)];a={bypass:o.bypass,name:o.name,value:k,strValue:"rgb("+k[0]+", "+k[1]+", "+k[2]+")"}}else{if(!l.number)return!1;var C=o.valueMin+(o.valueMax-o.valueMin)*y;a=this.parse(o.name,C,o.bypass,!0)}a||(a=this.parse(o.name,u.strValue,o.bypass,!0)),a.mapping=o,o=a;break;case e.style.types.data:case e.style.types.layoutData:for(var h=o.mapped===e.style.types.layoutData,g=o.field.split("."),i=h?t._private.layoutData:t._private.data,v=0;v<g.length&&i;v++){var f=g[v];i=i[f]}a=this.parse(o.name,i,o.bypass,!0),a||(a=this.parse(o.name,u.strValue,o.bypass,!0)),a.mapping=o,o=a;break;case void 0:break;default:return!1}if(c)o.bypassed=d?u.bypassed:u,s[o.name]=o;else{var D;d?(D=u.bypassed,u.bypassed=o):(D=s[o.name],s[o.name]=o),D&&D.mapping&&o.mapping&&D.context===n&&(D=D.prev),D&&D!==o&&(o.prev=D)}return o.context=n,!0},e.styfn.update=function(){var e=this._private.cy,t=e.elements();t.updateStyle()},e.styfn.updateMappers=function(t){for(var r=0;r<t.length;r++){for(var n=t[r],i=n._private.style,a=0;a<e.style.properties.length;a++){var o=e.style.properties[a],s=i[o.name];if(s&&s.mapping){var l=s.mapping;this.applyParsedProperty(n,l)}}this.updateStyleHints(n)}},e.styfn.updateTransitions=function(t,r,n){var i=this,a=t._private.style,o=a["transition-property"].value,s=1e3*a["transition-duration"].value,l=1e3*a["transition-delay"].value,c={};if(o.length>0&&s>0){for(var u=!1,d=0;d<o.length;d++){for(var p=o[d],h=a[p],g=h.prev,v=a[p],f=!1,y=!1,m=!1,b=0;b<r.length;b++){var x=r[b];if(x===v.context){y=!0;break}}for(var b=n.length-1;b>=0;b--){for(var x=n[b],w=0;w<x.properties.length;w++){var _=x.properties[w];if(_.name===p){m=!0,g=_;break}}if(m)break}(y||m)&&(e.is.number(g.pxValue)&&e.is.number(v.pxValue)?f=g.pxValue!==v.pxValue:e.is.number(g.value)&&e.is.number(v.value)?f=g.value!==v.value:e.is.array(g.value)&&e.is.array(v.value)&&(f=g.value[0]!==v.value[0]||g.value[1]!==v.value[1]||g.value[2]!==v.value[2]),f&&(c[p]=v.strValue,this.applyBypass(t,p,g.strValue),u=!0))}if(!u)return;t._private.transitioning=!0,t.stop(),l>0&&t.delay(l),t.animate({css:c},{duration:s,queue:!1,complete:function(){i.removeAllBypasses(t),t._private.transitioning=!1}})}else t._private.transitioning&&(t.stop(),this.removeAllBypasses(t),t._private.transitioning=!1)}}(cytoscape),function(e){"use strict";e.styfn.applyBypass=function(t,r,n){var i=[];if("*"===r||"**"===r){if(void 0!==n)for(var a=0;a<e.style.properties.length;a++){var o=e.style.properties[a],r=o.name,s=this.parse(r,n,!0);s&&i.push(s)}}else if(e.is.string(r)){var s=this.parse(r,n,!0);s&&i.push(s)}else{if(!e.is.plainObject(r))return!1;for(var l=r,a=0;a<e.style.properties.length;a++){var o=e.style.properties[a],r=o.name,n=l[r];if(void 0===n&&(n=l[e.util.dash2camel(r)]),void 0!==n){var s=this.parse(r,n,!0);s&&i.push(s)}}}if(0===i.length)return!1;for(var c=!1,a=0;a<t.length;a++)for(var u=t[a],d=0;d<i.length;d++){var o=i[d];c=this.applyParsedProperty(u,o)||c}return c},e.styfn.removeAllBypasses=function(t){for(var r=0;r<e.style.properties.length;r++)for(var n=e.style.properties[r],i=n.name,a="",o=this.parse(i,a,!0),s=0;s<t.length;s++){var l=t[s];this.applyParsedProperty(l,o)}}}(cytoscape),function(e,t){"use strict";e.styfn.getEmSizeInPixels=function(){var e=this._private.cy,r=e.container();if(t&&r&&t.getComputedStyle){var n=t.getComputedStyle(r).getPropertyValue("font-size"),i=parseFloat(n);return i}return 1},e.styfn.containerCss=function(e){var r=this._private.cy,n=r.container();return t&&n&&t.getComputedStyle?t.getComputedStyle(n).getPropertyValue(e):void 0},e.styfn.containerProperty=function(e){var t=this.containerCss(e),r=this.parse(e,t);return r},e.styfn.containerPropertyAsString=function(e){var t=this.containerProperty(e);return t?t.strValue:void 0}}(cytoscape,"undefined"==typeof window?null:window),function(e){"use strict";e.styfn.getRenderedStyle=function(t){var t=t[0];if(t){for(var r={},n=t._private.style,i=this._private.cy,a=i.zoom(),o=0;o<e.style.properties.length;o++){var s=e.style.properties[o],l=n[s.name];if(l){var c=l.unitless?l.strValue:l.pxValue*a+"px";r[s.name]=c,r[e.util.dash2camel(s.name)]=c}}return r}},e.styfn.getRawStyle=function(t){var t=t[0];if(t){for(var r={},n=t._private.style,i=0;i<e.style.properties.length;i++){var a=e.style.properties[i],o=n[a.name];o&&(r[a.name]=o.strValue,r[e.util.dash2camel(a.name)]=o.strValue)}return r}},e.styfn.getValueStyle=function(t){var r,n;if(e.is.element(t)?(r={},n=t._private.style):(r={},n=t),n)for(var i=0;i<e.style.properties.length;i++){var a=e.style.properties[i],o=n[a.name]||n[e.util.dash2camel(a.name)];if(void 0===o||e.is.plainObject(o)||(o=this.parse(a.name,o)),o){var s=void 0===o.value?o:o.value;r[a.name]=s,r[e.util.dash2camel(a.name)]=s}}return r}}(cytoscape),function(e){"use strict";e.style.applyFromJson=function(e,t){for(var r=0;r<t.length;r++){var n=t[r],i=n.selector,a=n.css;e.selector(i);for(var o in a){var s=a[o];e.css(o,s)}}return e},e.style.fromJson=function(t,r){var n=new e.Style(t);return e.style.applyFromJson(n,r),n},e.styfn.fromJson=function(t){var r=this;return r.resetToDefault(),e.style.applyFromJson(r,t),r},e.styfn.json=function(){for(var e=[],t=0;t<this.length;t++){for(var r=this[t],n=r.selector,i=r.properties,a={},o=0;o<i.length;o++){var s=i[o];a[s.name]=s.strValue}e.push({selector:n?n.toString():"core",css:a})}return e}}(cytoscape),function(e){"use strict";e.style.applyFromString=function(t,r){function n(){l=l.length>a.length?l.substr(a.length):""}function i(){o=o.length>s.length?o.substr(s.length):""}var a,o,s,l=""+r;for(l=l.replace(/[/][*](\s|.)+?[*][/]/g,"");;){var c=l.match(/^\s*$/);if(c)break;var u=l.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!u){e.util.error("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+l);break}a=u[0];var d=u[1],p=new e.Selector(d);if(p._private.invalid)e.util.error("Skipping parsing of block: Invalid selector found in string stylesheet: "+d),n();else{var h=u[2],g=!1;o=h;for(var v=[];;){var c=o.match(/^\s*$/);if(c)break;var f=o.match(/^\s*(.+?)\s*:\s*(.+?)\s*;/);if(!f){e.util.error("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+h),g=!0;break}s=f[0];var y=f[1],m=f[2],b=e.style.properties[y];if(b){var x=t.parse(y,m);x?(v.push({name:y,val:m}),i()):(e.util.error("Skipping property: Invalid property definition in: "+s),i())}else e.util.error("Skipping property: Invalid property name in: "+s),i()
}if(g){n();break}t.selector(d);for(var w=0;w<v.length;w++){var b=v[w];t.css(b.name,b.val)}n()}}return t},e.style.fromString=function(t,r){var n=new e.Style(t);return e.style.applyFromString(n,r),n},e.styfn.fromString=function(t){var r=this;return r.resetToDefault(),e.style.applyFromString(r,t),r}}(cytoscape),function(e){"use strict";e.stylesheet=e.Stylesheet=function(){return this instanceof e.Stylesheet?void(this.length=0):new e.Stylesheet},e.Stylesheet.prototype.selector=function(e){var t=this.length++;return this[t]={selector:e,properties:[]},this},e.Stylesheet.prototype.css=function(t,r){var n=this.length-1;if(e.is.string(t))this[n].properties.push({name:t,value:r});else if(e.is.plainObject(t))for(var i=t,a=0;a<e.style.properties.length;a++){var o=e.style.properties[a],s=i[o.name];if(void 0===s&&(s=i[e.util.dash2camel(o.name)]),void 0!==s){var t=o.name,r=s;this[n].properties.push({name:t,value:r})}}return this},e.Stylesheet.prototype.generateStyle=function(t){for(var r=new e.Style(t),n=0;n<this.length;n++){var i=this[n],a=i.selector,o=i.properties;r.selector(a);for(var s=0;s<o.length;s++){var l=o[s];r.css(l.name,l.value)}}return r}}(cytoscape),function(e,t){"use strict";var r=e.is.touch(),n={hideEdgesOnViewport:!1},i=e.util.copy(n);e.defaults=function(t){n=e.util.extend({},i,t)},e.fn.core=function(t){for(var r in t){var n=t[r];e.Core.prototype[r]=n}},e.Core=function(i){if(!(this instanceof e.Core))return new e.Core(i);var a=this;i=e.util.extend({},n,i);var o=i.container,s=e.getRegistrationForInstance(a,o);s&&s.cy&&(s.domElement.innerHTML="",s.cy.notify({type:"destroy"}),e.removeRegistrationForInstance(s.cy,s.domElement)),s=e.registerInstance(a,o);var l=s.readies,c=i;c.layout=e.util.extend({name:t&&o?"grid":"null"},c.layout),c.renderer=e.util.extend({name:t&&o?"canvas":"null"},c.renderer);var u=this._private={ready:!1,initrender:!1,instanceId:s.id,options:c,elements:[],id2index:{},listeners:[],aniEles:[],scratch:{},layout:null,renderer:null,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:void 0===c.zoomingEnabled?!0:c.zoomingEnabled,userZoomingEnabled:void 0===c.userZoomingEnabled?!0:c.userZoomingEnabled,panningEnabled:void 0===c.panningEnabled?!0:c.panningEnabled,userPanningEnabled:void 0===c.userPanningEnabled?!0:c.userPanningEnabled,boxSelectionEnabled:void 0===c.boxSelectionEnabled?!0:c.boxSelectionEnabled,autolockNodes:!1,autoungrabifyNodes:void 0===c.autoungrabifyNodes?!1:c.autoungrabifyNodes,zoom:e.is.number(c.zoom)?c.zoom:1,pan:{x:e.is.plainObject(c.pan)&&e.is.number(c.pan.x)?c.pan.x:0,y:e.is.plainObject(c.pan)&&e.is.number(c.pan.y)?c.pan.y:0},hasCompoundNodes:!1},d=c.selectionType;u.selectionType=void 0===d||"additive"!==d&&"single"!==d?r?"additive":"single":d,e.is.number(c.minZoom)&&e.is.number(c.maxZoom)&&c.minZoom<c.maxZoom?(u.minZoom=c.minZoom,u.maxZoom=c.maxZoom):e.is.number(c.minZoom)&&void 0===c.maxZoom?u.minZoom=c.minZoom:e.is.number(c.maxZoom)&&void 0===c.minZoom&&(u.maxZoom=c.maxZoom),u.style=e.is.stylesheet(c.style)?c.style.generateStyle(this):e.is.array(c.style)?e.style.fromJson(this,c.style):e.is.string(c.style)?e.style.fromString(this,c.style):new e.Style(a),a.initRenderer(e.util.extend({hideEdgesOnViewport:c.hideEdgesOnViewport,hideLabelsOnViewport:c.hideLabelsOnViewport,textureOnViewport:c.textureOnViewport},c.renderer)),c.initrender&&(a.on("initrender",c.initrender),a.on("initrender",function(){a._private.initrender=!0})),a.load(c.elements,function(){a.startAnimationLoop(),a._private.ready=!0,e.is.fn(c.ready)&&a.bind("ready",c.ready);for(var t=0;t<l.length;t++){var r=l[t];a.bind("ready",r)}s.readies=[],a.trigger("ready")},c.done)},e.corefn=e.Core.prototype,e.fn.core({ready:function(){return this._private.ready},initrender:function(){return this._private.initrender},registered:function(){return this._private&&null!=this._private.instanceId?!0:!1},registeredId:function(){return this._private.instanceId},getElementById:function(t){var r=this._private.id2index[t];return void 0!==r?this._private.elements[r]:new e.Collection(this)},selectionType:function(){return this._private.selectionType},hasCompoundNodes:function(){return this._private.hasCompoundNodes},addToPool:function(e){for(var t=this._private.elements,r=this._private.id2index,n=0;n<e.length;n++){var i=e[n],a=i._private.data.id,o=r[a],s=void 0!==o;s||(o=t.length,t.push(i),r[a]=o,i._private.index=o)}return this},removeFromPool:function(e){for(var t=this._private.elements,r=this._private.id2index,n=0;n<e.length;n++){var i=e[n],a=i._private.data.id,o=r[a],s=void 0!==o;if(s){delete this._private.id2index[a],t.splice(o,1);for(var l=o;l<t.length;l++){var c=t[l]._private.data.id;r[c]--}}}},container:function(){return this._private.options.container},options:function(){return e.util.copy(this._private.options)},json:function(){var e={},t=this;return e.elements={},t.elements().each(function(t,r){var n=r.group();e.elements[n]||(e.elements[n]=[]),e.elements[n].push(r.json())}),e.style=t.style().json(),e.scratch=t.scratch(),e.zoomingEnabled=t._private.zoomingEnabled,e.userZoomingEnabled=t._private.userZoomingEnabled,e.zoom=t._private.zoom,e.minZoom=t._private.minZoom,e.maxZoom=t._private.maxZoom,e.panningEnabled=t._private.panningEnabled,e.userPanningEnabled=t._private.userPanningEnabled,e.pan=t._private.pan,e.boxSelectionEnabled=t._private.boxSelectionEnabled,e.layout=t._private.options.layout,e.renderer=t._private.options.renderer,e.hideEdgesOnViewport=t._private.options.hideEdgesOnViewport,e.hideLabelsOnViewport=t._private.options.hideLabelsOnViewport,e.textureOnViewport=t._private.options.textureOnViewport,e}})}(cytoscape,"undefined"==typeof window?null:window),function(e,t){"use strict";function r(e){var t=!document||"interactive"!==document.readyState&&"complete"!==document.readyState?r:e;setTimeout(t,9,e)}e.fn.core({add:function(t){var r,n=this;if(e.is.elementOrCollection(t)){var i=t;if(i._private.cy===n)r=i.restore();else{for(var a=[],o=0;o<i.length;o++){var s=i[o];a.push(s.json())}r=new e.Collection(n,a)}}else if(e.is.array(t)){var a=t;r=new e.Collection(n,a)}else if(e.is.plainObject(t)&&(e.is.array(t.nodes)||e.is.array(t.edges))){for(var l=t,a=[],c=["nodes","edges"],o=0,u=c.length;u>o;o++){var d=c[o],p=l[d];if(e.is.array(p))for(var h=0,g=p.length;g>h;h++){var v=p[h],f=e.util.extend({},v,{group:d});a.push(f)}}r=new e.Collection(n,a)}else{var v=t;r=new e.Element(n,v).collection()}return r},remove:function(t){if(e.is.elementOrCollection(t))t=t;else if(e.is.string(t)){var r=t;t=this.$(r)}return t.remove()},load:function(n,i,a){function o(){s.one("layoutready",function(e){s.notifications(!0),s.trigger(e),s.notify({type:"load",collection:s.elements()}),s.one("load",i),s.trigger("load")}).one("layoutstop",function(){s.one("done",a),s.trigger("done")}),s.layout(s._private.options.layout)}var s=this,l=s.elements();return l.length>0&&l.remove(),s.notifications(!1),null!=n&&(e.is.plainObject(n)||e.is.array(n))&&s.add(n),t?r(o):o(),this}})}(cytoscape,"undefined"==typeof window?null:window),function(e,t){"use strict";e.fn.core({addToAnimationPool:function(e){for(var t=this,r=t._private.aniEles,n=[],i=0;i<r.length;i++){var a=r[i]._private.data.id;n[a]=!0}for(var i=0;i<e.length;i++){var o=e[i],a=o._private.data.id;n[a]||r.push(o)}},startAnimationLoop:function(){function r(){function e(){d(function(e){n(e),r()},p)}c?setTimeout(function(){e()},l):e()}function n(t){t=+new Date;for(var r=s._private.aniEles,n=0;n<r.length;n++){var a=r[n],o=a._private.animation.current,l=a._private.animation.queue;if(0===o.length){var c=l,u=c.length>0?c.shift():null;null!=u&&(u.callTime=+new Date,o.push(u))}for(var d=[],p=0;p<o.length;p++){var h=o[p];i(a,h,t),o[p].done&&(d.push(h),o.splice(p,1),p--)}for(var p=0;p<d.length;p++){var h=d[p],g=h.params.complete;e.is.fn(g)&&g.apply(a,[t])}}r.length>0&&s.notify({type:"draw",collection:r});for(var p=0;p<r.length;p++){var a=r[p],l=a._private.animation.queue,o=a._private.animation.current,v=o.length>0||l.length>0;v||(r.splice(p,1),p--)}}function i(t,r,n){var i,l=s._private.style,c=r.properties,u=r.params,d=r.callTime;if(i=0===r.duration?1:Math.min(1,(n-d)/r.duration),0>i?i=0:i>1&&(i=1),null==c.delay){var p=r.startPosition,h=c.position,g=t._private.position;if(h&&(a(p.x,h.x)&&(g.x=o(p.x,h.x,i)),a(p.y,h.y)&&(g.y=o(p.y,h.y,i))),c.css)for(var v=e.style.properties,f=0;f<v.length;f++){var y=v[f].name,m=c.css[y];if(void 0!==m){var b=r.startStyle[y],x=o(b,m,i);l.applyBypass(t,y,x)}}}return e.is.fn(u.step)&&u.step.apply(t,[n]),i>=1&&(r.done=!0),i}function a(t,r){return null==t||null==r?!1:e.is.number(t)&&e.is.number(r)?!0:t&&r?!0:!1}function o(t,r,n){if(0>n?n=0:n>1&&(n=1),e.is.number(t)&&e.is.number(r))return t+(r-t)*n;if(e.is.number(t[0])&&e.is.number(r[0])){var i=t,a=r,o=function(e,t){var r=t-e,i=e;return Math.round(n*r+i)},s=o(i[0],a[0]),l=o(i[1],a[1]),c=o(i[2],a[2]);return"rgb("+s+", "+l+", "+c+")"}return void 0}var s=this,l=1e3/60,c=!1,u=!0;if(t){s._private.aniEles=[];var d=e.util.requestAnimationFrame;null!=d&&u||(d=function(e){t.setTimeout(function(){e(+new Date)},l)});var p=s.container();r()}}})}(cytoscape,"undefined"==typeof window?null:window),function(e){"use strict";e.fn.core({data:e.define.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0}),removeData:e.define.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0}),batchData:e.define.batchData({field:"data",event:"data",triggerFnName:"trigger",immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:e.define.data({field:"scratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeScratch:e.define.removeData({field:"scratch",triggerEvent:!1})})}(cytoscape),function(e){"use strict";e.fn.core({on:e.define.on(),one:e.define.on({unbindSelfOnTrigger:!0}),once:e.define.on({unbindAllBindersOnTrigger:!0}),off:e.define.off(),trigger:e.define.trigger()}),e.corefn.bind=e.corefn.on,e.corefn.unbind=e.corefn.off}(cytoscape),function(e){"use strict";e.fn.core({png:function(e){var t=this._private.renderer;return e=e||{},t.png(e)}})}(cytoscape),function(e){"use strict";e.fn.core({layout:function(e){var t=this;return this._private.layoutRunning?this:(null==e&&(e=this._private.options.layout),this.initLayout(e),t.trigger("layoutstart"),this._private.layoutRunning=!0,this.one("layoutstop",function(){t._private.layoutRunning=!1}),this._private.layout.run(),this)},initLayout:function(t){if(null==t)return void e.util.error("Layout options must be specified to run a layout");if(null==t.name)return void e.util.error("A `name` must be specified to run a layout");var r=t.name,n=e.extension("layout",r);return null==n?void e.util.error("Can not apply layout: No such layout `%s` found; did you include its JS file?",r):(this._private.layout=new n(e.util.extend({},t,{renderer:this._private.renderer,cy:this})),void(this._private.options.layout=t))}})}(cytoscape),function(e){"use strict";e.fn.core({notify:function(t){if(this._private.notificationsEnabled){var r=this.renderer(),n=this;if(e.is.element(t.collection)){var i=t.collection;t.collection=new e.Collection(n,[i])}else if(e.is.array(t.collection)){var a=t.collection;t.collection=new e.Collection(n,a)}r.notify(t)}},notifications:function(e){var t=this._private;return void 0===e?t.notificationsEnabled:void(t.notificationsEnabled=e?!0:!1)},noNotifications:function(e){this.notifications(!1),e(),this.notifications(!0)}})}(cytoscape),function(e){"use strict";e.fn.core({renderTo:function(e,t,r,n){var i=this._private.renderer;return i.renderTo(e,t,r,n),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify({type:"draw"}),this},resize:function(){return this.notify({type:"resize"}),this},initRenderer:function(t){var r=this,n=e.extension("renderer",t.name);return null==n?void e.util.error("Can not initialise: No such renderer `%s` found; did you include its JS file?",t.name):void(this._private.renderer=new n(e.util.extend({},t,{cy:r,style:r._private.style})))},recalculateRenderedStyle:function(){var e=this.renderer();e.recalculateRenderedStyle&&e.recalculateRenderedStyle()}})}(cytoscape),function(e){"use strict";e.fn.core({collection:function(t){return e.is.string(t)?this.$(t):e.is.elementOrCollection(t)?t.collection():new e.Collection(this)},nodes:function(e){var t=this.$("node");return e?t.filter(e):t},edges:function(e){var t=this.$("edge");return e?t.filter(e):t},$:function(t){var r=new e.Collection(this,this._private.elements);return t?r.filter(t):r}}),e.corefn.elements=e.corefn.filter=e.corefn.$}(cytoscape),function(e){"use strict";e.fn.core({style:function(){return this._private.style}})}(cytoscape),function(e){"use strict";e.fn.core({autolockNodes:function(e){return void 0===e?this._private.autolockNodes:(this._private.autolockNodes=e?!0:!1,this)},autoungrabifyNodes:function(e){return void 0===e?this._private.autoungrabifyNodes:(this._private.autoungrabifyNodes=e?!0:!1,this)},panningEnabled:function(e){return void 0===e?this._private.panningEnabled:(this._private.panningEnabled=e?!0:!1,this)},userPanningEnabled:function(e){return void 0===e?this._private.userPanningEnabled:(this._private.userPanningEnabled=e?!0:!1,this)},zoomingEnabled:function(e){return void 0===e?this._private.zoomingEnabled:(this._private.zoomingEnabled=e?!0:!1,this)},userZoomingEnabled:function(e){return void 0===e?this._private.userZoomingEnabled:(this._private.userZoomingEnabled=e?!0:!1,this)},boxSelectionEnabled:function(e){return void 0===e?this._private.boxSelectionEnabled:(this._private.boxSelectionEnabled=e?!0:!1,this)},pan:function(){var t,r,n,i,a,o=arguments,s=this._private.pan;switch(o.length){case 0:return s;case 1:if(!this._private.panningEnabled)return this;if(e.is.string(o[0]))return t=o[0],s[t];e.is.plainObject(o[0])&&(n=o[0],i=n.x,a=n.y,e.is.number(i)&&(s.x=i),e.is.number(a)&&(s.y=a),this.trigger("pan"));break;case 2:if(!this._private.panningEnabled)return this;t=o[0],r=o[1],"x"!==t&&"y"!==t||!e.is.number(r)||(s[t]=r),this.trigger("pan")}return this.notify({type:"viewport"}),this},panBy:function(){var t,r,n,i,a,o=arguments,s=this._private.pan;if(!this._private.panningEnabled)return this;switch(o.length){case 1:e.is.plainObject(o[0])&&(n=o[0],i=n.x,a=n.y,e.is.number(i)&&(s.x+=i),e.is.number(a)&&(s.y+=a),this.trigger("pan"));break;case 2:t=o[0],r=o[1],"x"!==t&&"y"!==t||!e.is.number(r)||(s[t]+=r),this.trigger("pan")}return this.notify({type:"viewport"}),this},fit:function(t,r){if(e.is.number(t)&&void 0===r&&(r=t,t=void 0),!this._private.panningEnabled||!this._private.zoomingEnabled)return this;if(e.is.string(t)){var n=t;t=this.$(n)}else e.is.elementOrCollection(t)||(t=this.elements());var i,a=t.boundingBox(),o=this.style(),s=parseFloat(o.containerCss("width")),l=parseFloat(o.containerCss("height"));return r=e.is.number(r)?r:0,!isNaN(s)&&!isNaN(l)&&t.length>0&&(i=this._private.zoom=Math.min((s-2*r)/a.w,(l-2*r)/a.h),i=i>this._private.maxZoom?this._private.maxZoom:i,i=i<this._private.minZoom?this._private.minZoom:i,this._private.pan={x:(s-i*(a.x1+a.x2))/2,y:(l-i*(a.y1+a.y2))/2},this.trigger("pan zoom"),this.notify({type:"viewport"})),this},minZoom:function(t){return void 0===t?this._private.minZoom:(e.is.number(t)&&(this._private.minZoom=t),this)},maxZoom:function(t){return void 0===t?this._private.maxZoom:(e.is.number(t)&&(this._private.maxZoom=t),this)},zoom:function(t){var r,n;if(void 0===t)return this._private.zoom;if(e.is.number(t))n=t;else if(e.is.plainObject(t)){if(n=t.level,t.position){var i=t.position,a=this._private.pan,o=this._private.zoom;r={x:i.x*o+a.x,y:i.y*o+a.y}}else t.renderedPosition&&(r=t.renderedPosition);if(r&&!this._private.panningEnabled)return this}if(!this._private.zoomingEnabled)return this;if(!e.is.number(n)||r&&(!e.is.number(r.x)||!e.is.number(r.y)))return this;if(n=n>this._private.maxZoom?this._private.maxZoom:n,n=n<this._private.minZoom?this._private.minZoom:n,r){var s=this._private.pan,l=this._private.zoom,c=n,u={x:-c/l*(r.x-s.x)+r.x,y:-c/l*(r.y-s.y)+r.y};this._private.zoom=n,this._private.pan=u;var d=s.x!==u.x||s.y!==u.y;this.trigger("zoom"+(d?" pan":""))}else this._private.zoom=n,this.trigger("zoom");return this.notify({type:"viewport"}),this},viewport:function(t){var r=this._private,n=!0,i=!0,a=[],o=!1,s=!1;if(!t)return this;if(e.is.number(t.zoom)||(n=!1),e.is.plainObject(t.pan)||(i=!1),!n&&!i)return this;if(n){var l=t.zoom;l<r.minZoom||l>r.maxZoom||!r.zoomingEnabled?o=!0:(r.zoom=l,a.push("zoom"))}if(i&&!o&&r.panningEnabled){var c=t.pan;e.is.number(c.x)&&(r.pan.x=c.x,s=!1),e.is.number(c.y)&&(r.pan.y=c.y,s=!1),s||a.push("pan")}return a.length>0&&this.trigger(a.join(" ")),this.notify({type:"viewport"}),this},boundingBox:function(e){var t=this.$(e);return t.boundingBox()},renderedBoundingBox:function(e){var t=this.$(e);return t.renderedBoundingBox()},center:function(t){if(!this._private.panningEnabled||!this._private.zoomingEnabled)return this;if(e.is.string(t)){var r=t;t=this.elements(r)}else e.is.elementOrCollection(t)||(t=this.elements());var n=t.boundingBox(),i=this.style(),a=parseFloat(i.containerCss("width")),o=parseFloat(i.containerCss("height")),s=this._private.zoom;return this.pan({x:(a-s*(n.x1+n.x2))/2,y:(o-s*(n.y1+n.y2))/2}),this.trigger("pan"),this.notify({type:"viewport"}),this},reset:function(){return this._private.panningEnabled&&this._private.zoomingEnabled?(this.pan({x:0,y:0}),this._private.maxZoom>1&&this._private.minZoom<1&&this.zoom(1),this.notify({type:"viewport"}),this):this}})}(cytoscape),function(e){"use strict";e.fn.collection=e.fn.eles=function(t){for(var r in t){var n=t[r];e.Collection.prototype[r]=n}};var t={prefix:{nodes:"n",edges:"e"},id:{nodes:0,edges:0},generate:function(t,r,n){var i=e.is.element(r)?r._private:r,a=i.group,o=null!=n?n:this.prefix[a]+this.id[a];if(t.getElementById(o).empty())this.id[a]++;else for(;!t.getElementById(o).empty();)o=this.prefix[a]+ ++this.id[a];return o}};e.Element=function(t,r,n){if(!(this instanceof e.Element))return new e.Element(t,r,n);var i=this;if(n=void 0===n||n?!0:!1,void 0===t||void 0===r||!e.is.core(t))return void e.util.error("An element must have a core reference and parameters set");if("nodes"!==r.group&&"edges"!==r.group)return void e.util.error("An element must be of type `nodes` or `edges`; you specified `"+r.group+"`");if(this.length=1,this[0]=this,this._private={cy:t,single:!0,data:r.data||{},layoutData:{},position:r.position||{},autoWidth:void 0,autoHeight:void 0,listeners:[],group:r.group,style:{},rstyle:{},styleCxts:[],removed:!0,selected:r.selected?!0:!1,selectable:void 0===r.selectable?!0:r.selectable?!0:!1,locked:r.locked?!0:!1,grabbed:!1,grabbable:void 0===r.grabbable?!0:r.grabbable?!0:!1,active:!1,classes:{},animation:{current:[],queue:[]},rscratch:{},scratch:{},edges:[],children:[]},r.renderedPosition){var a=r.renderedPosition,o=t.pan(),s=t.zoom();this._private.position={x:(a.x-o.x)/s,y:(a.y-o.y)/s}}if(e.is.string(r.classes))for(var l=r.classes.split(/\s+/),c=0,u=l.length;u>c;c++){var d=l[c];d&&""!==d&&(i._private.classes[d]=!0)}r.css&&t.style().applyBypass(this,r.css),(void 0===n||n)&&this.restore()},e.Collection=function(r,n){if(!(this instanceof e.Collection))return new e.Collection(r,n);if(void 0===r||!e.is.core(r))return void e.util.error("A collection must have a reference to the core");var i={},a=!1;if(n){if(n.length>0&&e.is.plainObject(n[0])&&!e.is.element(n[0])){a=!0;for(var o=[],s={},l=0,c=n.length;c>l;l++){var u=n[l];null==u.data&&(u.data={});var d=u.data;if(null==d.id)d.id=t.generate(r,u);else if(0!==r.getElementById(d.id).length||s[d.id])continue;var p=new e.Element(r,u,!1);o.push(p),s[d.id]=!0}n=o}}else n=[];this.length=0;for(var l=0,c=n.length;c>l;l++){var h=n[l];if(h){var g=h._private.data.id;i[g]||(i[g]=h,this[this.length]=h,this.length++)}}this._private={cy:r,ids:i},a&&this.restore()},e.elefn=e.elesfn=e.Element.prototype=e.Collection.prototype,e.elesfn.cy=function(){return this._private.cy},e.elesfn.element=function(){return this[0]},e.elesfn.collection=function(){return e.is.collection(this)?this:new e.Collection(this._private.cy,[this])},e.elesfn.json=function(){var t=this.element();if(null==t)return void 0;var r=t._private,n=e.util.copy({data:r.data,position:r.position,group:r.group,bypass:r.bypass,removed:r.removed,selected:r.selected,selectable:r.selectable,locked:r.locked,grabbed:r.grabbed,grabbable:r.grabbable,classes:""}),i=[];for(var a in r.classes)i.push(a);for(var o=0;o<i.length;o++){var a=i[o];n.classes+=a+(o<i.length-1?" ":"")}return n},e.elesfn.jsons=function(){for(var e=[],t=0;t<this.length;t++){var r=this[t],n=r.json();e.push(n)}return e},e.elesfn.restore=function(r){var n=this,i=[],a=n.cy();void 0===r&&(r=!0);for(var o=[],s=[],l=[],c=0,u=0,d=0,p=n.length;p>d;d++){var h=n[d];h.isNode()?(s.push(h),c++):(l.push(h),u++)}o=s.concat(l);for(var d=0,p=o.length;p>d;d++){var h=o[d];if(h.removed()){var g=h._private,v=g.data;if(void 0===v.id)v.id=t.generate(a,h);else{if(e.is.emptyString(v.id)||!e.is.string(v.id)){e.util.error("Can not create element with invalid string ID `"+v.id+"`");continue}if(0!==a.getElementById(v.id).length){e.util.error("Can not create second element with ID `"+v.id+"`");continue}}var f=v.id;if(h.isEdge()){for(var y=h,m=["source","target"],b=m.length,x=!1,w=0;b>w;w++){var _=m[w],E=v[_];null==E||""===E?(e.util.error("Can not create edge `"+f+"` with unspecified "+_),x=!0):a.getElementById(E).empty()&&(e.util.error("Can not create edge `"+f+"` with nonexistant "+_+" `"+E+"`"),x=!0)}if(x)continue;var S=a.getElementById(v.source),P=a.getElementById(v.target);S._private.edges.push(y),P._private.edges.push(y),y._private.source=S,y._private.target=P}g.ids={},g.ids[f]=h,g.removed=!1,a.addToPool(h),i.push(h)}}for(var d=0;c>d;d++){var k=o[d],v=k._private.data,C=k._private.data.parent,D=null!=C;if(D){var N=a.getElementById(C);if(N.empty())delete v.parent;else{for(var T=!1,M=N;!M.empty();){if(k.same(M)){T=!0,delete v.parent;break}M=M.parent()}T||(N[0]._private.children.push(k),a._private.hasCompoundNodes=!0)}}}if(i=new e.Collection(a,i),i.length>0){var I=i.add(i.connectedNodes()).add(i.parent());I.updateStyle(r),r?i.rtrigger("add"):i.trigger("add")}return n},e.elesfn.removed=function(){var e=this[0];return e&&e._private.removed},e.elesfn.inside=function(){var e=this[0];return e&&!e._private.removed},e.elesfn.remove=function(t){function r(e){for(var t=e._private.edges,r=0;r<t.length;r++)i(t[r])}function n(e){for(var t=e._private.children,r=0;r<t.length;r++)i(t[r])}function i(e){var t=u[e.id()];t||(u[e.id()]=!0,e.isNode()?(c.push(e),r(e),n(e)):c.unshift(e))}function a(e,t){for(var r=e._private.edges,n=0;n<r.length;n++){var i=r[n];if(t===i){r.splice(n,1);break}}}function o(e,t){t=t[0],e=e[0];for(var r=e._private.children,n=0;n<r.length;n++)if(r[n][0]===t[0]){r.splice(n,1);break}}var s=this,l=[],c=[],u={},d=s._private.cy;void 0===t&&(t=!0);for(var p=0,h=s.length;h>p;p++){var g=s[p];i(g)}for(var p=0;p<c.length;p++){var g=c[p];if(g._private.removed=!0,d.removeFromPool(g),l.push(g),g.isEdge()){var v=g.source()[0],f=g.target()[0];a(v,g),a(f,g)}else{var y=g.parent();0!==y.length&&o(y,g)}}var m=d._private.elements;d._private.hasCompoundNodes=!1;for(var p=0;p<m.length;p++){var g=m[p];if(g.isParent()){d._private.hasCompoundNodes=!0;break}}var b=new e.Collection(this.cy(),l);b.size()>0&&(t&&this.cy().notify({type:"remove",collection:b}),b.trigger("remove"));for(var x={},p=0;p<c.length;p++){var g=c[p],w="nodes"===g._private.group,_=g._private.data.parent;if(w&&void 0!==_&&!x[_]){x[_]=!0;var y=d.getElementById(_);y&&0!==y.length&&!y._private.removed&&0===y.children().length&&y.updateStyle()}}return this}}(cytoscape),function(e){"use strict";e.fn.eles({breadthFirstSearch:function(t,r,n){n=2!==arguments.length||e.is.fn(r)?n:r,r=e.is.fn(r)?r:function(){};for(var i,a=this._private.cy,o=e.is.string(t)?this.filter(t):t,s=[],l=[],c={},u={},d={},p=0,h=this.nodes(),g=this.edges(),v=0;v<o.length;v++)o[v].isNode()&&(s.unshift(o[v]),d[o[v].id()]=!0,l.push(o[v]),u[o[v].id()]=0);for(;0!==s.length;){var o=s.shift(),f=u[o.id()],y=r.call(o,p++,f);if(y===!0){i=o;break}if(y===!1)break;for(var m=o.connectedEdges(n?function(){return this.data("source")===o.id()}:void 0).intersect(g),v=0;v<m.length;v++){var b=m[v],x=b.connectedNodes(function(){return this.id()!==o.id()}).intersect(h);0===x.length||d[x.id()]||(x=x[0],s.push(x),d[x.id()]=!0,u[x.id()]=u[o.id()]+1,l.push(x),c[x.id()]=b)}}for(var w=[],v=0;v<l.length;v++){var _=l[v],E=c[_.id()];E&&w.push(E),w.push(_)}return{path:new e.Collection(a,w),found:new e.Collection(a,i)}},depthFirstSearch:function(t,r,n){n=2!==arguments.length||e.is.fn(r)?n:r,r=e.is.fn(r)?r:function(){};for(var i,a=this._private.cy,o=e.is.string(t)?this.filter(t):t,s=[],l=[],c={},u={},d={},p=0,h=this.edges(),g=this.nodes(),v=0;v<o.length;v++)o[v].isNode()&&(s.push(o[v]),l.push(o[v]),u[o[v].id()]=0);for(;0!==s.length;){var o=s.pop();if(!d[o.id()]){d[o.id()]=!0;var f=u[o.id()],y=r.call(o,p++,f);if(y===!0){i=o;break}if(y===!1)break;for(var m=o.connectedEdges(n?function(){return this.data("source")===o.id()}:void 0).intersect(h),v=0;v<m.length;v++){var b=m[v],x=b.connectedNodes(function(){return this.id()!==o.id()}).intersect(g);0===x.length||d[x.id()]||(x=x[0],s.push(x),u[x.id()]=u[o.id()]+1,l.push(x),c[x.id()]=b)}}}for(var w=[],v=0;v<l.length;v++){var _=l[v],E=c[_.id()];E&&w.push(E),w.push(_)}return{path:new e.Collection(a,w),found:new e.Collection(a,i)}},kruskal:function(t){function r(e){for(var t=0;t<i.length;t++){var r=i[t];if(r.anySame(e))return{eles:r,index:t}}}t=e.is.fn(t)?t:function(){return 1};for(var n=new e.Collection(this._private.cy,[]),i=[],a=this.nodes(),o=0;o<a.length;o++)i.push(a[o].collection());for(var s=this.edges(),l=s.toArray().sort(function(e,r){var n=t.call(e),i=t.call(r);return n-i}),o=0;o<l.length;o++){var c=l[o],u=c.source()[0],d=c.target()[0],p=r(u),h=r(d);p.index!==h.index&&(n=n.add(c),i[p.index]=p.eles.add(h.eles),i.splice(h.index,1))}return a.add(n)},dijkstra:function(t,r,n){var i=this._private.cy;n=e.is.fn(r)?n:r,r=e.is.fn(r)?r:function(){return 1};for(var a=e.is.string(t)?this.filter(t).eq(0):t.eq(0),o={},s={},l={},c=this.edges().filter(function(){return!this.isLoop()}),u=this.nodes(),d=[],p=0;p<u.length;p++)o[u[p].id()]=u[p].same(a)?0:1/0,d.push(u[p]);var h=function(e){return o[e.id()]};d=new e.Collection(i,d);for(var g=e.Minheap(i,d,h),v=function(e,t){for(var i,a=(n?e.edgesTo(t):e.edgesWith(t)).intersect(c),o=1/0,s=0;s<a.length;s++){var l=a[s],u=r.call(l);(o>u||!i)&&(o=u,i=l)}return{edge:i,dist:o}};g.size()>0;){var f=g.pop(),y=f.value,m=f.id,b=i.getElementById(m);if(l[m]=y,y===Math.Infinite)break;for(var x=b.neighborhood().intersect(u),p=0;p<x.length;p++){var w=x[p],_=w.id(),E=v(b,w),S=y+E.dist;S<g.getValueById(_)&&(g.edit(_,S),s[_]={node:b,edge:E.edge})}}return{distanceTo:function(t){var r=e.is.string(t)?u.filter(t).eq(0):t.eq(0);return l[r.id()]},pathTo:function(t){var r=e.is.string(t)?u.filter(t).eq(0):t.eq(0),n=[],a=r;if(r.length>0)for(n.unshift(r);s[a.id()];){var o=s[a.id()];n.unshift(o.edge),n.unshift(o.node),a=o.node}return new e.Collection(i,n)}}}}),e.elesfn.bfs=e.elesfn.breadthFirstSearch,e.elesfn.dfs=e.elesfn.depthFirstSearch}(cytoscape),function(e){"use strict";e.fn.eles({animated:function(){var e=this[0];return e?e._private.animation.current.length>0:void 0},clearQueue:function(){for(var e=0;e<this.length;e++){var t=this[e];t._private.animation.queue=[]}return this},delay:function(e,t){return this.animate({delay:e},{duration:e,complete:t}),this},animate:function(e,t){var r,n=+new Date,i=this._private.cy,a=i.style();switch(void 0===t&&(t={}),void 0===t.duration&&(t.duration=400),t.duration){case"slow":t.duration=600;break;case"fast":t.duration=200}if(null==e||null==e.position&&null==e.renderedPosition&&null==e.css&&null==e.delay)return this;if(e.css&&(e.css=a.getValueStyle(e.css)),e.renderedPosition){var o=e.renderedPosition,s=i.pan(),l=i.zoom();e.position={x:(o.x-s.x)/l,y:(o.y-s.y)/l}}for(var c=0;c<this.length;c++){var u=this[c],d=u._private.position,p={x:d.x,y:d.y},h=a.getValueStyle(u);r=u.animated()&&(void 0===t.queue||t.queue)?u._private.animation.queue:u._private.animation.current,r.push({properties:e,duration:t.duration,params:t,callTime:n,startPosition:p,startStyle:h})}return i.addToAnimationPool(this),this},stop:function(e,t){for(var r=0;r<this.length;r++){for(var n=this[r],i=n._private.animation.current,a=0;a<i.length;a++){var o=i[a];t&&(o.duration=0)}e&&(n._private.animation.queue=[]),t||(n._private.animation.current=[])}return this.cy().notify({collection:this,type:"draw"}),this}})}(cytoscape),function(e){"use strict";e.fn.eles({addClass:function(t){t=t.split(/\s+/);for(var r=this,n=[],i=0;i<t.length;i++){var a=t[i];if(!e.is.emptyString(a))for(var o=0;o<r.length;o++){var s=r[o],l=s._private.classes[a];s._private.classes[a]=!0,l||n.push(s)}}return n.length>0&&new e.Collection(this._private.cy,n).updateStyle(),r.trigger("class"),r},hasClass:function(e){var t=this[0];return null!=t&&t._private.classes[e]?!0:!1},toggleClass:function(t,r){for(var n=t.split(/\s+/),i=this,a=[],o=0,s=i.length;s>o;o++)for(var l=i[o],c=0;c<n.length;c++){var u=n[c];if(!e.is.emptyString(u)){var d=l._private.classes[u],p=r||void 0===r&&!d;p?(l._private.classes[u]=!0,d||a.push(l)):(l._private.classes[u]=!1,d&&a.push(l))}}return a.length>0&&new e.Collection(this._private.cy,a).updateStyle(),i.trigger("class"),i},removeClass:function(t){t=t.split(/\s+/);for(var r=this,n=[],i=0;i<r.length;i++)for(var a=r[i],o=0;o<t.length;o++){var s=t[o];if(s&&""!==s){var l=a._private.classes[s];delete a._private.classes[s],l&&n.push(a)}}return n.length>0&&new e.Collection(r._private.cy,n).updateStyle(),r.trigger("class"),r}})}(cytoscape),function(e){"use strict";e.fn.eles({allAre:function(e){return this.filter(e).length===this.length},is:function(e){return this.filter(e).length>0},same:function(e){return e=this.cy().collection(e),this.length!==e.length?!1:this.intersect(e).length===this.length},anySame:function(e){return e=this.cy().collection(e),this.intersect(e).length>0},allAreNeighbors:function(e){return e=this.cy().collection(e),this.neighborhood().intersect(e).length===e.length}})}(cytoscape),function(e){"use strict";e.fn.eles({parent:function(t){for(var r=[],n=this._private.cy,i=0;i<this.length;i++){var a=this[i],o=n.getElementById(a._private.data.parent);o.size()>0&&r.push(o)}return new e.Collection(n,r).filter(t)},parents:function(t){for(var r=[],n=this.parent();n.nonempty();){for(var i=0;i<n.length;i++){var a=n[i];r.push(a)}n=n.parent()}return new e.Collection(this.cy(),r).filter(t)},children:function(t){for(var r=[],n=0;n<this.length;n++){var i=this[n];r=r.concat(i._private.children)}return new e.Collection(this.cy(),r).filter(t)},siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];return e?0!==e._private.children.length:void 0},isChild:function(){var e=this[0];return e?void 0!==e._private.data.parent&&0!==e.parent().length:void 0},descendants:function(t){function r(e){for(var t=0;t<e.length;t++){var i=e[t];n.push(i),i.children().nonempty()&&r(i.children())}}var n=[];return r(this.children()),new e.Collection(this.cy(),n).filter(t)}}),e.elesfn.ancestors=e.elesfn.parents}(cytoscape),function(e){"use strict";var t=1,r=0;e.fn.eles({data:e.define.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:e.define.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),batchData:e.define.batchData({field:"data",event:"data",triggerFnName:"trigger",immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:e.define.data({field:"scratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeScratch:e.define.removeData({field:"scratch",triggerEvent:!1}),rscratch:e.define.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:e.define.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var e=this[0];
return e?e._private.data.id:void 0},position:e.define.data({field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"rtrigger",allowGetting:!0,validKeys:["x","y"],onSet:function(e){var t=e.updateCompoundBounds();t.rtrigger("position")},canSet:function(e){return!e.locked()}}),silentPosition:e.define.data({field:"position",bindingEvent:"position",allowBinding:!1,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!1,triggerFnName:"trigger",allowGetting:!0,validKeys:["x","y"],onSet:function(e){e.updateCompoundBounds()},canSet:function(e){return!e.locked()}}),positions:function(t,r){if(e.is.plainObject(t))this.position(t);else if(e.is.fn(t)){for(var n=t,i=0;i<this.length;i++){var a=this[i],t=n.apply(a,[i,a]);if(t&&!a.locked()){var o=a._private.position;o.x=t.x,o.y=t.y}}var s=this.updateCompoundBounds(),l=this.add(s);r?l.trigger("position"):l.rtrigger("position")}return this},updateCompoundBounds:function(){function t(e){var t=e.children(),r=e._private.style,i=t.boundingBox({includeLabels:!1,includeEdges:!1}),a={top:r["padding-top"].pxValue,bottom:r["padding-bottom"].pxValue,left:r["padding-left"].pxValue,right:r["padding-right"].pxValue},o=e._private.position,s=!1;"auto"===r.width.value&&(e._private.autoWidth=i.w+a.left+a.right,o.x=(i.x1+i.x2-a.left+a.right)/2,s=!0),"auto"===r.height.value&&(e._private.autoHeight=i.h+a.top+a.bottom,o.y=(i.y1+i.y2-a.top+a.bottom)/2,s=!0),s&&n.push(e)}var r=this.cy();if(!r.hasCompoundNodes())return r.collection();for(var n=[],i=this.parent();i.nonempty();){for(var a=0;a<i.length;a++){var o=i[a];t(o)}i=i.parent()}return new e.Collection(r,n)},renderedPosition:function(t,r){var n=this[0],i=this.cy(),a=i.zoom(),o=i.pan(),s=e.is.plainObject(t)?t:void 0,l=void 0!==s||void 0!==r&&e.is.string(t);if(n&&n.isNode()){if(!l){var c=n._private.position;return s={x:c.x*a+o.x,y:c.y*a+o.y},void 0===t?s:s[t]}for(var u=0;u<this.length;u++){var n=this[u];void 0!==r?n._private.position[t]=(r-o[t])/a:void 0!==s&&(n._private.position={x:(s.x-o.x)/a,y:(s.y-o.y)/a})}this.rtrigger("position")}else if(!l)return void 0;return this},width:function(){var e=this[0];if(e){var t=e._private.style.width;return"auto"===t.strValue?e._private.autoWidth:t.pxValue}},outerWidth:function(){var e=this[0];if(e){var n=e._private.style,i="auto"===n.width.strValue?e._private.autoWidth:n.width.pxValue,a=n["border-width"]?n["border-width"].pxValue*t+r:0;return i+a}},renderedWidth:function(){var e=this[0];if(e){var t=e.width();return t*this.cy().zoom()}},renderedOuterWidth:function(){var e=this[0];if(e){var t=e.outerWidth();return t*this.cy().zoom()}},height:function(){var e=this[0];if(e&&e.isNode()){var t=e._private.style.height;return"auto"===t.strValue?e._private.autoHeight:t.pxValue}},outerHeight:function(){var e=this[0];if(e){var n=e._private.style,i="auto"===n.height.strValue?e._private.autoHeight:n.height.pxValue,a=n["border-width"]?n["border-width"].pxValue*t+r:0;return i+a}},renderedHeight:function(){var e=this[0];if(e){var t=e.height();return t*this.cy().zoom()}},renderedOuterHeight:function(){var e=this[0];if(e){var t=e.outerHeight();return t*this.cy().zoom()}},renderedBoundingBox:function(e){var t=this.boundingBox(e),r=this.cy(),n=r.zoom(),i=r.pan(),a=t.x1*n+i.x,o=t.x2*n+i.x,s=t.y1*n+i.y,l=t.y2*n+i.y;return{x1:a,x2:o,y1:s,y2:l,w:o-a,h:l-s}},boundingBox:function(t){var r=this;t=e.util.extend({includeNodes:!0,includeEdges:!0,includeLabels:!0},t),this.cy().recalculateRenderedStyle();for(var n=1/0,i=-1/0,a=1/0,o=-1/0,s=0;s<r.length;s++){var l,c,u,d,p,h,g=r[s],v=!1;if("none"!==g.css("display")){if(g.isNode()&&t.includeNodes){v=!0;var f=g._private.position;p=f.x,h=f.y;var y=g.outerWidth(),m=y/2,b=g.outerHeight(),x=b/2;l=p-m,c=p+m,u=h-x,d=h+x,n=n>l?l:n,i=c>i?c:i,a=a>u?u:a,o=d>o?d:o}else if(g.isEdge()&&t.includeEdges){v=!0;var w=g.source()[0]._private.position,_=g.target()[0]._private.position,E=g._private.rstyle||{};if(l=w.x,c=_.x,u=w.y,d=_.y,l>c){var S=l;l=c,c=S}if(u>d){var S=u;u=d,d=S}n=n>l?l:n,i=c>i?c:i,a=a>u?u:a,o=d>o?d:o;for(var P=E.bezierPts||[],y=g._private.style.width.pxValue,k=0;k<P.length;k++){var C=P[k];n=C.x-y<n?C.x-y:n,i=C.x+y>i?C.x+y:i,a=C.y-y<a?C.y-y:a,o=C.y+y>o?C.y+y:o}}var D=g._private.style,E=g._private.rstyle,N=D.content.strValue,T=D["font-size"],M=D["text-halign"],I=D["text-valign"],z=E.labelWidth,B=E.labelHeight,R=E.labelX,X=E.labelY;if(v&&t.includeLabels&&N&&T&&null!=B&&null!=z&&null!=R&&null!=X&&M&&I){var L,O,Y,V,A=B,F=z;if(g.isEdge())L=R-F/2,O=R+F/2,Y=X-A/2,V=X+A/2;else{switch(M.value){case"left":L=R-F,O=R;break;case"center":L=R-F/2,O=R+F/2;break;case"right":L=R,O=R+F}switch(I.value){case"top":Y=X-A,V=X;break;case"center":Y=X-A/2,V=X+A/2;break;case"bottom":Y=X,V=X+A}}n=n>L?L:n,i=O>i?O:i,a=a>Y?Y:a,o=V>o?V:o}}}return{x1:n,x2:i,y1:a,y2:o,w:i-n,h:o-a}}})}(cytoscape),function(e){"use strict";function t(e){return function(t){var r=this;if(void 0===t&&(t=!0),0!==r.length&&r.isNode()&&!r.removed()){for(var n=0,i=r[0],a=i._private.edges,o=0;o<a.length;o++){var s=a[o];(t||!s.isLoop())&&(n+=e(i,s))}return n}}}function r(e,t){return function(r){for(var n,i=this.nodes(),a=0;a<i.length;a++){var o=i[a],s=o[e](r);void 0===s||void 0!==n&&!t(s,n)||(n=s)}return n}}e.fn.eles({degree:t(function(e,t){return t.source().same(t.target())?2:1}),indegree:t(function(e,t){return t.target().same(e)?1:0}),outdegree:t(function(e,t){return t.source().same(e)?1:0})}),e.fn.eles({minDegree:r("degree",function(e,t){return t>e}),maxDegree:r("degree",function(e,t){return e>t}),minIndegree:r("indegree",function(e,t){return t>e}),maxIndegree:r("indegree",function(e,t){return e>t}),minOutdegree:r("outdegree",function(e,t){return t>e}),maxOutdegree:r("outdegree",function(e,t){return e>t})}),e.fn.eles({totalDegree:function(e){for(var t=0,r=this.nodes(),n=0;n<r.length;n++)t+=r[n].degree(e);return t}})}(cytoscape),function(e){"use strict";e.fn.eles({on:e.define.on(),one:e.define.on({unbindSelfOnTrigger:!0}),once:e.define.on({unbindAllBindersOnTrigger:!0}),off:e.define.off(),trigger:e.define.trigger(),rtrigger:function(e,t){return 0!==this.length?(this.cy().notify({type:e,collection:this.filter(function(){return!this.removed()})}),this.trigger(e,t),this):void 0}}),e.elesfn.bind=e.elesfn.on,e.elesfn.unbind=e.elesfn.off}(cytoscape),function(e){"use strict";e.fn.eles({nodes:function(e){return this.filter(function(e,t){return t.isNode()}).filter(e)},edges:function(e){return this.filter(function(e,t){return t.isEdge()}).filter(e)},filter:function(t){var r=this._private.cy;if(e.is.fn(t)){for(var n=[],i=0;i<this.length;i++){var a=this[i];t.apply(a,[i,a])&&n.push(a)}return new e.Collection(r,n)}return e.is.string(t)||e.is.elementOrCollection(t)?new e.Selector(t).filter(this):void 0===t?this:new e.Collection(r)},not:function(t){var r=this._private.cy;if(t){e.is.string(t)&&(t=this.filter(t));for(var n=[],i=0;i<this.length;i++){var a=this[i],o=t._private.ids[a.id()];o||n.push(a)}return new e.Collection(r,n)}return this},intersect:function(t){var r=this._private.cy;if(e.is.string(t)){var n=t;return this.filter(n)}var i=[],a=this,o=t,s=this.length<t.length,l=s?a._private.ids:o._private.ids,c=s?o._private.ids:a._private.ids;for(var u in l){var d=c[u];d&&i.push(d)}return new e.Collection(r,i)},add:function(t){var r=this._private.cy;if(!t)return this;if(e.is.string(t)){var n=t;t=r.elements(n)}for(var i=[],a=0;a<this.length;a++)i.push(this[a]);for(var a=0;a<t.length;a++){var o=!this._private.ids[t[a].id()];o&&i.push(t[a])}return new e.Collection(r,i)}})}(cytoscape),function(e){"use strict";e.fn.eles({isNode:function(){return"nodes"===this.group()},isEdge:function(){return"edges"===this.group()},isLoop:function(){return this.isEdge()&&this.source().id()===this.target().id()},group:function(){var e=this[0];return e?e._private.group:void 0}})}(cytoscape),function(e){"use strict";e.fn.eles({each:function(t){if(e.is.fn(t))for(var r=0;r<this.length;r++){var n=this[r],i=t.apply(n,[r,n]);if(i===!1)break}return this},toArray:function(){for(var e=[],t=0;t<this.length;t++)e.push(this[t]);return e},slice:function(t,r){var n=[],i=this.length;null==r&&(r=i),null==t&&(t=0),0>t&&(t=i+t),0>r&&(r=i+r);for(var a=t;a>=0&&r>a&&i>a;a++)n.push(this[a]);return new e.Collection(this.cy(),n)},size:function(){return this.length},eq:function(t){return this[t]||new e.Collection(this.cy())},empty:function(){return 0===this.length},nonempty:function(){return!this.empty()},sort:function(t){if(!e.is.fn(t))return this;var r=this.cy(),n=this.toArray().sort(t);return new e.Collection(r,n)},sortByZIndex:function(){return this.sort(e.Collection.zIndexSort)}}),e.Collection.zIndexSort=function(e,t){var r=function(e){if("nodes"===e._private.group)return e._private.data.parent?e.parents().size():0;if("edges"===e._private.group){var t=e._private.source,r=e._private.target,n=t._private.data.parent?t.parents().size():0,i=r._private.data.parent?r.parents().size():0;return Math.max(n,i)}return 0},n=e._private.style["z-index"].value-t._private.style["z-index"].value,i=0,a=0;return e.cy().hasCompoundNodes()&&(i=r(e),a=r(t)),i-a===0?"nodes"===e._private.group&&"edges"===t._private.group?1:"edges"===e._private.group&&"nodes"===t._private.group?-1:0===n?e._private.index-t._private.index:n:i-a}}(cytoscape),function(e){"use strict";e.fn.eles({updateStyle:function(e){var t=this._private.cy,r=t.style();e=e||void 0===e?!0:!1,r.apply(this);var n=this.updateCompoundBounds();return e?this.add(n).rtrigger("style"):this.add(n).trigger("style"),this},updateMappers:function(e){var t=this._private.cy,r=t.style();e=e||void 0===e?!0:!1,r.updateMappers(this);var n=this.updateCompoundBounds();return e?this.add(n).rtrigger("style"):this.add(n).trigger("style"),this},renderedCss:function(e){var t=this[0];if(t){var r=t.cy().style().getRenderedStyle(t);return void 0===e?r:r[e]}},css:function(t,r){var n=this.cy().style();if(e.is.plainObject(t)){var i=t;n.applyBypass(this,i);var a=this.updateCompoundBounds();this.add(a).rtrigger("style")}else if(e.is.string(t)){if(void 0===r){var o=this[0];return o?o._private.style[t].strValue:void 0}n.applyBypass(this,t,r);var a=this.updateCompoundBounds();this.add(a).rtrigger("style")}else if(void 0===t){var o=this[0];return o?n.getRawStyle(o):void 0}return this},removeCss:function(){for(var e=this.cy().style(),t=this,r=0;r<t.length;r++){var n=t[r];e.removeAllBypasses(n)}var i=this.updateCompoundBounds();this.add(i).rtrigger("style")},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},visible:function(){var e=this[0];if(e){var t=e._private.style;if("visible"!==t.visibility.value||"element"!==t.display.value)return!1;if("nodes"===e._private.group){var r=e._private.data.parent?e.parents():null;if(r)for(var n=0;n<r.length;n++){var i=r[n],a=i._private.style,o=a.visibility.value,s=a.display.value;if("visible"!==o||"element"!==s)return!1}return!0}var l=e._private.source,c=e._private.target;return l.visible()&&c.visible()}},hidden:function(){var e=this[0];return e?!e.visible():void 0},effectiveOpacity:function(){var e=this[0];if(e){var t=e._private.style.opacity.value,r=e._private.data.parent?e.parents():null;if(r)for(var n=0;n<r.length;n++){var i=r[n],a=i._private.style.opacity.value;t=a*t}return t}},transparent:function(){var e=this[0];return e?0===e.effectiveOpacity():void 0},isFullAutoParent:function(){var e=this[0];if(e){var t="auto"===e._private.style.width.value,r="auto"===e._private.style.height.value;return e.isParent()&&t&&r}}}),e.elesfn.style=e.elesfn.css,e.elesfn.renderedStyle=e.elesfn.renderedCss,e.elesfn.removeStyle=e.elesfn.removeCss}(cytoscape),function(e){"use strict";function t(e){return function(){var t=arguments;if(2===t.length){var r=t[0],n=t[1];this.bind(e.event,r,n)}else if(1===t.length){var n=t[0];this.bind(e.event,n)}else if(0===t.length){for(var i=0;i<this.length;i++){var a=this[i];(!e.ableField||a._private[e.ableField])&&(a._private[e.field]=e.value)}this.updateStyle(),this.trigger(e.event)}return this}}function r(r){e.elesfn[r.field]=function(){var e=this[0];if(e){if(r.altFieldFn){var t=r.altFieldFn(e);if(void 0!==t)return t}return e._private[r.field]}},e.elesfn[r.on]=t({event:r.on,field:r.field,ableField:r.ableField,value:!0}),e.elesfn[r.off]=t({event:r.off,field:r.field,ableField:r.ableField,value:!1})}r({field:"locked",altFieldFn:function(e){return e.cy().autolockNodes()?!0:void 0},on:"lock",off:"unlock"}),r({field:"grabbable",altFieldFn:function(e){return e.cy().autoungrabifyNodes()?!1:void 0},on:"grabify",off:"ungrabify"}),r({field:"selected",ableField:"selectable",on:"select",off:"unselect"}),r({field:"selectable",on:"selectify",off:"unselectify"}),e.elesfn.grabbed=function(){var e=this[0];return e?e._private.grabbed:void 0},r({field:"active",on:"activate",off:"unactivate"}),e.elesfn.inactive=function(){var e=this[0];return e?!e._private.active:void 0}}(cytoscape),function(e){"use strict";function t(t){return function(r){for(var n=[],i=this._private.cy,a=0;a<this.length;a++){var o=this[a],s=o._private[t.attr];s&&n.push(s)}return new e.Collection(i,n).filter(r)}}function r(t){return function(r){var n=[],i=this._private.cy,a=t||{};e.is.string(r)&&(r=i.$(r));for(var o=r.connectedEdges(),s=this._private.ids,l=0;l<o.length;l++){var c,u=o[l],d=u._private.data;if(a.thisIs){var p=d[a.thisIs];c=s[p]}else c=s[d.source]||s[d.target];c&&n.push(u)}return new e.Collection(i,n)}}function n(t){var r={codirected:!1};return t=e.util.extend({},r,t),function(r){for(var n=this._private.cy,i=[],a=this.edges(),o=t,s=0;s<a.length;s++)for(var l=a[s],c=l.source()[0],u=c.id(),d=l.target()[0],p=d.id(),h=c._private.edges,g=0;g<h.length;g++){var v=h[g],f=v._private.data,y=f.target,m=f.source,b=y===p&&m===u,x=u===y&&p===m;(o.codirected&&b||!o.codirected&&(b||x))&&i.push(v)}return new e.Collection(n,i).filter(r)}}e.fn.eles({roots:function(t){for(var r=this,n=[],i=0;i<r.length;i++){var a=r[i];if(a.isNode()){var o;!function(){o=a.connectedEdges(function(){return this.data("target")===a.id()&&this.data("source")!==a.id()}).length>0}(),o||n.push(a)}}return new e.Collection(this._private.cy,n).filter(t)},forwardNodes:function(t){for(var r=this,n=[],i=0;i<r.length;i++){var a=r[i],o=a.id();if(a.isNode())for(var s=a._private.edges,l=0;l<s.length;l++){var c=s[l],u=c._private.data.source,d=c._private.data.target;u===o&&d!==o&&n.push(c.target()[0])}}return new e.Collection(this._private.cy,n).filter(t)},backwardNodes:function(t){for(var r=this,n=[],i=0;i<r.length;i++){var a=r[i],o=a.id();if(a.isNode())for(var s=a._private.edges,l=0;l<s.length;l++){var c=s[l],u=c._private.data.source,d=c._private.data.target;d===o&&u!==o&&n.push(c.source()[0])}}return new e.Collection(this._private.cy,n).filter(t)}}),e.fn.eles({neighborhood:function(t){for(var r=[],n=this._private.cy,i=this.nodes(),a=0;a<i.length;a++)for(var o=i[a],s=o.connectedEdges(),l=0;l<s.length;l++){var c=s[l],u=c.connectedNodes().not(o);u.length>0&&r.push(u[0]),r.push(c[0])}return new e.Collection(n,r).filter(t)},closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}}),e.fn.eles({source:function(t){var r,n=this[0];return n&&(r=n._private.source),new e.Collection(this.cy(),r).filter(t)},target:function(t){var r,n=this[0];return n&&(r=n._private.target),new e.Collection(this.cy(),r).filter(t)},sources:t({attr:"source"}),targets:t({attr:"target"})}),e.fn.eles({edgesWith:r(),edgesTo:r({thisIs:"source"})}),e.fn.eles({connectedEdges:function(t){for(var r=[],n=this._private.cy,i=this,a=0;a<i.length;a++){var o=i[a];if(o.isNode())for(var s=o._private.edges,l=0;l<s.length;l++){var c=s[l];r.push(c)}}return new e.Collection(n,r).filter(t)},connectedNodes:function(t){for(var r=[],n=this._private.cy,i=this,a=0;a<i.length;a++){var o=i[a];o.isEdge()&&(r.push(o.source()[0]),r.push(o.target()[0]))}return new e.Collection(n,r).filter(t)},parallelEdges:n(),codirectedEdges:n({codirected:!0})})}(cytoscape),function(e){"use strict";e.Minheap=function(t,r,n){return new e.Heap(t,r,e.Heap.minHeapComparator,n)},e.Maxheap=function(t,r,n){return new e.Heap(t,r,e.Heap.maxHeapComparator,n)},e.Heap=function(t,r,n,i){if("undefined"!=typeof n&&"undefined"!=typeof r){"undefined"==typeof i&&(i=e.Heap.idFn);var a,o,s,l=[],c={},u=[],d=0;for(r=this.getArgumentAsCollection(r,t),s=r.length,d=0;s>d;d+=1){if(l.push(i.call(t,r[d],d,r)),a=r[d].id(),c.hasOwnProperty(a))throw"ERROR: Multiple items with the same id found: "+a;c[a]=d,u.push(a)}for(this._private={cy:t,heap:l,pointers:c,elements:u,comparator:n,extractor:i,length:s},d=Math.floor(s/2);d>=0;d-=1)o=this.heapify(d);return o}},e.Heap.idFn=function(e){return e.id()},e.Heap.minHeapComparator=function(e,t){return e>=t},e.Heap.maxHeapComparator=function(e,t){return t>=e},e.fn.heap=function(t){for(var r in t){var n=t[r];e.Heap.prototype[r]=n}},e.heapfn=e.Heap.prototype,e.heapfn.size=function(){return this._private.length},e.heapfn.getArgumentAsCollection=function(t,r){var n;if("undefined"==typeof r&&(r=this._private.cy),e.is.elementOrCollection(t))n=t;else{for(var i=[],a=[].concat.apply([],[t]),o=0;o<a.length;o++){var s=a[o],l=r.getElementById(s);l.length>0&&i.push(l)}n=new e.Collection(r,i)}return n},e.heapfn.isHeap=function(){var e,t,r,n,i,a=this._private.heap,o=a.length,s=this._private.comparator;for(e=0;o>e;e+=1)if(t=2*e+1,r=t+1,n=o>t?s(a[t],a[e]):!0,i=o>r?s(a[r],a[e]):!0,!n||!i)return!1;return!0},e.heapfn.heapSwap=function(e,t){var r=this._private.heap,n=this._private.pointers,i=this._private.elements,a=r[e],o=i[e],s=i[e],l=i[t];r[e]=r[t],i[e]=i[t],n[s]=t,n[l]=e,r[t]=a,i[t]=o},e.heapfn.heapify=function(e,t){var r,n,i,a,o,s,l,c=0,u=!1;for("undefined"==typeof t&&(t=!0),r=this._private.heap,c=r.length,s=this._private.comparator,n=e;!u;)t?(i=2*n+1,a=i+1,o=n,c>i&&!s(r[i],r[o])&&(o=i),c>a&&!s(r[a],r[o])&&(o=a),u=o===n,u||(this.heapSwap(o,n),n=o)):(l=Math.floor((n-1)/2),o=n,u=0>l||s(r[o],r[l]),u||(this.heapSwap(o,l),n=l))},e.heapfn.insert=function(e){var t,r,n,i,a,o=this.getArgumentAsCollection(e),s=o.length;for(a=0;s>a;a+=1){if(t=o[a],r=this._private.heap.length,n=this._private.extractor(t),i=t.id(),this._private.pointers.hasOwnProperty(i))throw"ERROR: Multiple items with the same id found: "+i;this._private.heap.push(n),this._private.elements.push(i),this._private.pointers[i]=r,this.heapify(r,!1)}this._private.length=this._private.heap.length},e.heapfn.getValueById=function(e){if(this._private.pointers.hasOwnProperty(e)){var t=this._private.pointers[e];return this._private.heap[t]}},e.heapfn.contains=function(e){for(var t=this.getArgumentAsCollection(e),r=0;r<t.length;r+=1){var n=t[r].id();if(!this._private.pointers.hasOwnProperty(n))return!1}return!0},e.heapfn.top=function(){return this._private.length>0?{value:this._private.heap[0],id:this._private.elements[0]}:void 0},e.heapfn.pop=function(){if(this._private.length>0){var e,t,r,n=this.top(),i=this._private.length-1;return this.heapSwap(0,i),e=this._private.elements[i],t=this._private.heap[i],r=e,this._private.heap.pop(),this._private.elements.pop(),this._private.length=this._private.heap.length,delete this._private.pointers[r],this.heapify(0),n}},e.heapfn.findDirectionHeapify=function(e){var t=Math.floor((e-1)/2),r=this._private.heap,n=0>t||this._private.comparator(r[e],r[t]);this.heapify(e,n)},e.heapfn.edit=function(t,r){for(var n=this.getArgumentAsCollection(t),i=0;i<n.length;i+=1){var a=n[i].id(),o=this._private.pointers[a],s=this._private.heap[o];e.is.number(r)?this._private.heap[o]=r:e.is.fn(r)&&(this._private.heap[o]=r.call(this._private.cy,s,o)),this.findDirectionHeapify(o)}},e.heapfn.delete=function(e){for(var t=this.getArgumentAsCollection(e),r=0;r<t.length;r+=1){var n,i,a,o=t[r].id(),s=this._private.pointers[o],l=this._private.length-1;s!==l&&this.heapSwap(s,l),n=this._private.elements[l],i=this._private.heap[l],a=n,this._private.heap.pop(),this._private.elements.pop(),this._private.length=this._private.heap.length,delete this._private.pointers[a],this.findDirectionHeapify(s)}return i}}(cytoscape),function(e){"use strict";function t(e){t.CANVAS_LAYERS=5,t.SELECT_BOX=0,t.DRAG=2,t.NODE=4,t.TEXTURE_BUFFER=0,t.BUFFER_COUNT=2,this.options=e,this.data={select:[void 0,void 0,void 0,void 0,0],renderer:this,cy:e.cy,container:e.cy.container(),canvases:new Array(t.CANVAS_LAYERS),contexts:new Array(t.CANVAS_LAYERS),canvasNeedsRedraw:new Array(t.CANVAS_LAYERS),bufferCanvases:new Array(t.BUFFER_COUNT),bufferContexts:new Array(t.CANVAS_LAYERS)},this.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},this.timeoutData={panTimeout:null},this.dragData={possibleDragElements:[]},this.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},this.zoomData={freeToZoom:!1,lastPointerX:null},this.redraws=0,this.bindings=[],this.data.canvasContainer=document.createElement("div");var r=this.data.canvasContainer.style;r.position="absolute",r.zIndex="0",r.overflow="hidden",this.data.container.appendChild(this.data.canvasContainer);for(var n=0;n<t.CANVAS_LAYERS;n++)this.data.canvases[n]=document.createElement("canvas"),this.data.contexts[n]=this.data.canvases[n].getContext("2d"),this.data.canvases[n].style.position="absolute",this.data.canvases[n].setAttribute("data-id","layer"+n),this.data.canvases[n].style.zIndex=String(t.CANVAS_LAYERS-n),this.data.canvasContainer.appendChild(this.data.canvases[n]),this.data.canvasNeedsRedraw[n]=!1;this.data.canvases[t.NODE].setAttribute("data-id","layer"+t.NODE+"-node"),this.data.canvases[t.SELECT_BOX].setAttribute("data-id","layer"+t.SELECT_BOX+"-selectbox"),this.data.canvases[t.DRAG].setAttribute("data-id","layer"+t.DRAG+"-drag");for(var n=0;n<t.BUFFER_COUNT;n++)this.data.bufferCanvases[n]=document.createElement("canvas"),this.data.bufferContexts[n]=this.data.bufferCanvases[n].getContext("2d"),this.data.bufferCanvases[n].style.position="absolute",this.data.bufferCanvases[n].setAttribute("data-id","buffer"+n),this.data.bufferCanvases[n].style.zIndex=String(-n-1),this.data.bufferCanvases[n].style.visibility="hidden",this.data.canvasContainer.appendChild(this.data.bufferCanvases[n]);this.hideEdgesOnViewport=e.hideEdgesOnViewport,this.hideLabelsOnViewport=e.hideLabelsOnViewport,this.textureOnViewport=e.textureOnViewport,this.load()}t.panOrBoxSelectDelay=400,t.isTouch=e.is.touch();var r="undefined"!=typeof Path2D;t.usePaths=function(){return r},t.prototype.notify=function(e){switch(e.type){case"destroy":return void this.destroy();case"add":case"remove":case"load":this.updateNodesCache(),this.updateEdgesCache();break;case"viewport":this.data.canvasNeedsRedraw[t.SELECT_BOX]=!0;break;case"style":this.updateCachedZSortedEles()}("load"===e.type||"resize"===e.type)&&(this.invalidateContainerClientCoordsCache(),this.matchCanvasSize(this.data.container)),this.data.canvasNeedsRedraw[t.NODE]=!0,this.redraw()},t.prototype.destroy=function(){this.destroyed=!0;for(var e=0;e<this.bindings.length;e++){var t=this.bindings[e],r=t;r.target.removeEventListener(r.event,r.handler,r.useCapture)}};for(var n in e.math)t.prototype[n]=e.math[n];e("renderer","canvas",t)}(cytoscape),function(e){"use strict";var t=e("renderer","canvas"),r=t.prototype,n=t.arrowShapes={};t.arrowShapeHeight=.3;var i=function(e,t,r,n,i,a){var o=r-i/2,s=r+i/2,l=n-a/2,c=n+a/2;return e>=o&&s>=e&&t>=l&&c>=t};n.arrow={_points:[-.15,-.3,0,0,.15,-.3],collide:function(t,r,i,a,o,s,l,c){var u=n.arrow._points;return e.math.pointInsidePolygon(t,r,u,i,a,o,s,l,c)},roughCollide:i,draw:function(e){for(var t=n.arrow._points,r=0;r<t.length/2;r++)e.lineTo(t[2*r],t[2*r+1])},spacing:function(){return 0},gap:function(e){return 2*e._private.style.width.pxValue}},n.triangle=n.arrow,n.none={collide:function(){return!1},roughCollide:function(){return!1},draw:function(){},spacing:function(){return 0},gap:function(){return 0}},n.circle={_baseRadius:.15,collide:function(e,t,r,i,a,o,s,l){if(a!=o){var c=(o+l)/(a+l);return t/=c,i/=c,Math.pow(r-e,2)+Math.pow(i-t,2)<=Math.pow((a+l)*n.circle._baseRadius,2)}return Math.pow(r-e,2)+Math.pow(i-t,2)<=Math.pow((a+l)*n.circle._baseRadius,2)},roughCollide:i,draw:function(e){e.arc(0,0,n.circle._baseRadius,0,2*Math.PI,!1)},spacing:function(e){return r.getArrowWidth(e._private.style.width.pxValue)*n.circle._baseRadius},gap:function(e){return 2*e._private.style.width.pxValue}},n.inhibitor={_points:[-.25,0,-.25,-.1,.25,-.1,.25,0],collide:function(t,r,i,a,o,s,l,c){var u=n.inhibitor._points;return e.math.pointInsidePolygon(t,r,u,i,a,o,s,l,c)},roughCollide:i,draw:function(e){for(var t=n.inhibitor._points,r=0;r<t.length/2;r++)e.lineTo(t[2*r],t[2*r+1])},spacing:function(){return 4},gap:function(){return 4}},n.tee=n.inhibitor,n.square={_points:[-.12,0,.12,0,.12,-.24,-.12,-.24],collide:function(t,r,i,a,o,s,l,c){var u=n.square._points;return e.math.pointInsidePolygon(t,r,u,i,a,o,s,l,c)},roughCollide:i,draw:function(e){for(var t=n.square._points,r=0;r<t.length/2;r++)e.lineTo(t[2*r],t[2*r+1])},spacing:function(){return 0},gap:function(e){return 2*e._private.style.width.pxValue}},n.diamond={_points:[-.14,-.14,0,-.28,.14,-.14,0,0],collide:function(t,r,i,a,o,s,l,c){var u=n.diamond._points;return e.math.pointInsidePolygon(t,r,u,i,a,o,s,l,c)},roughCollide:i,draw:function(e){e.lineTo(-.14,-.14),e.lineTo(0,-.28),e.lineTo(.14,-.14),e.lineTo(0,0)},spacing:function(){return 0},gap:function(e){return 2*e._private.style.width.pxValue}}}(cytoscape),function(e){"use strict";var t=e("renderer","canvas");t.prototype.getCachedNodes=function(){var e=this.data,t=this.data.cy;return null==e.cache&&(e.cache={}),null==e.cache.cachedNodes&&(e.cache.cachedNodes=t.nodes()),e.cache.cachedNodes},t.prototype.updateNodesCache=function(){var e=this.data,t=this.data.cy;null==e.cache&&(e.cache={}),e.cache.cachedNodes=t.nodes()},t.prototype.getCachedEdges=function(){var e=this.data,t=this.data.cy;return null==e.cache&&(e.cache={}),null==e.cache.cachedEdges&&(e.cache.cachedEdges=t.edges()),e.cache.cachedEdges},t.prototype.updateEdgesCache=function(){var e=this.data,t=this.data.cy;null==e.cache&&(e.cache={}),e.cache.cachedEdges=t.edges()}}(cytoscape),function(e){"use strict";var t=e("renderer","canvas");t.prototype.projectIntoViewport=function(e,t){var r=this.findContainerClientCoords(),n=r[0],i=r[1],a=e-n,o=t-i;return a-=this.data.cy.pan().x,o-=this.data.cy.pan().y,a/=this.data.cy.zoom(),o/=this.data.cy.zoom(),[a,o]},t.prototype.findContainerClientCoords=function(){var e=this.data.container,t=this.containerBB=this.containerBB||e.getBoundingClientRect();return[t.left,t.top,t.right-t.left,t.bottom-t.top]},t.prototype.invalidateContainerClientCoordsCache=function(){this.containerBB=null},t.prototype.findNearestElement=function(r,n,i){function a(e){var a=t.nodeShapes[s.getNodeShape(e)],o=e._private.style["border-width"].pxValue/2,l=s.getNodeWidth(e),u=s.getNodeHeight(e),d=l/2,p=u/2,h=e._private.position,v=e.visible()&&!e.transparent();(!i||v)&&h.x-d<=r&&r<=h.x+d&&h.y-p<=n&&n<=h.y+p&&a.checkPointRough(r,n,o,l+g,u+g,h.x,h.y)&&a.checkPoint(r,n,o,l+g,u+g,h.x,h.y)&&c.push(e)}function o(o){var l=o._private.rscratch,u=o._private.style,d=u.width.pxValue,g=d*d,v=2*d,f=o.visible()&&!o.transparent(),y=o._private.source,m=o._private.target;if(!i||f){if("self"===l.edgeType)(e.math.inBezierVicinity(r,n,l.startX,l.startY,l.cp2ax,l.cp2ay,l.selfEdgeMidX,l.selfEdgeMidY,g)&&g+h>e.math.sqDistanceToQuadraticBezier(r,n,l.startX,l.startY,l.cp2ax,l.cp2ay,l.selfEdgeMidX,l.selfEdgeMidY)||e.math.inBezierVicinity(r,n,l.selfEdgeMidX,l.selfEdgeMidY,l.cp2cx,l.cp2cy,l.endX,l.endY,g)&&g+h>e.math.sqDistanceToQuadraticBezier(r,n,l.selfEdgeMidX,l.selfEdgeMidY,l.cp2cx,l.cp2cy,l.endX,l.endY))&&c.push(o);else if("haystack"==l.edgeType){var b=m._private.position,x=m.width(),w=m.height(),_=y._private.position,E=y.width(),S=y.height(),P=_.x+l.source.x*E,k=_.y+l.source.y*S,C=b.x+l.target.x*x,D=b.y+l.target.y*w;e.math.inLineVicinity(r,n,P,k,C,D,v)&&g+h>e.math.sqDistanceToFiniteLine(r,n,P,k,C,D)&&c.push(o)}else"straight"===l.edgeType?e.math.inLineVicinity(r,n,l.startX,l.startY,l.endX,l.endY,v)&&g+h>e.math.sqDistanceToFiniteLine(r,n,l.startX,l.startY,l.endX,l.endY)&&c.push(o):"bezier"===l.edgeType&&e.math.inBezierVicinity(r,n,l.startX,l.startY,l.cp2x,l.cp2y,l.endX,l.endY,g)&&g+h>e.math.sqDistanceToQuadraticBezier(r,n,l.startX,l.startY,l.cp2x,l.cp2y,l.endX,l.endY)&&c.push(o);if(0===c.length||c[c.length-1]!==o){var N=t.arrowShapes[u["source-arrow-shape"].value],T=t.arrowShapes[u["target-arrow-shape"].value],y=y||o._private.source,m=m||o._private.target,b=m._private.position,_=y._private.position,M=s.getArrowWidth(u.width.pxValue),I=s.getArrowHeight(u.width.pxValue),z=M,B=I;(N.roughCollide(r,n,l.arrowStartX,l.arrowStartY,M,I,[l.arrowStartX-_.x,l.arrowStartY-_.y],0)&&N.collide(r,n,l.arrowStartX,l.arrowStartY,M,I,[l.arrowStartX-_.x,l.arrowStartY-_.y],0)||T.roughCollide(r,n,l.arrowEndX,l.arrowEndY,z,B,[l.arrowEndX-b.x,l.arrowEndY-b.y],0)&&T.collide(r,n,l.arrowEndX,l.arrowEndY,z,B,[l.arrowEndX-b.x,l.arrowEndY-b.y],0))&&c.push(o)}p&&c.length>0&&c[c.length-1]===o&&(a(y),a(m))}}for(var s=this,l=this.getCachedZSortedEles(),c=[],u=t.isTouch,d=this.data.cy.zoom(),p=this.data.cy.hasCompoundNodes(),h=(u?256:32)/d,g=(u?16:0)/d,v=l.length-1;v>=0;v--){var f=l[v];if(c.length>0)break;"nodes"===f._private.group?a(l[v]):o(l[v])}return c.length>0?c[c.length-1]:null},t.prototype.getAllInBox=function(r,n,i,a){var o=this.getCachedNodes(),s=this.getCachedEdges(),l=[],c=Math.min(r,i),u=Math.max(r,i),d=Math.min(n,a),p=Math.max(n,a);r=c,i=u,n=d,a=p;for(var h,g=0;g<o.length;g++){var v=o[g]._private.position,f=this.getNodeShape(o[g]),y=this.getNodeWidth(o[g]),m=this.getNodeHeight(o[g]),b=o[g]._private.style["border-width"].pxValue/2,x=t.nodeShapes[f];x.intersectBox(r,n,i,a,y,m,v.x,v.y,b)&&l.push(o[g])}for(var g=0;g<s.length;g++){var w=s[g]._private.rscratch;if("self"==s[g]._private.rscratch.edgeType&&((h=e.math.boxInBezierVicinity(r,n,i,a,w.startX,w.startY,w.cp2ax,w.cp2ay,w.endX,w.endY,s[g]._private.style.width.pxValue))&&(2==h||1==h&&e.math.checkBezierInBox(r,n,i,a,w.startX,w.startY,w.cp2ax,w.cp2ay,w.endX,w.endY,s[g]._private.style.width.pxValue))||(h=e.math.boxInBezierVicinity(r,n,i,a,w.startX,w.startY,w.cp2cx,w.cp2cy,w.endX,w.endY,s[g]._private.style.width.pxValue))&&(2==h||1==h&&e.math.checkBezierInBox(r,n,i,a,w.startX,w.startY,w.cp2cx,w.cp2cy,w.endX,w.endY,s[g]._private.style.width.pxValue)))&&l.push(s[g]),"bezier"==w.edgeType&&(h=e.math.boxInBezierVicinity(r,n,i,a,w.startX,w.startY,w.cp2x,w.cp2y,w.endX,w.endY,s[g]._private.style.width.pxValue))&&(2==h||1==h&&e.math.checkBezierInBox(r,n,i,a,w.startX,w.startY,w.cp2x,w.cp2y,w.endX,w.endY,s[g]._private.style.width.pxValue))&&l.push(s[g]),"straight"==w.edgeType&&(h=e.math.boxInBezierVicinity(r,n,i,a,w.startX,w.startY,.5*w.startX+.5*w.endX,.5*w.startY+.5*w.endY,w.endX,w.endY,s[g]._private.style.width.pxValue))&&(2==h||1==h&&e.math.checkStraightEdgeInBox(r,n,i,a,w.startX,w.startY,w.endX,w.endY,s[g]._private.style.width.pxValue))&&l.push(s[g]),"haystack"==w.edgeType){var _=s[g].target()[0],E=_.position(),S=s[g].source()[0],P=S.position(),k=P.x+w.source.x,C=P.y+w.source.y,D=E.x+w.target.x,N=E.y+w.target.y,T=k>=r&&i>=k&&C>=n&&a>=C,M=D>=r&&i>=D&&N>=n&&a>=N;T&&M&&l.push(s[g])}}return l},t.prototype.getNodeWidth=function(e){return e.width()},t.prototype.getNodeHeight=function(e){return e.height()},t.prototype.getNodeShape=function(e){var t=e._private.style.shape.value;return e.isParent()?"rectangle"===t||"roundrectangle"===t?t:"rectangle":t},t.prototype.getNodePadding=function(e){var t=e._private.style["padding-left"].pxValue,r=e._private.style["padding-right"].pxValue,n=e._private.style["padding-top"].pxValue,i=e._private.style["padding-bottom"].pxValue;return isNaN(t)&&(t=0),isNaN(r)&&(r=0),isNaN(n)&&(n=0),isNaN(i)&&(i=0),{left:t,right:r,top:n,bottom:i}},t.prototype.zOrderSort=e.Collection.zIndexSort,t.prototype.updateCachedZSortedEles=function(){this.getCachedZSortedEles(!0)
},t.prototype.getCachedZSortedEles=function(e){var t=this.lastZOrderCachedNodes,r=this.lastZOrderCachedEdges,n=this.getCachedNodes(),i=this.getCachedEdges(),a=[];if(!e&&t&&r&&t===n&&r===i)a=this.cachedZSortedEles;else{for(var o=0;o<n.length;o++)a.push(n[o]);for(var o=0;o<i.length;o++)a.push(i[o]);a.sort(this.zOrderSort),this.cachedZSortedEles=a}return this.lastZOrderCachedNodes=n,this.lastZOrderCachedEdges=i,a},t.prototype.projectBezier=function(t){function r(e){a.push({x:n(e[0],e[2],e[4],.05),y:n(e[1],e[3],e[5],.05)}),a.push({x:n(e[0],e[2],e[4],.25),y:n(e[1],e[3],e[5],.25)}),a.push({x:n(e[0],e[2],e[4],.4),y:n(e[1],e[3],e[5],.4)}),a.push({x:n(e[0],e[2],e[4],.5),y:n(e[1],e[3],e[5],.5)}),a.push({x:n(e[0],e[2],e[4],.6),y:n(e[1],e[3],e[5],.6)}),a.push({x:n(e[0],e[2],e[4],.75),y:n(e[1],e[3],e[5],.75)}),a.push({x:n(e[0],e[2],e[4],.95),y:n(e[1],e[3],e[5],.95)})}var n=e.math.qbezierAt,i=t._private.rscratch,a=t._private.rstyle.bezierPts=[];"self"===i.edgeType?(r([i.startX,i.startY,i.cp2ax,i.cp2ay,i.selfEdgeMidX,i.selfEdgeMidY]),r([i.selfEdgeMidX,i.selfEdgeMidY,i.cp2cx,i.cp2cy,i.endX,i.endY])):"bezier"===i.edgeType&&r([i.startX,i.startY,i.cp2x,i.cp2y,i.endX,i.endY])},t.prototype.recalculateNodeLabelProjection=function(e){var t=e._private.style.content.strValue;if(t&&!t.match(/^\s+$/)){var r,n,i=e.outerWidth(),a=e.outerHeight(),o=e._private.position,s=e._private.style["text-halign"].strValue,l=e._private.style["text-valign"].strValue,c=e._private.rscratch,u=e._private.rstyle;switch(s){case"left":r=o.x-i/2;break;case"right":r=o.x+i/2;break;default:r=o.x}switch(l){case"top":n=o.y-a/2;break;case"bottom":n=o.y+a/2;break;default:n=o.y}c.labelX=r,c.labelY=n,u.labelX=r,u.labelY=n,this.applyLabelDimensions(e)}},t.prototype.recalculateEdgeLabelProjection=function(t){var r=t._private.style.content.strValue;if(r&&!r.match(/^\s+$/)){var n,i,a,o,s=t._private.rscratch,l=t._private.rstyle;if("self"==s.edgeType)a=s.selfEdgeMidX,o=s.selfEdgeMidY;else if("straight"==s.edgeType)a=(s.startX+s.endX)/2,o=(s.startY+s.endY)/2;else if("bezier"==s.edgeType)a=e.math.qbezierAt(s.startX,s.cp2x,s.endX,.5),o=e.math.qbezierAt(s.startY,s.cp2y,s.endY,.5);else if("haystack"==s.edgeType){var c=t.source().position(),u=t.target().position();a=(c.x+s.source.x+u.x+s.target.x)/2,o=(c.y+s.source.y+u.y+s.target.y)/2}n=a,i=o,s.labelX=n,s.labelY=i,l.labelX=n,l.labelY=i,this.applyLabelDimensions(t)}},t.prototype.applyLabelDimensions=function(e){var t=e._private.rscratch,r=e._private.rstyle,n=this.getLabelText(e),i=this.calculateLabelDimensions(e,n);r.labelWidth=i.width,t.labelWidth=i.width,r.labelHeight=i.height,t.labelHeight=i.height},t.prototype.getLabelText=function(e){var t=e._private.style,r=e._private.style.content.strValue,n=t["text-transform"].value;return"none"==n||("uppercase"==n?r=r.toUpperCase():"lowercase"==n&&(r=r.toLowerCase())),r},t.prototype.calculateLabelDimensions=function(e,t){var r=e._private.style,n=r["font-style"].strValue,i=r["font-size"].pxValue+"px",a=r["font-family"].strValue,o=r["font-variant"].strValue,s=r["font-weight"].strValue,l=e._private.rscratch,c=e._private.labelKey,u=l.labelDimCache||(l.labelDimCache={});if(u[c])return u[c];var d=this.labelCalcDiv;d||(d=this.labelCalcDiv=document.createElement("div"),document.body.appendChild(d));var p=d.style;return p.fontFamily=a,p.fontStyle=n,p.fontSize=i,p.fontVariant=o,p.fontWeight=s,p.position="absolute",p.left="-9999px",p.top="-9999px",p.zIndex="-1",p.visibility="hidden",p.padding="0",p.lineHeight="1",d.innerText=t,u[c]={width:d.clientWidth,height:d.clientHeight},u[c]},t.prototype.recalculateRenderedStyle=function(){this.recalculateEdgeProjections(),this.recalculateLabelProjections()},t.prototype.recalculateLabelProjections=function(){for(var e=this.getCachedNodes(),t=0;t<e.length;t++)this.recalculateNodeLabelProjection(e[t]);for(var r=this.getCachedEdges(),t=0;t<r.length;t++)this.recalculateEdgeLabelProjection(r[t])},t.prototype.recalculateEdgeProjections=function(){var e=this.getCachedEdges();this.findEdgeControlPoints(e)},t.prototype.findEdgeControlPoints=function(r){for(var n,i={},a=this.data.cy,o=[],s=[],l=0;l<r.length;l++){var c=r[l],u=c._private.style;if("none"!==u.display.value)if("haystack"!==u["curve-style"].value){var d=c._private.data.source,p=c._private.data.target;n=d>p?p+"-"+d:d+"-"+p,null==i[n]&&(i[n]=[]),i[n].push(c),o.push(n)}else s.push(c)}for(var h,g,v,f,y,m,b,x,w,_,E,S,P,k,C=0;C<o.length;C++){if(n=o[C],h=a.getElementById(i[n][0]._private.data.source),g=a.getElementById(i[n][0]._private.data.target),v=h._private.position,f=g._private.position,y=this.getNodeWidth(h),m=this.getNodeHeight(h),b=this.getNodeWidth(g),x=this.getNodeHeight(g),w=t.nodeShapes[this.getNodeShape(h)],_=t.nodeShapes[this.getNodeShape(g)],E=h._private.style["border-width"].pxValue,S=g._private.style["border-width"].pxValue,k=!1,i[n].length>1&&h!==g){var D=w.intersectLine(v.x,v.y,y,m,f.x,f.y,E/2),N=_.intersectLine(f.x,f.y,b,x,v.x,v.y,S/2),T={x1:D[0],x2:N[0],y1:D[1],y2:N[1]},M=N[1]-D[1],I=N[0]-D[0],z=Math.sqrt(I*I+M*M),B={x:I,y:M},R={x:B.x/z,y:B.y/z};P={x:-R.y,y:R.x},(_.checkPoint(D[0],D[1],S/2,b,x,f.x,f.y)||w.checkPoint(N[0],N[1],E/2,y,m,v.x,v.y))&&(P={},k=!0)}for(var c,X,l=0;l<i[n].length;l++){c=i[n][l],X=c._private.rscratch;var L=X.lastEdgeIndex,O=l,Y=X.lastNumEdges,V=i[n].length,A=X.lastSrcCtlPtX,F=v.x,q=X.lastSrcCtlPtY,j=v.y,H=X.lastSrcCtlPtW,W=h.outerWidth(),Z=X.lastSrcCtlPtH,$=h.outerHeight(),U=X.lastTgtCtlPtX,G=f.x,K=X.lastTgtCtlPtY,J=f.y,Q=X.lastTgtCtlPtW,et=g.outerWidth(),tt=X.lastTgtCtlPtH,rt=g.outerHeight();if(X.badBezier=k?!0:!1,A!==F||q!==j||H!==W||Z!==$||U!==G||K!==J||Q!==et||tt!==rt||L!==O||Y!==V){X.lastSrcCtlPtX=F,X.lastSrcCtlPtY=j,X.lastSrcCtlPtW=W,X.lastSrcCtlPtH=$,X.lastTgtCtlPtX=G,X.lastTgtCtlPtY=J,X.lastTgtCtlPtW=et,X.lastTgtCtlPtH=rt,X.lastEdgeIndex=O,X.lastNumEdges=V;var nt=c._private.style,it=nt["control-point-step-size"].pxValue,at=void 0!==nt["control-point-distance"]?nt["control-point-distance"].pxValue:void 0,ot=nt["control-point-weight"].value;if(h.id()==g.id())X.edgeType="self",X.cp2ax=v.x,X.cp2ay=v.y-(1+Math.pow(m,1.12)/100)*it*(l/3+1),X.cp2cx=h._private.position.x-(1+Math.pow(y,1.12)/100)*it*(l/3+1),X.cp2cy=v.y,X.selfEdgeMidX=(X.cp2ax+X.cp2cx)/2,X.selfEdgeMidY=(X.cp2ay+X.cp2cy)/2;else if(i[n].length%2==1&&l==Math.floor(i[n].length/2))X.edgeType="straight";else{var st=(.5-i[n].length/2+l)*it,lt=void 0!==at?e.math.signum(st)*at:void 0,ct=void 0!==lt?lt:st,ut={x:T.x1*(1-ot)+T.x2*ot,y:T.y1*(1-ot)+T.y2*ot};X.edgeType="bezier",X.cp2x=ut.x+P.x*ct,X.cp2y=ut.y+P.y*ct}this.findEndpoints(c);var dt=!e.is.number(X.startX)||!e.is.number(X.startY),pt=!e.is.number(X.arrowStartX)||!e.is.number(X.arrowStartY),ht=!e.is.number(X.endX)||!e.is.number(X.endY),gt=!e.is.number(X.arrowEndX)||!e.is.number(X.arrowEndY),vt=3,ft=this.getArrowWidth(c._private.style.width.pxValue)*t.arrowShapeHeight,yt=vt*ft,mt=e.math.distance({x:X.cp2x,y:X.cp2y},{x:X.startX,y:X.startY}),bt=yt>mt,xt=e.math.distance({x:X.cp2x,y:X.cp2y},{x:X.endX,y:X.endY}),wt=yt>xt;if("bezier"===X.edgeType){var _t=!1;if(dt||pt||bt){_t=!0;var Et={x:X.cp2x-v.x,y:X.cp2y-v.y},St=Math.sqrt(Et.x*Et.x+Et.y*Et.y),Pt={x:Et.x/St,y:Et.y/St},kt=Math.max(y,m),Ct={x:X.cp2x+2*Pt.x*kt,y:X.cp2y+2*Pt.y*kt},Dt=w.intersectLine(v.x,v.y,y,m,Ct.x,Ct.y,E/2);bt?(X.cp2x=X.cp2x+Pt.x*(yt-mt),X.cp2y=X.cp2y+Pt.y*(yt-mt)):(X.cp2x=Dt[0]+Pt.x*yt,X.cp2y=Dt[1]+Pt.y*yt)}if(ht||gt||wt){_t=!0;var Et={x:X.cp2x-f.x,y:X.cp2y-f.y},St=Math.sqrt(Et.x*Et.x+Et.y*Et.y),Pt={x:Et.x/St,y:Et.y/St},kt=Math.max(y,m),Ct={x:X.cp2x+2*Pt.x*kt,y:X.cp2y+2*Pt.y*kt},Nt=_.intersectLine(f.x,f.y,b,x,Ct.x,Ct.y,S/2);wt?(X.cp2x=X.cp2x+Pt.x*(yt-xt),X.cp2y=X.cp2y+Pt.y*(yt-xt)):(X.cp2x=Nt[0]+Pt.x*yt,X.cp2y=Nt[1]+Pt.y*yt)}_t&&this.findEndpoints(c)}this.projectBezier(c)}}}for(var l=0;l<s.length;l++){var c=s[l],Tt=c._private.rscratch,Mt=.8;if(!Tt.haystack){var It=.5*Mt,zt=2*Math.random()*Math.PI;Tt.source={x:It*Math.cos(zt),y:It*Math.sin(zt)};var Bt=.5*Mt,zt=2*Math.random()*Math.PI;Tt.target={x:Bt*Math.cos(zt),y:Bt*Math.sin(zt)},Tt.edgeType="haystack",Tt.haystack=!0}}return i},t.prototype.findEndpoints=function(r){var n,i=r.source()[0],a=r.target()[0],o=r._private.style["target-arrow-shape"].value,s=r._private.style["source-arrow-shape"].value,l=a._private.style["border-width"].pxValue,c=i._private.style["border-width"].pxValue,u=r._private.rscratch;if("self"==r._private.rscratch.edgeType){var d=[u.cp2cx,u.cp2cy];n=t.nodeShapes[this.getNodeShape(a)].intersectLine(a._private.position.x,a._private.position.y,this.getNodeWidth(a),this.getNodeHeight(a),d[0],d[1],l/2);var p=e.math.shortenIntersection(n,d,t.arrowShapes[o].spacing(r)),h=e.math.shortenIntersection(n,d,t.arrowShapes[o].gap(r));u.endX=h[0],u.endY=h[1],u.arrowEndX=p[0],u.arrowEndY=p[1];var d=[u.cp2ax,u.cp2ay];n=t.nodeShapes[this.getNodeShape(i)].intersectLine(i._private.position.x,i._private.position.y,this.getNodeWidth(i),this.getNodeHeight(i),d[0],d[1],c/2);var g=e.math.shortenIntersection(n,d,t.arrowShapes[s].spacing(r)),v=e.math.shortenIntersection(n,d,t.arrowShapes[s].gap(r));u.startX=v[0],u.startY=v[1],u.arrowStartX=g[0],u.arrowStartY=g[1]}else if("straight"==u.edgeType){n=t.nodeShapes[this.getNodeShape(a)].intersectLine(a._private.position.x,a._private.position.y,this.getNodeWidth(a),this.getNodeHeight(a),i.position().x,i.position().y,l/2),u.noArrowPlacement=0===n.length?!0:!1;var p=e.math.shortenIntersection(n,[i.position().x,i.position().y],t.arrowShapes[o].spacing(r)),h=e.math.shortenIntersection(n,[i.position().x,i.position().y],t.arrowShapes[o].gap(r));u.endX=h[0],u.endY=h[1],u.arrowEndX=p[0],u.arrowEndY=p[1],n=t.nodeShapes[this.getNodeShape(i)].intersectLine(i._private.position.x,i._private.position.y,this.getNodeWidth(i),this.getNodeHeight(i),a.position().x,a.position().y,c/2),u.noArrowPlacement=0===n.length?!0:!1;var g=e.math.shortenIntersection(n,[a.position().x,a.position().y],t.arrowShapes[s].spacing(r)),v=e.math.shortenIntersection(n,[a.position().x,a.position().y],t.arrowShapes[s].gap(r));u.startX=v[0],u.startY=v[1],u.arrowStartX=g[0],u.arrowStartY=g[1]}else if("bezier"==u.edgeType){var d=[u.cp2x,u.cp2y];n=t.nodeShapes[this.getNodeShape(a)].intersectLine(a._private.position.x,a._private.position.y,this.getNodeWidth(a),this.getNodeHeight(a),d[0],d[1],l/2);var p=e.math.shortenIntersection(n,d,t.arrowShapes[o].spacing(r)),h=e.math.shortenIntersection(n,d,t.arrowShapes[o].gap(r));u.endX=h[0],u.endY=h[1],u.arrowEndX=p[0],u.arrowEndY=p[1],n=t.nodeShapes[this.getNodeShape(i)].intersectLine(i._private.position.x,i._private.position.y,this.getNodeWidth(i),this.getNodeHeight(i),d[0],d[1],c/2);var g=e.math.shortenIntersection(n,d,t.arrowShapes[s].spacing(r)),v=e.math.shortenIntersection(n,d,t.arrowShapes[s].gap(r));u.startX=v[0],u.startY=v[1],u.arrowStartX=g[0],u.arrowStartY=g[1]}else if(u.isArcEdge)return},t.prototype.findEdges=function(e){for(var t=this.getCachedEdges(),r={},n=[],i=0;i<e.length;i++)r[e[i]._private.data.id]=e[i];for(var i=0;i<t.length;i++)(r[t[i]._private.data.source]||r[t[i]._private.data.target])&&n.push(t[i]);return n},t.prototype.getArrowWidth=function(e){return Math.max(Math.pow(13.37*e,.9),29)},t.prototype.getArrowHeight=function(e){return Math.max(Math.pow(13.37*e,.9),29)}}(cytoscape),function(e){"use strict";var t=e("renderer","canvas");t.prototype.drawEdge=function(e,t,r){if(t.visible()){var n=t._private.rscratch;if(!n.badBezier){var i=t._private.style;if(!(i.width.pxValue<=0)){var a=i["overlay-padding"].pxValue,o=i["overlay-opacity"].value,s=i["overlay-color"].value;if(r){if(0===o)return;this.strokeStyle(e,s[0],s[1],s[2],o),e.lineCap="round","self"==t._private.rscratch.edgeType&&(e.lineCap="butt")}else{var l=i["line-color"].value;this.strokeStyle(e,l[0],l[1],l[2],i.opacity.value),e.lineCap="butt"}var c,u,d,p;d=c=t._private.source,p=u=t._private.target;var h=p._private.position,g=p.width(),v=p.height(),f=d._private.position,y=d.width(),m=d.height(),b=i.width.pxValue+(r?2*a:0),x=r?"solid":i["line-style"].value;if(e.lineWidth=b,"haystack"!==n.edgeType&&this.findEndpoints(t),"haystack"===n.edgeType)this.drawStyledEdge(t,e,[n.source.x*y+f.x,n.source.y*m+f.y,n.target.x*g+h.x,n.target.y*v+h.y],x,b);else if("self"===n.edgeType){var w=t._private.rscratch;this.drawStyledEdge(t,e,[w.startX,w.startY,w.cp2ax,w.cp2ay,w.selfEdgeMidX,w.selfEdgeMidY],x,b),this.drawStyledEdge(t,e,[w.selfEdgeMidX,w.selfEdgeMidY,w.cp2cx,w.cp2cy,w.endX,w.endY],x,b)}else if("straight"===n.edgeType){var _=u._private.position.x-c._private.position.x,E=u._private.position.y-c._private.position.y,S=n.endX-n.startX,P=n.endY-n.startY;if(0>_*S+E*P)n.straightEdgeTooShort=!0;else{var w=n;this.drawStyledEdge(t,e,[w.startX,w.startY,w.endX,w.endY],x,b),n.straightEdgeTooShort=!1}}else{var w=n;this.drawStyledEdge(t,e,[w.startX,w.startY,w.cp2x,w.cp2y,w.endX,w.endY],x,b)}"haystack"!==n.edgeType&&n.noArrowPlacement!==!0&&void 0!==n.startX&&this.drawArrowheads(e,t,r)}}}};var r=function(e,t){var r=Math.sqrt(Math.pow(e[4]-e[0],2)+Math.pow(e[5]-e[1],2));r+=Math.sqrt(Math.pow((e[4]+e[0])/2-e[2],2)+Math.pow((e[5]+e[1])/2-e[3],2));var n,i=Math.ceil(r/t);if(!(i>0))return null;n=new Array(2*i);for(var a=0;i>a;a++){var o=a/i;n[2*a]=e[0]*(1-o)*(1-o)+2*e[2]*(1-o)*o+e[4]*o*o,n[2*a+1]=e[1]*(1-o)*(1-o)+2*e[3]*(1-o)*o+e[5]*o*o}return n},n=function(e,t){var r,n=Math.sqrt(Math.pow(e[2]-e[0],2)+Math.pow(e[3]-e[1],2)),i=Math.ceil(n/t);if(!(i>0))return null;r=new Array(2*i);for(var a=[e[2]-e[0],e[3]-e[1]],o=0;i>o;o++){var s=o/i;r[2*o]=a[0]*s+e[0],r[2*o+1]=a[1]*s+e[1]}return r},i=0,a=0,o=0;t.prototype.drawStyledEdge=function(e,s,l,c,u){var d,p=+new Date,h=this.data.cy,g=h.zoom(),v=e._private.rscratch,f=s,y=!1,m=t.usePaths();if("solid"===c){if(m){for(var b=l,x=v.pathCacheKey&&b.length===v.pathCacheKey.length,w=x,_=0;w&&_<b.length;_++)v.pathCacheKey[_]!==b[_]&&(w=!1);w?(d=s=v.pathCache,y=!0):(d=s=new Path2D,v.pathCacheKey=b,v.pathCache=d)}y||(s.beginPath&&s.beginPath(),s.moveTo(l[0],l[1]),6==l.length?s.quadraticCurveTo(l[2],l[3],l[4],l[5]):s.lineTo(l[2],l[3])),s=f,m?s.stroke(d):s.stroke()}else if("dotted"===c){var E;if(E=6==l.length?r(l,16,!0):n(l,16,!0),!E)return;var S=Math.max(1.6*u,3.4)*g,P=2*S,k=2*S;P=Math.max(P,1),k=Math.max(k,1);var C=this.createBuffer(P,k),D=C[1];D.setTransform(1,0,0,1,0,0),D.clearRect(0,0,P,k),D.fillStyle=s.strokeStyle,D.beginPath(),D.arc(P/2,k/2,.5*S,0,2*Math.PI,!1),D.fill(),s.beginPath();for(var _=0;_<E.length/2;_++)s.drawImage(C[0],E[2*_]-P/2/g,E[2*_+1]-k/2/g,P/g,k/g);s.closePath()}else if("dashed"===c){var E;if(E=6==l.length?r(l,14,!0):n(l,14,!0),!E)return;var P=2*u*g,k=7.8*g;P=Math.max(P,1),k=Math.max(k,1);var C=this.createBuffer(P,k),D=C[1];D.setTransform(1,0,0,1,0,0),D.clearRect(0,0,P,k),s.strokeStyle&&(D.strokeStyle=s.strokeStyle),D.lineWidth=u*h.zoom(),D.beginPath(),D.moveTo(P/2,.2*k),D.lineTo(P/2,.8*k),D.stroke();var N,T,M=!1;4==l.length?(N=[l[2]-l[0],l[3]-E[1]],T=Math.acos((0*N[0]+-1*N[1])/Math.sqrt(N[0]*N[0]+N[1]*N[1])),N[0]<0&&(T=-T+2*Math.PI)):6==l.length&&(M=!0);for(var _=0;_<E.length/2;_++){var I=_/Math.max(E.length/2-1,1);M&&(N=[2*(1-I)*(l[2]-l[0])+2*I*(l[4]-l[2]),2*(1-I)*(l[3]-l[1])+2*I*(l[5]-l[3])],T=Math.acos((0*N[0]+-1*N[1])/Math.sqrt(N[0]*N[0]+N[1]*N[1])),N[0]<0&&(T=-T+2*Math.PI)),s.translate(E[2*_],E[2*_+1]),s.rotate(T),s.translate(-P/2/g,-k/2/g),s.drawImage(C[0],0,0,P/g,k/g),s.translate(P/2/g,k/2/g),s.rotate(-T),s.translate(-E[2*_],-E[2*_+1]),s.closePath()}}else this.drawStyledEdge(e,s,l,"solid",u);var z=+new Date;a+=z-p,o=a/++i,window.avg=o},t.prototype.drawArrowheads=function(e,t,r){if(!r){var n,i,a=t._private.rscratch.arrowStartX,o=t._private.rscratch.arrowStartY,s=t._private.style,l=t.source().position();if(n=a-l.x,i=o-l.y,!(isNaN(a)||isNaN(o)||isNaN(n)||isNaN(i))){var c=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",this.fillStyle(e,255,255,255,1),this.drawArrowShape(e,"filled",s["source-arrow-shape"].value,a,o,n,i),e.globalCompositeOperation=c;var u=s["source-arrow-color"].value;this.fillStyle(e,u[0],u[1],u[2],s.opacity.value),this.drawArrowShape(e,s["source-arrow-fill"].value,s["source-arrow-shape"].value,a,o,n,i)}var d=t._private.rscratch.arrowEndX,p=t._private.rscratch.arrowEndY,h=t.target().position();if(n=d-h.x,i=p-h.y,!(isNaN(d)||isNaN(p)||isNaN(n)||isNaN(i))){var c=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",this.fillStyle(e,255,255,255,1),this.drawArrowShape(e,"filled",s["target-arrow-shape"].value,d,p,n,i),e.globalCompositeOperation=c;var u=s["target-arrow-color"].value;this.fillStyle(e,u[0],u[1],u[2],s.opacity.value),this.drawArrowShape(e,s["target-arrow-fill"].value,s["target-arrow-shape"].value,d,p,n,i)}}},t.prototype.drawArrowShape=function(e,r,n,i,a,o,s){var l=Math.asin(s/Math.sqrt(o*o+s*s));0>o?l+=Math.PI/2:l=-(Math.PI/2+l),e.translate(i,a),e.moveTo(0,0),e.rotate(-l);var c=this.getArrowWidth(e.lineWidth);e.scale(c,c),e.beginPath(),t.arrowShapes[n].draw(e),e.closePath(),"hollow"===r?(e.lineWidth=1/c,e.stroke()):e.fill(),e.scale(1/c,1/c),e.rotate(l),e.translate(-i,-a)}}(cytoscape),function(e){"use strict";var t=e("renderer","canvas");t.prototype.getCachedImage=function(e,t){var r=this,n=r.imageCache=r.imageCache||{};if(n[e]&&n[e].image)return n[e].image;var i=n[e]=n[e]||{},a=i.image=new Image;return a.addEventListener("load",t),a.src=e,a},t.prototype.drawInscribedImage=function(e,r,n){var i=this,a=n._private.position.x,o=n._private.position.y,s=n._private.style,l=s["background-fit"].value,c=s["background-position-x"],u=s["background-position-y"],d=s["background-repeat"].value,p=n.width(),h=n.height(),g=n._private.rscratch,v=s["background-clip"].value,f="node"===v,y=r.width,m=r.height;if("contain"===l){var b=Math.min(p/y,h/m);y*=b,m*=b}else if("cover"===l){var b=Math.max(p/y,h/m);y*=b,m*=b}var x=a-p/2;x+="%"===c.units?(p-y)*c.value/100:c.pxValue;var w=o-h/2;if(w+="%"===u.units?(h-m)*u.value/100:u.pxValue,g.pathCache&&(x-=a,w-=o,a=0,o=0),"no-repeat"===d)f&&(e.save(),g.pathCache?e.clip(g.pathCache):(t.nodeShapes[i.getNodeShape(n)].drawPath(e,a,o,p,h),e.clip())),e.drawImage(r,0,0,r.width,r.height,x,w,y,m),f&&e.restore();else{var _=e.createPattern(r,d);e.fillStyle=_,t.nodeShapes[i.getNodeShape(n)].drawPath(e,a,o,p,h),e.translate(x,w),e.fill(),e.translate(-x,-w)}}}(cytoscape),function(e){"use strict";var t=e("renderer","canvas");t.prototype.drawEdgeText=function(e,t){var r=t._private.style.content.strValue;if(t.visible()&&r&&!r.match(/^\s+$/)&&(!this.hideEdgesOnViewport||!(this.dragData.didDrag||this.pinching||this.hoverData.dragging||this.data.wheel||this.swipePanning))){var n=t._private.style["font-size"].pxValue*t.cy().zoom(),i=t._private.style["min-zoomed-font-size"].pxValue;if(!(i>n)){e.textAlign="center",e.textBaseline="middle",this.recalculateEdgeLabelProjection(t);var a=t._private.rscratch;this.drawText(e,t,a.labelX,a.labelY)}}},t.prototype.drawNodeText=function(e,t){var r=t._private.style.content.strValue;if(t.visible()&&r&&!r.match(/^\s+$/)){var n=t._private.style["font-size"].pxValue*t.cy().zoom(),i=t._private.style["min-zoomed-font-size"].pxValue;if(!(i>n)){this.recalculateNodeLabelProjection(t);var a=t._private.style["text-halign"].strValue,o=t._private.style["text-valign"].strValue,s=t._private.rscratch;switch(a){case"left":e.textAlign="right";break;case"right":e.textAlign="left";break;default:e.textAlign="center"}switch(o){case"top":e.textBaseline="bottom";break;case"bottom":e.textBaseline="top";break;default:e.textBaseline="middle"}this.drawText(e,t,s.labelX,s.labelY)}}},t.prototype.getFontCache=function(e){var t;this.fontCaches=this.fontCaches||[];for(var r=0;r<this.fontCaches.length;r++)if(t=this.fontCaches[r],t.context===e)return t;return t={context:e},this.fontCaches.push(t),t},t.prototype.setupTextStyle=function(e,t){var r=t.effectiveOpacity(),n=t._private.style,i=n["font-style"].strValue,a=n["font-size"].pxValue+"px",o=n["font-family"].strValue,s=n["font-weight"].strValue,l=n["text-opacity"].value*n.opacity.value*r,c=n.color.value,u=n["text-outline-color"].value,d=t._private.fontKey,p=this.getFontCache(e);p.key!==d&&(e.font=i+" "+s+" "+a+" "+o,p.key=d);var h=String(n.content.value),g=n["text-transform"].value;return"none"==g||("uppercase"==g?h=h.toUpperCase():"lowercase"==g&&(h=h.toLowerCase())),e.lineJoin="round",this.fillStyle(e,c[0],c[1],c[2],l),this.strokeStyle(e,u[0],u[1],u[2],l),h},t.prototype.drawText=function(e,t,r,n){var i=t._private.style,a=t.effectiveOpacity();if(0!==a){var o=this.setupTextStyle(e,t);if(null!=o&&!isNaN(r)&&!isNaN(n)){var s=2*i["text-outline-width"].value;s>0&&(e.lineWidth=s,e.strokeText(o,r,n)),e.fillText(o,r,n)}}}}(cytoscape),function(e){"use strict";var t=e("renderer","canvas");t.prototype.drawNode=function(e,r,n){var i,a,o=this,s=r._private.style,l=r._private.rscratch;if(r.visible()){var c,u=t.usePaths(),d=e,p=!1,h=s["overlay-padding"].pxValue,g=s["overlay-opacity"].value,v=s["overlay-color"].value;if(!n||0!==g){var f=r.effectiveOpacity();if(0!==f)if(i=this.getNodeWidth(r),a=this.getNodeHeight(r),e.lineWidth=s["border-width"].pxValue,void 0!==n&&n)g>0&&(this.fillStyle(e,v[0],v[1],v[2],g),t.nodeShapes.roundrectangle.drawPath(e,r._private.position.x,r._private.position.y,i+2*h,a+2*h),e.fill());else{var y=s["background-color"].value,m=s["border-color"].value;this.fillStyle(e,y[0],y[1],y[2],s["background-opacity"].value*s.opacity.value*f),this.strokeStyle(e,m[0],m[1],m[2],s["border-opacity"].value*s.opacity.value*f),e.lineJoin="miter";var b=s["background-image"].value[2]||s["background-image"].value[1],x=s.shape.strValue,w=r._private.position;if(u){var _=x+"$"+i+"$"+a;e.translate(w.x,w.y),l.pathCacheKey===_?(c=e=l.pathCache,p=!0):(c=e=new Path2D,l.pathCacheKey=_,l.pathCache=c)}if(!p){var E=w;u&&(E={x:0,y:0}),t.nodeShapes[this.getNodeShape(r)].drawPath(e,E.x,E.y,i,a)}if(e=d,u?e.fill(c):e.fill(),void 0!==b){var S=this.getCachedImage(b,function(){o.data.canvasNeedsRedraw[t.NODE]=!0,o.data.canvasNeedsRedraw[t.DRAG]=!0,o.redraw()});S.complete&&this.drawInscribedImage(e,S,r)}var P=s["background-blacken"].value;this.hasPie(r)&&(this.drawPie(e,r),0!==P&&(u||t.nodeShapes[this.getNodeShape(r)].drawPath(e,w.x,w.y,i,a))),P>0?(this.fillStyle(e,0,0,0,P),u?e.fill(c):e.fill()):0>P&&(this.fillStyle(e,255,255,255,-P),u?e.fill(c):e.fill()),s["border-width"].pxValue>0&&(u?e.stroke(c):e.stroke()),u&&e.translate(-w.x,-w.y)}}}},t.prototype.hasPie=function(e){return e=e[0],e._private.hasPie},t.prototype.drawPie=function(t,r){r=r[0];var n=r._private.style["pie-size"],i=this.getNodeWidth(r),a=this.getNodeHeight(r),o=r._private.position.x,s=r._private.position.y,l=Math.min(i,a)/2,c=0;"%"===n.units?l=l*n.value/100:void 0!==n.pxValue&&(l=n.pxValue/2);for(var u=1;u<=e.style.pieBackgroundN;u++){var d=r._private.style["pie-"+u+"-background-size"].value,p=r._private.style["pie-"+u+"-background-color"].value,h=d/100,g=1.5*Math.PI+2*Math.PI*c,v=2*Math.PI*h,f=g+v;0===d||c>=1||c+h>1||(t.beginPath(),t.moveTo(o,s),t.arc(o,s,l,g,f),t.closePath(),this.fillStyle(t,p[0],p[1],p[2],1),t.fill(),c+=h)}}}(cytoscape),function(e){"use strict";var t=e("renderer","canvas"),r="undefined"!=typeof InstallTrigger;t.prototype.getPixelRatio=function(){var e=this.data.contexts[0],t=e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return r?1:(window.devicePixelRatio||1)/t},t.prototype.paintCache=function(e){for(var t,r=this.paintCaches=this.paintCaches||[],n=!0,i=0;i<r.length;i++)if(t=r[i],t.context===e){n=!1;break}return n&&(t={context:e},r.push(t)),t},t.prototype.fillStyle=function(e,t,r,n,i){e.fillStyle="rgba("+t+","+r+","+n+","+i+")"},t.prototype.strokeStyle=function(e,t,r,n,i){e.strokeStyle="rgba("+t+","+r+","+n+","+i+")"},t.prototype.matchCanvasSize=function(e){var r,n=this.data,i=e.clientWidth,a=e.clientHeight,o=this.getPixelRatio(),s=i*o,l=a*o;if(s!==this.canvasWidth||l!==this.canvasHeight){this.fontCaches=null;var c=n.canvasContainer;c.style.width=i+"px",c.style.height=a+"px";for(var u=0;u<t.CANVAS_LAYERS;u++)r=n.canvases[u],(r.width!==s||r.height!==l)&&(r.width=s,r.height=l,r.style.width=i+"px",r.style.height=a+"px");for(var u=0;u<t.BUFFER_COUNT;u++)r=n.bufferCanvases[u],(r.width!==s||r.height!==l)&&(r.width=s,r.height=l,r.style.width=i+"px",r.style.height=a+"px");this.textureMult=1,1>=o&&(r=n.bufferCanvases[t.TEXTURE_BUFFER],this.textureMult=2,r.width=s*this.textureMult,r.height=l*this.textureMult),this.canvasWidth=s,this.canvasHeight=l}},t.prototype.renderTo=function(e,t,r,n){this.redraw({forcedContext:e,forcedZoom:t,forcedPan:r,drawAllLayers:!0,forcedPxRatio:n})},t.prototype.timeToRender=function(){return this.redrawTotalTime/this.redrawCount},t.minRedrawLimit=1e3/60,t.maxRedrawLimit=1e3,t.prototype.redraw=function(r){function n(){function e(e,t){e.setTransform(1,0,0,1,0,0),i||void 0!==t&&!t||e.clearRect(0,0,c.canvasWidth,c.canvasHeight),a||(e.translate(m.x,m.y),e.scale(f,f)),l&&e.translate(l.x,l.y),s&&e.scale(s,s)}function r(e,t){for(var r=e.edges,n=e.nodes,i=0;i<r.length&&!T;i++)a=r[i],c.drawEdge(t,a);for(var i=0;i<r.length&&!T&&!M;i++)a=r[i],c.drawEdgeText(t,a);for(var i=0;i<r.length&&!T;i++)a=r[i],c.drawEdge(t,a,!0);for(var i=0;i<n.length;i++){var a=n[i];c.drawNode(t,a),M||c.drawNodeText(t,a),c.drawNode(t,a,!0)}}x=+new Date;var n=c.getCachedEdges(),g=d.style()._private.coreStyle,v=d.zoom(),f=void 0!==s?s:v,y=d.pan(),m={x:y.x,y:y.y};l&&(m=l),f*=u,m.x*=u,m.y*=u;var b={drag:{nodes:[],edges:[]},nondrag:{nodes:[],edges:[]}},w=c.textureOnViewport&&!i&&(c.pinching||c.hoverData.dragging||c.swipePanning||c.data.wheelZooming);if(w){var _;if(!c.textureCache){c.textureCache={},_=c.textureCache.bb=d.boundingBox(),c.textureCache.texture=c.data.bufferCanvases[t.TEXTURE_BUFFER];var E=c.data.bufferContexts[t.TEXTURE_BUFFER];E.setTransform(1,0,0,1,0,0),E.clearRect(0,0,c.canvasWidth*c.textureMult,c.canvasHeight*c.textureMult),c.redraw({forcedContext:E,drawOnlyNodeLayer:!0,forcedPxRatio:u*c.textureMult});var S=c.textureCache.viewport={zoom:d.zoom(),pan:d.pan(),width:c.canvasWidth,height:c.canvasHeight};S.mpan={x:(0-S.pan.x)/S.zoom,y:(0-S.pan.y)/S.zoom}}h[t.DRAG]=!1,h[t.NODE]=!1;var P=p.contexts[t.NODE],k=c.textureCache.texture,k=c.textureCache.texture,S=c.textureCache.viewport;_=c.textureCache.bb,P.setTransform(1,0,0,1,0,0),P.clearRect(0,0,S.width,S.height);var C=g["outside-texture-bg-color"].value,D=g["outside-texture-bg-opacity"].value;c.fillStyle(P,C[0],C[1],C[2],D),P.fillRect(0,0,S.width,S.height);var v=d.zoom();e(P,!1),P.clearRect(S.mpan.x,S.mpan.y,S.width/S.zoom/u,S.height/S.zoom/u),P.drawImage(k,S.mpan.x,S.mpan.y,S.width/S.zoom/u,S.height/S.zoom/u)}else c.textureOnViewport&&!i&&(c.textureCache=null);var N=c.pinching||c.hoverData.dragging||c.swipePanning||c.data.wheelZooming||c.hoverData.draggingEles,T=c.hideEdgesOnViewport&&N,M=c.hideLabelsOnViewport&&N;if(h[t.DRAG]||h[t.NODE]||a||o){T||c.findEdgeControlPoints(n);for(var I=c.getCachedZSortedEles(),z=0;z<I.length;z++){var B,R=I[z];B=R._private.rscratch.inDragLayer?b.drag:b.nondrag,B[R._private.group].push(R)}}if(h[t.NODE]||a||o){var P=i||p.contexts[t.NODE];e(P),r(b.nondrag,P),a||(h[t.NODE]=!1)}if(!o&&(h[t.DRAG]||a)){var P=i||p.contexts[t.DRAG];e(P),r(b.drag,P),a||(h[t.DRAG]=!1)}if(!o&&h[t.SELECT_BOX]&&!a){var P=i||p.contexts[t.SELECT_BOX];if(e(P),1==p.select[4]){var v=p.cy.zoom(),X=g["selection-box-border-width"].value/v;P.lineWidth=X,P.fillStyle="rgba("+g["selection-box-color"].value[0]+","+g["selection-box-color"].value[1]+","+g["selection-box-color"].value[2]+","+g["selection-box-opacity"].value+")",P.fillRect(p.select[0],p.select[1],p.select[2]-p.select[0],p.select[3]-p.select[1]),X>0&&(P.strokeStyle="rgba("+g["selection-box-border-color"].value[0]+","+g["selection-box-border-color"].value[1]+","+g["selection-box-border-color"].value[2]+","+g["selection-box-opacity"].value+")",P.strokeRect(p.select[0],p.select[1],p.select[2]-p.select[0],p.select[3]-p.select[1]))}if(p.bgActivePosistion){var v=p.cy.zoom(),L=p.bgActivePosistion;P.fillStyle="rgba("+g["active-bg-color"].value[0]+","+g["active-bg-color"].value[1]+","+g["active-bg-color"].value[2]+","+g["active-bg-opacity"].value+")",P.beginPath(),P.arc(L.x,L.y,g["active-bg-size"].pxValue/v,0,2*Math.PI),P.fill()}a||(h[t.SELECT_BOX]=!1)}var O=+new Date;void 0===c.averageRedrawTime&&(c.averageRedrawTime=O-x),void 0===c.redrawCount&&(c.redrawCount=0),c.redrawCount++,void 0===c.redrawTotalTime&&(c.redrawTotalTime=0),c.redrawTotalTime+=O-x,c.averageRedrawTime=c.averageRedrawTime/2+(O-x)/2,c.currentlyDrawing=!1}r=r||{};var i=r.forcedContext,a=r.drawAllLayers,o=r.drawOnlyNodeLayer,s=r.forcedZoom,l=r.forcedPan,c=this,u=void 0===r.forcedPxRatio?this.getPixelRatio():r.forcedPxRatio,d=c.data.cy,p=c.data,h=p.canvasNeedsRedraw;this.redrawTimeout&&clearTimeout(this.redrawTimeout),this.redrawTimeout=null,void 0===this.averageRedrawTime&&(this.averageRedrawTime=0);var g=t.minRedrawLimit,v=t.maxRedrawLimit,f=this.averageRedrawTime;f=g>f?g:f,f=v>f?f:v,void 0===this.lastDrawTime&&(this.lastDrawTime=0);var y=+new Date,m=y-this.lastDrawTime,b=m>=f;if(!i){if(!b||this.currentlyDrawing)return void(this.redrawTimeout=setTimeout(function(){c.redraw()},f));this.lastDrawTime=y,this.currentlyDrawing=!0}var x;i?n():e.util.requestAnimationFrame(n),i||c.initrender||(c.initrender=!0,d.trigger("initrender"))}}(cytoscape),function(e){"use strict";var t=e("renderer","canvas");t.prototype.drawPolygonPath=function(e,t,r,n,i,a){var o=n/2,s=i/2;e.beginPath&&e.beginPath(),e.moveTo(t+o*a[0],r+s*a[1]);for(var l=1;l<a.length/2;l++)e.lineTo(t+o*a[2*l],r+s*a[2*l+1]);e.closePath()},t.prototype.drawPolygon=function(e,t,r,n,i,a){this.drawPolygonPath(e,t,r,n,i,a),e.fill()},t.prototype.drawRoundRectanglePath=function(t,r,n,i,a){var o=i/2,s=a/2,l=e.math.getRoundRectangleRadius(i,a);t.beginPath&&t.beginPath(),t.moveTo(r,n-s),t.arcTo(r+o,n-s,r+o,n,l),t.arcTo(r+o,n+s,r,n+s,l),t.arcTo(r-o,n+s,r-o,n,l),t.arcTo(r-o,n-s,r,n-s,l),t.lineTo(r,n-s),t.closePath()},t.prototype.drawRoundRectangle=function(e,t,r,n,i,a){this.drawRoundRectanglePath(e,t,r,n,i,a),e.fill()}}(cytoscape),function(e){"use strict";var t=e("renderer","canvas");t.prototype.createBuffer=function(e,t){var r=document.createElement("canvas");return r.width=e,r.height=t,[r,r.getContext("2d")]},t.prototype.bufferCanvasImage=function(e){var t=this.data,r=t.cy,n=r.boundingBox(),i=e.full?Math.ceil(n.w):this.data.container.clientWidth,a=e.full?Math.ceil(n.h):this.data.container.clientHeight,o=1;e.full&&void 0!==e.scale&&(i*=e.scale,a*=e.scale,o=e.scale);var s=document.createElement("canvas");s.width=i,s.height=a,s.style.width=i+"px",s.style.height=a+"px";var l=s.getContext("2d");return i>0&&a>0&&(l.clearRect(0,0,i,a),e.bg&&(l.fillStyle=e.bg,l.rect(0,0,i,a),l.fill()),l.globalCompositeOperation="source-over",this.redraw(e.full?{forcedContext:l,drawAllLayers:!0,forcedZoom:o,forcedPan:{x:-n.x1,y:-n.y1},forcedPxRatio:1}:{forcedContext:l,drawAllLayers:!0,forcedZoom:r.zoom(),forcedPan:r.pan(),forcedPxRatio:1})),s},t.prototype.png=function(e){return this.bufferCanvasImage(e).toDataURL("image/png")}}(cytoscape),function(e){"use strict";var t=e("renderer","canvas");t.prototype.registerBinding=function(e,t,r,n){this.bindings.push({target:e,event:t,handler:r,useCapture:n}),e.addEventListener(t,r,n)},t.prototype.load=function(){var r=this,n=function(e,t,r){if(!t)for(var n=e.parents(),i=0;i<n.size();i++)if(n[i]._private.selected)return;for(var a=e.descendants(),i=0;i<a.size();i++)if(t||!a[i]._private.selected){a[i]._private.rscratch.inDragLayer=!0,r.push(a[i]);for(var o=0;o<a[i]._private.edges.length;o++)a[i]._private.edges[o]._private.rscratch.inDragLayer=!0}},i=function(e,t){e._private.grabbed=!0,e._private.rscratch.inDragLayer=!0,t.push(e);for(var r=0;r<e._private.edges.length;r++)e._private.edges[r]._private.rscratch.inDragLayer=!0},a=function(e,t){for(var r=e;r.parent().nonempty();)r=r.parent()[0];if(r!=e||!t)for(var n=r.descendants().add(r),i=0;i<n.size();i++){n[i]._private.rscratch.inDragLayer=t;for(var a=0;a<n[i]._private.edges.length;a++)n[i]._private.edges[a]._private.rscratch.inDragLayer=t}};t.prototype.nodeIsDraggable=function(e){return 0!==e._private.style.opacity.value&&"visible"==e._private.style.visibility.value&&"element"==e._private.style.display.value&&!e.locked()&&e.grabbable()?!0:!1
},r.registerBinding(window,"resize",e.util.debounce(function(){r.invalidateContainerClientCoordsCache(),r.matchCanvasSize(r.data.container),r.data.canvasNeedsRedraw[t.NODE]=!0,r.redraw()},100));for(var o=function(e){r.registerBinding(e,"scroll",function(){r.invalidateContainerClientCoordsCache()})},s=r.data.cy.container();o(s),s.parentNode;)s=s.parentNode;r.registerBinding(r.data.container,"contextmenu",function(e){e.preventDefault()});var l=function(){return 0!==r.data.select[4]};r.registerBinding(r.data.container,"mousedown",function(o){o.preventDefault(),r.hoverData.capture=!0,r.hoverData.which=o.which;var s=r.data.cy,l=r.projectIntoViewport(o.clientX,o.clientY),c=r.data.select,u=r.findNearestElement(l[0],l[1],!0),d=r.dragData.possibleDragElements,p=new e.Event("grab");if(3==o.which){r.hoverData.cxtStarted=!0;var h=new e.Event(o,{type:"cxttapstart",cyPosition:{x:l[0],y:l[1]}});u?(u.activate(),u.trigger(h),r.hoverData.down=u):s.trigger(h),r.hoverData.downTime=(new Date).getTime(),r.hoverData.cxtDragged=!1}else if(1==o.which){if(u&&u.activate(),null!=u){if(r.nodeIsDraggable(u)){if(u.isNode()&&!u.selected())d=r.dragData.possibleDragElements=[],i(u,d),u.trigger(p),("auto"==u._private.style.width.value||"auto"==u._private.style.height.value)&&n(u,!0,d),a(u,!0);else if(u.isNode()&&u.selected()){d=r.dragData.possibleDragElements=[];for(var g=!1,v=s.$("node:selected"),f=0;f<v.length;f++)r.nodeIsDraggable(v[f])&&(i(v[f],d),g||(u.trigger(p),g=!0),("auto"==v[f]._private.style.width.value||"auto"==v[f]._private.style.height.value)&&n(v[f],!1,d),a(v[f],!0))}r.data.canvasNeedsRedraw[t.NODE]=!0,r.data.canvasNeedsRedraw[t.DRAG]=!0}u.trigger(new e.Event(o,{type:"mousedown",cyPosition:{x:l[0],y:l[1]}})).trigger(new e.Event(o,{type:"tapstart",cyPosition:{x:l[0],y:l[1]}})).trigger(new e.Event(o,{type:"vmousedown",cyPosition:{x:l[0],y:l[1]}}))}else null==u&&s.trigger(new e.Event(o,{type:"mousedown",cyPosition:{x:l[0],y:l[1]}})).trigger(new e.Event(o,{type:"tapstart",cyPosition:{x:l[0],y:l[1]}})).trigger(new e.Event(o,{type:"vmousedown",cyPosition:{x:l[0],y:l[1]}}));if(r.hoverData.down=u,r.hoverData.downTime=(new Date).getTime(),null==u||u.isEdge()){c[4]=1;var y=Math.max(0,t.panOrBoxSelectDelay-(+new Date-r.hoverData.downTime));clearTimeout(r.bgActiveTimeout),r.bgActiveTimeout=setTimeout(function(){u&&u.unactivate(),r.data.bgActivePosistion={x:l[0],y:l[1]},r.data.canvasNeedsRedraw[t.SELECT_BOX]=!0,r.redraw()},y)}}c[0]=c[2]=l[0],c[1]=c[3]=l[1]},!1),r.registerBinding(window,"mousemove",e.util.throttle(function(n){var i=!1,a=r.hoverData.capture;if(!a){var o=r.findContainerClientCoords();if(!(n.clientX>o[0]&&n.clientX<o[0]+r.canvasWidth&&n.clientY>o[1]&&n.clientY<o[1]+r.canvasHeight))return}var s=r.data.cy,l=r.projectIntoViewport(n.clientX,n.clientY),c=r.data.select,u=null;r.hoverData.draggingEles||(u=r.findNearestElement(l[0],l[1],!0));var d=r.hoverData.last,p=r.hoverData.down,h=[l[0]-c[2],l[1]-c[3]],g=r.dragData.possibleDragElements;if(i=!0,null!=u?u.trigger(new e.Event(n,{type:"mousemove",cyPosition:{x:l[0],y:l[1]}})).trigger(new e.Event(n,{type:"vmousemove",cyPosition:{x:l[0],y:l[1]}})).trigger(new e.Event(n,{type:"tapdrag",cyPosition:{x:l[0],y:l[1]}})):null==u&&s.trigger(new e.Event(n,{type:"mousemove",cyPosition:{x:l[0],y:l[1]}})).trigger(new e.Event(n,{type:"vmousemove",cyPosition:{x:l[0],y:l[1]}})).trigger(new e.Event(n,{type:"tapdrag",cyPosition:{x:l[0],y:l[1]}})),3===r.hoverData.which){var v=new e.Event(n,{type:"cxtdrag",cyPosition:{x:l[0],y:l[1]}});p?p.trigger(v):s.trigger(v),r.hoverData.cxtDragged=!0,r.hoverData.cxtOver&&u===r.hoverData.cxtOver||(r.hoverData.cxtOver&&r.hoverData.cxtOver.trigger(new e.Event(n,{type:"cxtdragout",cyPosition:{x:l[0],y:l[1]}})),r.hoverData.cxtOver=u,u&&u.trigger(new e.Event(n,{type:"cxtdragover",cyPosition:{x:l[0],y:l[1]}})))}else if(r.hoverData.dragging){if(i=!0,s.panningEnabled()&&s.userPanningEnabled()){var f={x:h[0]*s.zoom(),y:h[1]*s.zoom()};s.panBy(f)}l=r.projectIntoViewport(n.clientX,n.clientY)}else if(1==c[4]&&(null==p||p.isEdge())&&(!s.boxSelectionEnabled()||+new Date-r.hoverData.downTime>=t.panOrBoxSelectDelay)&&Math.abs(c[3]-c[1])+Math.abs(c[2]-c[0])<4&&s.panningEnabled()&&s.userPanningEnabled())r.hoverData.dragging=!0,c[4]=0;else{if(s.boxSelectionEnabled()&&Math.pow(c[2]-c[0],2)+Math.pow(c[3]-c[1],2)>7&&c[4]&&(clearTimeout(r.bgActiveTimeout),r.data.bgActivePosistion=void 0,r.data.canvasNeedsRedraw[t.SELECT_BOX]=!0,r.redraw()),p&&p.isEdge()&&p.active()&&p.unactivate(),u!=d&&(d&&(d.trigger(new e.Event(n,{type:"mouseout",cyPosition:{x:l[0],y:l[1]}})),d.trigger(new e.Event(n,{type:"tapdragout",cyPosition:{x:l[0],y:l[1]}}))),u&&(u.trigger(new e.Event(n,{type:"mouseover",cyPosition:{x:l[0],y:l[1]}})),u.trigger(new e.Event(n,{type:"tapdragover",cyPosition:{x:l[0],y:l[1]}}))),r.hoverData.last=u),p&&p.isNode()&&r.nodeIsDraggable(p)){r.dragData.didDrag||(r.data.canvasNeedsRedraw[t.NODE]=!0),r.dragData.didDrag=!0,r.hoverData.draggingEles=!0;for(var y=[],m=0;m<g.length;m++){var b=g[m];if(b.isNode()&&r.nodeIsDraggable(b)){var x=b._private.position;y.push(b),e.is.number(h[0])&&e.is.number(h[1])&&(x.x+=h[0],x.y+=h[1])}}var w=new e.Collection(s,y);w.updateCompoundBounds(),w.trigger("position drag"),r.data.canvasNeedsRedraw[t.DRAG]=!0,r.redraw()}i=!0}return c[2]=l[0],c[3]=l[1],i?(n.stopPropagation&&n.stopPropagation(),n.preventDefault&&n.preventDefault(),!1):void 0},1e3/30),!1),r.registerBinding(window,"mouseup",function(n){var i=r.hoverData.capture;if(i){r.hoverData.capture=!1;var o=r.data.cy,s=r.projectIntoViewport(n.clientX,n.clientY),l=r.data.select,c=r.findNearestElement(s[0],s[1],!0),u=r.dragData.possibleDragElements,d=r.hoverData.down,p=n.shiftKey;if(r.data.bgActivePosistion&&(r.data.canvasNeedsRedraw[t.SELECT_BOX]=!0,r.redraw()),r.data.bgActivePosistion=void 0,clearTimeout(r.bgActiveTimeout),r.hoverData.cxtStarted=!1,r.hoverData.draggingEles=!1,d&&d.unactivate(),3===r.hoverData.which){var h=new e.Event(n,{type:"cxttapend",cyPosition:{x:s[0],y:s[1]}});if(d?d.trigger(h):o.trigger(h),!r.hoverData.cxtDragged){var g=new e.Event(n,{type:"cxttap",cyPosition:{x:s[0],y:s[1]}});d?d.trigger(g):o.trigger(g)}r.hoverData.cxtDragged=!1,r.hoverData.which=null}else{if(null!=d||r.dragData.didDrag||Math.pow(l[2]-l[0],2)+Math.pow(l[3]-l[1],2)>7&&l[4]||r.hoverData.dragging||(o.$(":selected").unselect(),u.length>0&&(r.data.canvasNeedsRedraw[t.NODE]=!0),r.dragData.possibleDragElements=u=[]),null!=c?c.trigger(new e.Event(n,{type:"mouseup",cyPosition:{x:s[0],y:s[1]}})).trigger(new e.Event(n,{type:"tapend",cyPosition:{x:s[0],y:s[1]}})).trigger(new e.Event(n,{type:"vmouseup",cyPosition:{x:s[0],y:s[1]}})):null==c&&o.trigger(new e.Event(n,{type:"mouseup",cyPosition:{x:s[0],y:s[1]}})).trigger(new e.Event(n,{type:"tapend",cyPosition:{x:s[0],y:s[1]}})).trigger(new e.Event(n,{type:"vmouseup",cyPosition:{x:s[0],y:s[1]}})),Math.pow(l[2]-l[0],2)+Math.pow(l[3]-l[1],2)===0&&(null!=c?c.trigger(new e.Event(n,{type:"click",cyPosition:{x:s[0],y:s[1]}})).trigger(new e.Event(n,{type:"tap",cyPosition:{x:s[0],y:s[1]}})).trigger(new e.Event(n,{type:"vclick",cyPosition:{x:s[0],y:s[1]}})):null==c&&o.trigger(new e.Event(n,{type:"click",cyPosition:{x:s[0],y:s[1]}})).trigger(new e.Event(n,{type:"tap",cyPosition:{x:s[0],y:s[1]}})).trigger(new e.Event(n,{type:"vclick",cyPosition:{x:s[0],y:s[1]}}))),c!=d||r.dragData.didDrag){if(c==d&&null!=c&&c._private.grabbed){for(var v=o.$(":grabbed"),f=0;f<v.length;f++){var y=v[f];y._private.grabbed=!1;for(var m=y._private.edges,b=0;b<m.length;b++)m[b]._private.rscratch.inDragLayer=!1;a(y,!1)}c.trigger("free")}}else null!=c&&c._private.selectable&&("additive"===o.selectionType()||p?c.selected()?c.unselect():c.select():p||(o.$(":selected").not(c).unselect(),c.select()),a(c,!1),r.data.canvasNeedsRedraw[t.NODE]=!0);if(o.boxSelectionEnabled()&&Math.pow(l[2]-l[0],2)+Math.pow(l[3]-l[1],2)>7&&l[4]){var x=[],w=r.getAllInBox(l[0],l[1],l[2],l[3]);r.data.canvasNeedsRedraw[t.SELECT_BOX]=!0,w.length>0&&(r.data.canvasNeedsRedraw[t.NODE]=!0);for(var f=0;f<w.length;f++)w[f]._private.selectable&&x.push(w[f]);var _=new e.Collection(o,x);"additive"===o.selectionType()?_.select():(p||o.$(":selected").not(_).unselect(),_.select()),0===x.length&&r.redraw()}if(r.hoverData.dragging&&(r.data.canvasNeedsRedraw[t.SELECT_BOX]=!0,r.redraw()),r.hoverData.dragging=!1,!l[4]){r.data.canvasNeedsRedraw[t.DRAG]=!0,r.data.canvasNeedsRedraw[t.NODE]=!0;for(var f=0;f<u.length;f++)if("nodes"==u[f]._private.group){u[f]._private.rscratch.inDragLayer=!1,u[f]._private.grabbed=!1;for(var m=u[f]._private.edges,b=0;b<m.length;b++)m[b]._private.rscratch.inDragLayer=!1;a(u[f],!1)}else"edges"==u[f]._private.group&&(u[f]._private.rscratch.inDragLayer=!1);d&&d.trigger("free")}}l[4]=0,r.hoverData.down=null,r.dragData.didDrag=!1}},!1);var c=function(e){var n=r.data.cy,i=r.projectIntoViewport(e.clientX,e.clientY),a=[i[0]*n.zoom()+n.pan().x,i[1]*n.zoom()+n.pan().y];if(r.hoverData.draggingEles||r.hoverData.dragging||r.hoverData.cxtStarted||l())return void e.preventDefault();if(n.panningEnabled()&&n.userPanningEnabled()&&n.zoomingEnabled()&&n.userZoomingEnabled()){e.preventDefault(),r.data.wheelZooming=!0,clearTimeout(r.data.wheelTimeout),r.data.wheelTimeout=setTimeout(function(){r.data.wheelZooming=!1,r.data.canvasNeedsRedraw[t.NODE]=!0,r.redraw()},150);var o=e.wheelDeltaY/1e3||e.wheelDelta/1e3||e.detail/-32||-e.deltaY/500;n.zoom({level:n.zoom()*Math.pow(10,o),renderedPosition:{x:a[0],y:a[1]}})}};r.registerBinding(r.data.container,"wheel",c,!0),r.registerBinding(r.data.container,"mousewheel",c,!0),r.registerBinding(r.data.container,"DOMMouseScroll",c,!0),r.registerBinding(r.data.container,"MozMousePixelScroll",function(){},!1),r.registerBinding(r.data.container,"mouseout",function(t){var n=r.projectIntoViewport(t.clientX,t.clientY);r.data.cy.trigger(new e.Event(t,{type:"mouseout",cyPosition:{x:n[0],y:n[1]}}))},!1),r.registerBinding(r.data.container,"mouseover",function(t){var n=r.projectIntoViewport(t.clientX,t.clientY);r.data.cy.trigger(new e.Event(t,{type:"mouseover",cyPosition:{x:n[0],y:n[1]}}))},!1);var u,d,p,h,g,v,f,y,m,b,x,w,_=function(e,t,r,n){return Math.sqrt((r-e)*(r-e)+(n-t)*(n-t))};r.registerBinding(r.data.container,"touchstart",function(o){clearTimeout(this.threeFingerSelectTimeout),o.target!==r.data.link&&o.preventDefault(),r.touchData.capture=!0,r.data.bgActivePosistion=void 0;var s=r.data.cy,l=r.getCachedNodes(),c=r.getCachedEdges(),E=r.touchData.now,S=r.touchData.earlier;if(o.touches[0]){var P=r.projectIntoViewport(o.touches[0].clientX,o.touches[0].clientY);E[0]=P[0],E[1]=P[1]}if(o.touches[1]){var P=r.projectIntoViewport(o.touches[1].clientX,o.touches[1].clientY);E[2]=P[0],E[3]=P[1]}if(o.touches[2]){var P=r.projectIntoViewport(o.touches[2].clientX,o.touches[2].clientY);E[4]=P[0],E[5]=P[1]}if(o.touches[1]){var k=function(e){for(var t=0;t<e.length;t++)e[t]._private.grabbed=!1,e[t]._private.rscratch.inDragLayer=!1,e[t].active()&&e[t].unactivate()};k(l),k(c);var C=r.findContainerClientCoords();y=C[0],m=C[1],b=C[2],x=C[3],u=o.touches[0].clientX-y,d=o.touches[0].clientY-m,p=o.touches[1].clientX-y,h=o.touches[1].clientY-m,w=u>=0&&b>=u&&p>=0&&b>=p&&d>=0&&x>=d&&h>=0&&x>=h;var D=s.pan(),N=s.zoom();if(g=_(u,d,p,h),v=[(u+p)/2,(d+h)/2],f=[(v[0]-D.x)/N,(v[1]-D.y)/N],200>g&&!o.touches[2]){var T=r.findNearestElement(E[0],E[1],!0),M=r.findNearestElement(E[2],E[3],!0);return T&&T.isNode()?(T.activate().trigger(new e.Event(o,{type:"cxttapstart",cyPosition:{x:E[0],y:E[1]}})),r.touchData.start=T):M&&M.isNode()?(M.activate().trigger(new e.Event(o,{type:"cxttapstart",cyPosition:{x:E[0],y:E[1]}})),r.touchData.start=M):(s.trigger(new e.Event(o,{type:"cxttapstart",cyPosition:{x:E[0],y:E[1]}})),r.touchData.start=null),r.touchData.start&&(r.touchData.start._private.grabbed=!1),r.touchData.cxt=!0,r.touchData.cxtDragged=!1,r.data.bgActivePosistion=void 0,void r.redraw()}}if(o.touches[2]);else if(o.touches[1]);else if(o.touches[0]){var I=r.findNearestElement(E[0],E[1],!0);if(null!=I){if(I.activate(),r.touchData.start=I,"nodes"==I._private.group&&r.nodeIsDraggable(I)){var z=r.dragData.touchDragEles=[];if(i(I,z),I.trigger("grab"),r.data.canvasNeedsRedraw[t.NODE]=!0,r.data.canvasNeedsRedraw[t.DRAG]=!0,I.selected()){z=r.dragData.touchDragEles=[];for(var B=s.$("node:selected"),R=0;R<B.length;R++){var X=B[R];if(r.nodeIsDraggable(X)){z.push(X),X._private.rscratch.inDragLayer=!0;for(var L=X._private.edges,O=0;O<L.length;O++)L[O]._private.rscratch.inDragLayer=!0;("auto"==X._private.style.width.value||"auto"==X._private.style.height.value)&&n(X,!1,z),a(X,!0)}}}else("auto"==I._private.style.width.value||"auto"==I._private.style.height.value)&&n(I,!0,z),a(I,!0)}I.trigger(new e.Event(o,{type:"touchstart",cyPosition:{x:E[0],y:E[1]}})).trigger(new e.Event(o,{type:"tapstart",cyPosition:{x:E[0],y:E[1]}})).trigger(new e.Event(o,{type:"vmousdown",cyPosition:{x:E[0],y:E[1]}}))}null==I&&(s.trigger(new e.Event(o,{type:"touchstart",cyPosition:{x:E[0],y:E[1]}})).trigger(new e.Event(o,{type:"tapstart",cyPosition:{x:E[0],y:E[1]}})).trigger(new e.Event(o,{type:"vmousedown",cyPosition:{x:E[0],y:E[1]}})),r.data.bgActivePosistion={x:P[0],y:P[1]},r.data.canvasNeedsRedraw[t.SELECT_BOX]=!0,r.redraw());for(var Y=0;Y<E.length;Y++)S[Y]=E[Y],r.touchData.startPosition[Y]=E[Y];r.touchData.singleTouchMoved=!1,r.touchData.singleTouchStartTime=+new Date,setTimeout(function(){r.touchData.singleTouchMoved===!1&&+new Date-r.touchData.singleTouchStartTime>250&&(r.touchData.start?r.touchData.start.trigger(new e.Event(o,{type:"taphold",cyPosition:{x:E[0],y:E[1]}})):(r.data.cy.trigger(new e.Event(o,{type:"taphold",cyPosition:{x:E[0],y:E[1]}})),s.$(":selected").unselect()))},1e3)}},!1),r.registerBinding(window,"touchmove",e.util.throttle(function(n){var i=r.data.select,a=r.touchData.capture;a&&n.preventDefault();var o=r.data.cy,s=r.touchData.now,l=r.touchData.earlier;if(n.touches[0]){var c=r.projectIntoViewport(n.touches[0].clientX,n.touches[0].clientY);s[0]=c[0],s[1]=c[1]}if(n.touches[1]){var c=r.projectIntoViewport(n.touches[1].clientX,n.touches[1].clientY);s[2]=c[0],s[3]=c[1]}if(n.touches[2]){var c=r.projectIntoViewport(n.touches[2].clientX,n.touches[2].clientY);s[4]=c[0],s[5]=c[1]}for(var v=[],b=0;b<s.length;b++)v[b]=s[b]-l[b];if(a&&r.touchData.cxt){var x=n.touches[0].clientX-y,E=n.touches[0].clientY-m,S=n.touches[1].clientX-y,P=n.touches[1].clientY-m,k=_(x,E,S,P),C=k/g;if(C>=1.5||k>=150){r.touchData.cxt=!1,r.touchData.start&&(r.touchData.start.unactivate(),r.touchData.start=null),r.data.bgActivePosistion=void 0,r.data.canvasNeedsRedraw[t.SELECT_BOX]=!0;var D=new e.Event(n,{type:"cxttapend",cyPosition:{x:s[0],y:s[1]}});r.touchData.start?r.touchData.start.trigger(D):o.trigger(D)}}if(a&&r.touchData.cxt){var D=new e.Event(n,{type:"cxtdrag",cyPosition:{x:s[0],y:s[1]}});r.data.bgActivePosistion=void 0,r.data.canvasNeedsRedraw[t.SELECT_BOX]=!0,r.touchData.start?r.touchData.start.trigger(D):o.trigger(D),r.touchData.start&&(r.touchData.start._private.grabbed=!1),r.touchData.cxtDragged=!0;var N=r.findNearestElement(s[0],s[1],!0);r.touchData.cxtOver&&N===r.touchData.cxtOver||(r.touchData.cxtOver&&r.touchData.cxtOver.trigger(new e.Event(n,{type:"cxtdragout",cyPosition:{x:s[0],y:s[1]}})),r.touchData.cxtOver=N,N&&N.trigger(new e.Event(n,{type:"cxtdragover",cyPosition:{x:s[0],y:s[1]}})))}else if(a&&n.touches[2]&&o.boxSelectionEnabled())r.data.bgActivePosistion=void 0,clearTimeout(this.threeFingerSelectTimeout),this.lastThreeTouch=+new Date,r.data.canvasNeedsRedraw[t.SELECT_BOX]=!0,i&&0!==i.length&&void 0!==i[0]?(i[2]=(s[0]+s[2]+s[4])/3,i[3]=(s[1]+s[3]+s[5])/3):(i[0]=(s[0]+s[2]+s[4])/3,i[1]=(s[1]+s[3]+s[5])/3,i[2]=(s[0]+s[2]+s[4])/3+1,i[3]=(s[1]+s[3]+s[5])/3+1),i[4]=1,r.redraw();else if(a&&n.touches[1]&&o.zoomingEnabled()&&o.panningEnabled()&&o.userZoomingEnabled()&&o.userPanningEnabled()){r.data.bgActivePosistion=void 0,r.data.canvasNeedsRedraw[t.SELECT_BOX]=!0;var T=r.dragData.touchDragEles;if(T){r.data.canvasNeedsRedraw[t.DRAG]=!0;for(var M=0;M<T.length;M++)T[M]._private.grabbed=!1,T[M]._private.rscratch.inDragLayer=!1}var x=n.touches[0].clientX-y,E=n.touches[0].clientY-m,S=n.touches[1].clientX-y,P=n.touches[1].clientY-m,k=_(x,E,S,P),C=k/g;if(1!=C&&w){var I=x-u,z=E-d,B=S-p,R=P-h,X=(I+B)/2,L=(z+R)/2,O=o.zoom(),Y=O*C,V=o.pan(),A=f[0]*O+V.x,F=f[1]*O+V.y,q={x:-Y/O*(A-V.x-X)+A,y:-Y/O*(F-V.y-L)+F};if(r.touchData.start){var T=r.dragData.touchDragEles;if(T)for(var M=0;M<T.length;M++)T[M]._private.grabbed=!1,T[M]._private.rscratch.inDragLayer=!1;r.touchData.start._private.active=!1,r.touchData.start._private.grabbed=!1,r.touchData.start._private.rscratch.inDragLayer=!1,r.data.canvasNeedsRedraw[t.DRAG]=!0,r.touchData.start.trigger("free").trigger("unactivate")}o.viewport({zoom:Y,pan:q}),g=k,u=x,d=E,p=S,h=P,r.pinching=!0}if(n.touches[0]){var c=r.projectIntoViewport(n.touches[0].clientX,n.touches[0].clientY);s[0]=c[0],s[1]=c[1]}if(n.touches[1]){var c=r.projectIntoViewport(n.touches[1].clientX,n.touches[1].clientY);s[2]=c[0],s[3]=c[1]}if(n.touches[2]){var c=r.projectIntoViewport(n.touches[2].clientX,n.touches[2].clientY);s[4]=c[0],s[5]=c[1]}}else if(n.touches[0]){var j=r.touchData.start,H=r.touchData.last,N=N||r.findNearestElement(s[0],s[1],!0);if(null!=j&&"nodes"==j._private.group&&r.nodeIsDraggable(j)){for(var T=r.dragData.touchDragEles,W=0;W<T.length;W++){var Z=T[W];if(r.nodeIsDraggable(Z)){r.dragData.didDrag=!0;var $=Z._private.position;$.x+=v[0],$.y+=v[1]}}var U=new e.Collection(o,Z);U.updateCompoundBounds(),U.trigger("position drag"),r.hoverData.draggingEles=!0,r.data.canvasNeedsRedraw[t.DRAG]=!0,r.touchData.startPosition[0]==l[0]&&r.touchData.startPosition[1]==l[1]&&(r.data.canvasNeedsRedraw[t.NODE]=!0),r.redraw()}null!=j&&(j.trigger(new e.Event(n,{type:"touchmove",cyPosition:{x:s[0],y:s[1]}})),j.trigger(new e.Event(n,{type:"tapdrag",cyPosition:{x:s[0],y:s[1]}})),j.trigger(new e.Event(n,{type:"vmousemove",cyPosition:{x:s[0],y:s[1]}}))),null==j&&(null!=N&&(N.trigger(new e.Event(n,{type:"touchmove",cyPosition:{x:s[0],y:s[1]}})),N.trigger(new e.Event(n,{type:"tapdrag",cyPosition:{x:s[0],y:s[1]}})),N.trigger(new e.Event(n,{type:"vmousemove",cyPosition:{x:s[0],y:s[1]}}))),null==N&&(o.trigger(new e.Event(n,{type:"touchmove",cyPosition:{x:s[0],y:s[1]}})),o.trigger(new e.Event(n,{type:"tapdrag",cyPosition:{x:s[0],y:s[1]}})),o.trigger(new e.Event(n,{type:"vmousemove",cyPosition:{x:s[0],y:s[1]}})))),N!=H&&(H&&H.trigger(new e.Event(n,{type:"tapdragout",cyPosition:{x:s[0],y:s[1]}})),N&&N.trigger(new e.Event(n,{type:"tapdragover",cyPosition:{x:s[0],y:s[1]}}))),r.touchData.last=N;for(var M=0;M<s.length;M++)s[M]&&r.touchData.startPosition[M]&&Math.abs(s[M]-r.touchData.startPosition[M])>4&&(r.touchData.singleTouchMoved=!0);if(a&&(null==j||j.isEdge())&&o.panningEnabled()&&o.userPanningEnabled()){j&&(j.unactivate(),r.data.bgActivePosistion||(r.data.bgActivePosistion={x:s[0],y:s[1]}),r.data.canvasNeedsRedraw[t.SELECT_BOX]=!0,r.touchData.start=null),o.panBy({x:v[0]*o.zoom(),y:v[1]*o.zoom()}),r.swipePanning=!0;var c=r.projectIntoViewport(n.touches[0].clientX,n.touches[0].clientY);s[0]=c[0],s[1]=c[1]}}for(var b=0;b<s.length;b++)l[b]=s[b]},1e3/30),!1),r.registerBinding(window,"touchcancel",function(){var e=r.touchData.start;r.touchData.capture=!1,e&&e.unactivate()}),r.registerBinding(window,"touchend",function(n){var i=r.touchData.start,o=r.touchData.capture;if(o){r.touchData.capture=!1,n.preventDefault();var s=r.data.select;r.swipePanning=!1,r.hoverData.draggingEles=!1;var l=r.data.cy,c=r.touchData.now,u=r.touchData.earlier;if(n.touches[0]){var d=r.projectIntoViewport(n.touches[0].clientX,n.touches[0].clientY);c[0]=d[0],c[1]=d[1]}if(n.touches[1]){var d=r.projectIntoViewport(n.touches[1].clientX,n.touches[1].clientY);c[2]=d[0],c[3]=d[1]}if(n.touches[2]){var d=r.projectIntoViewport(n.touches[2].clientX,n.touches[2].clientY);c[4]=d[0],c[5]=d[1]}i&&i.unactivate();var p;if(r.touchData.cxt){if(p=new e.Event(n,{type:"cxttapend",cyPosition:{x:c[0],y:c[1]}}),i?i.trigger(p):l.trigger(p),!r.touchData.cxtDragged){var h=new e.Event(n,{type:"cxttap",cyPosition:{x:c[0],y:c[1]}});i?i.trigger(h):l.trigger(h)}return r.touchData.start&&(r.touchData.start._private.grabbed=!1),r.touchData.cxt=!1,r.touchData.start=null,void r.redraw()}if(!n.touches[2]&&l.boxSelectionEnabled()){clearTimeout(this.threeFingerSelectTimeout);var g=[],v=r.getAllInBox(s[0],s[1],s[2],s[3]);s[0]=void 0,s[1]=void 0,s[2]=void 0,s[3]=void 0,s[4]=0,r.data.canvasNeedsRedraw[t.SELECT_BOX]=!0;for(var f=0;f<v.length;f++)v[f]._private.selectable&&g.push(v[f]);var y=new e.Collection(l,g);"single"===l.selectionType()&&l.$(":selected").not(y).unselect(),y.select(),y.length>0?r.data.canvasNeedsRedraw[t.NODE]=!0:r.redraw()}n.touches.length<2&&(r.pinching=!1,r.data.canvasNeedsRedraw[t.NODE]=!0,r.redraw());var m=!1;if(null!=i&&(i._private.active=!1,m=!0,i.unactivate()),n.touches[2])r.data.bgActivePosistion=void 0,r.data.canvasNeedsRedraw[t.SELECT_BOX]=!0;else if(n.touches[1]);else if(n.touches[0]);else if(!n.touches[0]){if(r.data.bgActivePosistion=void 0,r.data.canvasNeedsRedraw[t.SELECT_BOX]=!0,null!=i){i._private.grabbed&&(i._private.grabbed=!1,i.trigger("free"),i._private.rscratch.inDragLayer=!1);for(var b=i._private.edges,x=0;x<b.length;x++)b[x]._private.rscratch.inDragLayer=!1;if(a(i,!1),i.selected())for(var w=l.$("node:selected"),_=0;_<w.length;_++){var E=w[_];E._private.rscratch.inDragLayer=!1,E._private.grabbed=!1;for(var b=E._private.edges,x=0;x<b.length;x++)b[x]._private.rscratch.inDragLayer=!1;a(E,!1)}r.data.canvasNeedsRedraw[t.DRAG]=!0,r.data.canvasNeedsRedraw[t.NODE]=!0,i.trigger(new e.Event(n,{type:"touchend",cyPosition:{x:c[0],y:c[1]}})).trigger(new e.Event(n,{type:"tapend",cyPosition:{x:c[0],y:c[1]}})).trigger(new e.Event(n,{type:"vmouseup",cyPosition:{x:c[0],y:c[1]}})),i.unactivate(),r.touchData.start=null}else{var S=r.findNearestElement(c[0],c[1],!0);null!=S&&S.trigger(new e.Event(n,{type:"touchend",cyPosition:{x:c[0],y:c[1]}})).trigger(new e.Event(n,{type:"tapend",cyPosition:{x:c[0],y:c[1]}})).trigger(new e.Event(n,{type:"vmouseup",cyPosition:{x:c[0],y:c[1]}})),null==S&&l.trigger(new e.Event(n,{type:"touchend",cyPosition:{x:c[0],y:c[1]}})).trigger(new e.Event(n,{type:"tapend",cyPosition:{x:c[0],y:c[1]}})).trigger(new e.Event(n,{type:"vmouseup",cyPosition:{x:c[0],y:c[1]}}))}null!=i&&!r.dragData.didDrag&&i._private.selectable&&Math.sqrt(Math.pow(r.touchData.startPosition[0]-c[0],2)+Math.pow(r.touchData.startPosition[1]-c[1],2))<6&&("single"===l.selectionType()?(l.$(":selected").not(i).unselect(),i.select()):i.selected()?i.unselect():i.select(),m=!0,r.data.canvasNeedsRedraw[t.NODE]=!0),r.touchData.singleTouchMoved===!1&&(i?i.trigger(new e.Event(n,{type:"tap",cyPosition:{x:c[0],y:c[1]}})).trigger(new e.Event(n,{type:"vclick",cyPosition:{x:c[0],y:c[1]}})):l.trigger(new e.Event(n,{type:"tap",cyPosition:{x:c[0],y:c[1]}})).trigger(new e.Event(n,{type:"vclick",cyPosition:{x:c[0],y:c[1]}}))),r.touchData.singleTouchMoved=!0}for(var x=0;x<c.length;x++)u[x]=c[x];r.dragData.didDrag=!1,m&&i&&i.updateStyle(!1)}},!1)}}(cytoscape),function(e){"use strict";for(var t=e("renderer","canvas"),r=t.prototype,n=t.usePaths(),i=t.nodeShapes={},a=Math.sin(0),o=Math.cos(0),s={},l={},c=.1,u=0*Math.PI;u<2*Math.PI;u+=c)s[u]=Math.sin(u),l[u]=Math.cos(u);i.ellipse={draw:function(e,t,r,n,a){i.ellipse.drawPath(e,t,r,n,a),e.fill()},drawPath:function(e,t,r,i,u){if(n){e.beginPath&&e.beginPath();for(var d,p,h=i/2,g=u/2,v=0*Math.PI;v<2*Math.PI;v+=c)d=t-h*s[v]*a+h*l[v]*o,p=r+g*l[v]*a+g*s[v]*o,0===v?e.moveTo(d,p):e.lineTo(d,p);e.closePath()}else e.beginPath&&e.beginPath(),e.translate(t,r),e.scale(i/2,u/2),e.arc(0,0,1,0,2*Math.PI*.999,!1),e.closePath(),e.scale(2/i,2/u),e.translate(-t,-r)},intersectLine:function(t,r,n,i,a,o,s){var l=e.math.intersectLineEllipse(a,o,t,r,n/2+s,i/2+s);return l},intersectBox:function(t,r,n,i,a,o,s,l,c){return e.math.boxIntersectEllipse(t,r,n,i,c,a,o,s,l)},checkPointRough:function(){return!0},checkPoint:function(e,t,r,n,i,a,o){return e-=a,t-=o,e/=n/2+r,t/=i/2+r,Math.pow(e,2)+Math.pow(t,2)<=1}},i.triangle={points:e.math.generateUnitNgonPointsFitToSquare(3,0),draw:function(e,t,n,a,o){r.drawPolygon(e,t,n,a,o,i.triangle.points)},drawPath:function(e,t,n,a,o){r.drawPolygonPath(e,t,n,a,o,i.triangle.points)},intersectLine:function(t,r,n,a,o,s,l){return e.math.polygonIntersectLine(o,s,i.triangle.points,t,r,n/2,a/2,l)},intersectBox:function(t,r,n,a,o,s,l,c,u){var d=i.triangle.points;return e.math.boxIntersectPolygon(t,r,n,a,d,o,s,l,c,[0,-1],u)},checkPointRough:function(t,r,n,a,o,s,l){return e.math.checkInBoundingBox(t,r,i.triangle.points,n,a,o,s,l)},checkPoint:function(t,r,n,a,o,s,l){return e.math.pointInsidePolygon(t,r,i.triangle.points,s,l,a,o,[0,-1],n)}},i.square={points:e.math.generateUnitNgonPointsFitToSquare(4,0),draw:function(e,t,n,a,o){r.drawPolygon(e,t,n,a,o,i.square.points)},drawPath:function(e,t,n,a,o){r.drawPolygonPath(e,t,n,a,o,i.square.points)},intersectLine:function(t,r,n,a,o,s,l){return e.math.polygonIntersectLine(o,s,i.square.points,t,r,n/2,a/2,l)},intersectBox:function(t,r,n,a,o,s,l,c,u){var d=i.square.points;return e.math.boxIntersectPolygon(t,r,n,a,d,o,s,l,c,[0,-1],u)},checkPointRough:function(t,r,n,a,o,s,l){return e.math.checkInBoundingBox(t,r,i.square.points,n,a,o,s,l)},checkPoint:function(t,r,n,a,o,s,l){return e.math.pointInsidePolygon(t,r,i.square.points,s,l,a,o,[0,-1],n)}},i.rectangle=i.square,i.octogon={},i.roundrectangle={points:e.math.generateUnitNgonPointsFitToSquare(4,0),draw:function(e,t,n,i,a){r.drawRoundRectangle(e,t,n,i,a,10)},drawPath:function(e,t,n,i,a){r.drawRoundRectanglePath(e,t,n,i,a,10)},intersectLine:function(t,r,n,i,a,o,s){return e.math.roundRectangleIntersectLine(a,o,t,r,n,i,s)},intersectBox:function(t,r,n,i,a,o,s,l,c){return e.math.roundRectangleIntersectBox(t,r,n,i,a,o,s,l,c)},checkPointRough:function(t,r,n,a,o,s,l){return e.math.checkInBoundingBox(t,r,i.roundrectangle.points,n,a,o,s,l)},checkPoint:function(t,r,n,a,o,s,l){var c=e.math.getRoundRectangleRadius(a,o);if(e.math.pointInsidePolygon(t,r,i.roundrectangle.points,s,l,a,o-2*c,[0,-1],n))return!0;if(e.math.pointInsidePolygon(t,r,i.roundrectangle.points,s,l,a-2*c,o,[0,-1],n))return!0;var u=function(e,t,r,n,i,a,o){return e-=r,t-=n,e/=i/2+o,t/=a/2+o,Math.pow(e,2)+Math.pow(t,2)<=1};return u(t,r,s-a/2+c,l-o/2+c,2*c,2*c,n)?!0:u(t,r,s+a/2-c,l-o/2+c,2*c,2*c,n)?!0:u(t,r,s+a/2-c,l+o/2-c,2*c,2*c,n)?!0:u(t,r,s-a/2+c,l+o/2-c,2*c,2*c,n)?!0:!1}},i.pentagon={points:e.math.generateUnitNgonPointsFitToSquare(5,0),draw:function(e,t,n,a,o){r.drawPolygon(e,t,n,a,o,i.pentagon.points)},drawPath:function(e,t,n,a,o){r.drawPolygonPath(e,t,n,a,o,i.pentagon.points)},intersectLine:function(e,t,n,a,o,s,l){return r.polygonIntersectLine(o,s,i.pentagon.points,e,t,n/2,a/2,l)},intersectBox:function(t,r,n,a,o,s,l,c,u){var d=i.pentagon.points;return e.math.boxIntersectPolygon(t,r,n,a,d,o,s,l,c,[0,-1],u)},checkPointRough:function(t,r,n,a,o,s,l){return e.math.checkInBoundingBox(t,r,i.pentagon.points,n,a,o,s,l)},checkPoint:function(t,r,n,a,o,s,l){return e.math.pointInsidePolygon(t,r,i.pentagon.points,s,l,a,o,[0,-1],n)}},i.hexagon={points:e.math.generateUnitNgonPointsFitToSquare(6,0),draw:function(e,t,n,a,o){r.drawPolygon(e,t,n,a,o,i.hexagon.points)},drawPath:function(e,t,n,a,o){r.drawPolygonPath(e,t,n,a,o,i.hexagon.points)},intersectLine:function(t,r,n,a,o,s,l){return e.math.polygonIntersectLine(o,s,i.hexagon.points,t,r,n/2,a/2,l)},intersectBox:function(t,r,n,a,o,s,l,c,u){var d=i.hexagon.points;return e.math.boxIntersectPolygon(t,r,n,a,d,o,s,l,c,[0,-1],u)},checkPointRough:function(t,r,n,a,o,s,l){return e.math.checkInBoundingBox(t,r,i.hexagon.points,n,a,o,s,l)},checkPoint:function(t,r,n,a,o,s,l){return e.math.pointInsidePolygon(t,r,i.hexagon.points,s,l,a,o,[0,-1],n)}},i.heptagon={points:e.math.generateUnitNgonPointsFitToSquare(7,0),draw:function(e,t,n,a,o){r.drawPolygon(e,t,n,a,o,i.heptagon.points)},drawPath:function(e,t,n,a,o){r.drawPolygonPath(e,t,n,a,o,i.heptagon.points)},intersectLine:function(e,t,n,a,o,s,l){return r.polygonIntersectLine(o,s,i.heptagon.points,e,t,n/2,a/2,l)},intersectBox:function(e,t,n,a,o,s,l,c,u){var d=i.heptagon.points;return r.boxIntersectPolygon(e,t,n,a,d,o,s,l,c,[0,-1],u)},checkPointRough:function(t,r,n,a,o,s,l){return e.math.checkInBoundingBox(t,r,i.heptagon.points,n,a,o,s,l)},checkPoint:function(t,r,n,a,o,s,l){return e.math.pointInsidePolygon(t,r,i.heptagon.points,s,l,a,o,[0,-1],n)}},i.octagon={points:e.math.generateUnitNgonPointsFitToSquare(8,0),draw:function(e,t,n,a,o){r.drawPolygon(e,t,n,a,o,i.octagon.points)},drawPath:function(e,t,n,a,o){r.drawPolygonPath(e,t,n,a,o,i.octagon.points)},intersectLine:function(e,t,n,a,o,s,l){return r.polygonIntersectLine(o,s,i.octagon.points,e,t,n/2,a/2,l)},intersectBox:function(e,t,n,a,o,s,l,c,u){var d=i.octagon.points;return r.boxIntersectPolygon(e,t,n,a,d,o,s,l,c,[0,-1],u)},checkPointRough:function(t,r,n,a,o,s,l){return e.math.checkInBoundingBox(t,r,i.octagon.points,n,a,o,s,l)},checkPoint:function(t,r,n,a,o,s,l){return e.math.pointInsidePolygon(t,r,i.octagon.points,s,l,a,o,[0,-1],n)}};var d=new Array(20),p=e.math.generateUnitNgonPoints(5,0),h=e.math.generateUnitNgonPoints(5,Math.PI/5),g=.5*(3-Math.sqrt(5));g*=1.57;for(var u=0;u<h.length/2;u++)h[2*u]*=g,h[2*u+1]*=g;for(var u=0;5>u;u++)d[4*u]=p[2*u],d[4*u+1]=p[2*u+1],d[4*u+2]=h[2*u],d[4*u+3]=h[2*u+1];d=e.math.fitPolygonToSquare(d),i.star5=i.star={points:d,draw:function(e,t,n,a,o){r.drawPolygon(e,t,n,a,o,i.star5.points)},drawPath:function(e,t,n,a,o){r.drawPolygonPath(e,t,n,a,o,i.star5.points)},intersectLine:function(e,t,n,a,o,s,l){return r.polygonIntersectLine(o,s,i.star5.points,e,t,n/2,a/2,l)},intersectBox:function(e,t,n,a,o,s,l,c,u){var d=i.star5.points;return r.boxIntersectPolygon(e,t,n,a,d,o,s,l,c,[0,-1],u)},checkPointRough:function(t,r,n,a,o,s,l){return e.math.checkInBoundingBox(t,r,i.star5.points,n,a,o,s,l)},checkPoint:function(t,r,n,a,o,s,l){return e.math.pointInsidePolygon(t,r,i.star5.points,s,l,a,o,[0,-1],n)}}}(cytoscape),function(e){"use strict";function t(t){this.options=e.util.extend({},r,t)}var r={liveUpdate:!0,ready:void 0,stop:void 0,maxSimulationTime:4e3,fit:!0,padding:[50,50,50,50],simulationBounds:void 0,ungrabifyWhileSimulating:!0,repulsion:void 0,stiffness:void 0,friction:void 0,gravity:!0,fps:void 0,precision:void 0,nodeMass:void 0,edgeLength:void 0,stepSize:1,stableEnergy:function(e){var t=e;return t.max<=.5||t.mean<=.3}};t.prototype.run=function(){function t(e,t){return null==t?void 0:"function"==typeof t?t.apply(e,[e._private.data,{nodes:o.length,edges:s.length,element:e}]):t}function r(e){var t=e.x,r=e.y,n=c,i=u,a=-2,o=2,s=4;return{x:t/n*s+a,y:r/i*s+o}}function n(e){i.fit&&a.fit(),e()}var i=this.options,a=i.cy,o=a.nodes(),s=a.edges(),l=a.container(),c=l.clientWidth,u=l.clientHeight,d=i.simulationBounds;i.simulationBounds?(c=d[2]-d[0],u=d[3]-d[1]):i.simulationBounds=[0,0,c,u];var p=i.simulationBounds;if(p.x1=p[0],p.y1=p[1],p.x2=p[2],p.y2=p[3],a.nodes().size()<=1)return i.fit&&a.reset(),a.nodes().position({x:Math.round((p.x1+p.x2)/2),y:Math.round((p.y1+p.y2)/2)}),a.one("layoutready",i.ready),a.trigger("layoutready"),a.one("layoutstop",i.stop),void a.trigger("layoutstop");var h=this.system=arbor.ParticleSystem(i.repulsion,i.stiffness,i.friction,i.gravity,i.fps,i.dt,i.precision);this.system=h,i.liveUpdate&&i.fit&&a.reset();var g,v=250,f=!1,y=+new Date,m={init:function(){},redraw:function(){var t=h.energy();if(null!=i.stableEnergy&&null!=t&&t.n>0&&i.stableEnergy(t))return void h.stop();clearTimeout(g),g=setTimeout(w,v);var r=[];h.eachNode(function(e,t){var n=e.data,i=n.element;null!=i&&(i.locked()||i.grabbed()||(i.silentPosition({x:p.x1+t.x,y:p.y1+t.y}),r.push(i)))});var n=+new Date-y>=16;i.liveUpdate&&r.length>0&&n&&(new e.Collection(a,r).rtrigger("position"),y=+new Date),f||(f=!0,a.one("layoutready",i.ready),a.trigger("layoutready"))}};h.renderer=m,h.screenSize(c,u),h.screenPadding(i.padding[0],i.padding[1],i.padding[2],i.padding[3]),h.screenStep(i.stepSize);var b=function(e){var t=h.fromScreen(this.position()),r=arbor.Point(t.x,t.y);switch(this.scratch().arbor.p=r,e.type){case"grab":this.scratch().arbor.fixed=!0;
break;case"free":this.scratch().arbor.fixed=!1}};o.bind("grab drag free",b),o.each(function(e,n){if(!this.isFullAutoParent()){var a=this._private.data.id,o=t(this,i.nodeMass),s=this._private.locked;if(!n.isFullAutoParent()){var l=r({x:n.position().x,y:n.position().y});n.locked()||(this.scratch().arbor=h.addNode(a,{element:this,mass:o,fixed:s,x:s?l.x:void 0,y:s?l.y:void 0}))}}}),s.each(function(){var e=this.source().id(),r=this.target().id(),n=t(this,i.edgeLength);this.scratch().arbor=h.addEdge(e,r,{length:n})});var x=o.filter(":grabbable");i.ungrabifyWhileSimulating&&x.ungrabify();var w=function(){function e(){i.liveUpdate||(i.fit&&a.reset(),a.nodes().rtrigger("position")),o.unbind("grab drag free",b),i.ungrabifyWhileSimulating&&x.grabify(),a.one("layoutstop",i.stop),a.trigger("layoutstop")}window.isIE?n(function(){e()}):e()};h.start(),null!=i.maxSimulationTime&&i.maxSimulationTime>0&&1/0!==i.maxSimulationTime&&setTimeout(function(){h.stop()},i.maxSimulationTime)},t.prototype.stop=function(){null!=this.system&&system.stop()},e("layout","arbor",t)}(cytoscape),function(e){"use strict";function t(t){this.options=e.util.extend({},r,t)}var r={fit:!0,ready:void 0,stop:void 0,directed:!1,padding:30,circle:!1,roots:void 0,maximalAdjustments:0};t.prototype.run=function(){var t,r=this.options,n=r,i=r.cy,a=i.nodes(),o=i.edges(),s=a.add(o),l=i.container(),c=l.clientWidth,u=l.clientHeight;if(e.is.elementOrCollection(n.roots))t=n.roots;else if(e.is.array(n.roots)){for(var d=[],p=0;p<n.roots.length;p++){var h=n.roots[p],g=i.getElementById(h);d.push(g)}t=new e.Collection(i,d)}else if(e.is.string(n.roots))t=i.$(n.roots);else if(n.directed)t=a.roots();else{var v=a.maxDegree(!1);t=a.filter(function(){return this.degree()===v})}var f=[],y={},m={};s.bfs(t,function(e,t){var r=this[0];f[t]||(f[t]=[]),f[t].push(r),y[r.id()]=!0,m[r.id()]=t},n.directed);for(var b=[],p=0;p<a.length;p++){var g=a[p];y[g.id()]||b.push(g)}for(var x=3*b.length,w=0;0!==b.length&&x>w;){for(var _=b.shift(),E=_.neighborhood().nodes(),S=!1,p=0;p<E.length;p++){var P=m[E[p].id()];if(void 0!==P){f[P].push(_),S=!0;break}}S||b.push(_),w++}for(;0!==b.length;){var _=b.shift(),S=!1;S||(0===f.length&&f.push([]),f[0].push(_))}var k=function(){for(var e=0;e<f.length;e++)for(var t=f[e],r=0;r<t.length;r++){var n=t[r];n._private.scratch.BreadthFirstLayout={depth:e,index:r}}};k();for(var C=function(e){for(var t,r=e.connectedEdges(function(){return this.data("target")===e.id()}),n=e._private.scratch.BreadthFirstLayout,i=0,a=0;a<r.length;a++){var o=r[a],s=o.source()[0],l=s._private.scratch.BreadthFirstLayout;n.depth<=l.depth&&i<l.depth&&(i=l.depth,t=s)}return t},D=0;D<n.maximalAdjustments;D++){for(var N=f.length,T=[],p=0;N>p;p++)for(var P=f[p],M=P.length,I=0;M>I;I++){var g=P[I],z=g._private.scratch.BreadthFirstLayout,B=C(g);B&&(z.intEle=B,T.push(g))}for(var p=0;p<T.length;p++){var g=T[p],z=g._private.scratch.BreadthFirstLayout,B=z.intEle,R=B._private.scratch.BreadthFirstLayout;f[z.depth].splice(z.index,1);for(var X=R.depth+1;X>f.length-1;)f.push([]);f[X].push(g),z.depth=X,z.index=f[X].length-1}k()}for(var L=0,p=0;p<a.length;p++){var O=a[p].outerWidth(),Y=a[p].outerHeight();L=Math.max(L,O,Y)}L*=1.75;for(var V={},A=function(e){if(V[e.id()])return V[e.id()];for(var t=e._private.scratch.BreadthFirstLayout.depth,r=e.neighborhood().nodes(),n=0,i=0,a=0;a<r.length;a++){var o=r[a],s=o._private.scratch.BreadthFirstLayout.index,l=o._private.scratch.BreadthFirstLayout.depth,c=f[l].length;(t>l||0===t)&&(n+=s/c,i++)}return i=Math.max(1,i),n/=i,0===i&&(n=void 0),V[e.id()]=n,n},F=function(e,t){var r=A(e),n=A(t);return r-n},q=0;3>q;q++){for(var p=0;p<f.length;p++)f[p]=f[p].sort(F);k()}var j={x:c/2,y:u/2};a.positions(function(){var e=this[0],t=e._private.scratch.BreadthFirstLayout,r=t.depth,i=t.index,a=f[r].length,o=Math.max(c/(a+1),L),s=Math.max(u/(f.length+1),L),l=Math.min(c/2/f.length,u/2/f.length);if(l=Math.max(l,L),n.circle){var d=l*r+l-(f.length>0&&f[0].length<=3?l/2:0),p=2*Math.PI/f[r].length*i;return 0===r&&1===f[0].length&&(d=1),{x:j.x+d*Math.cos(p),y:j.y+d*Math.sin(p)}}return{x:j.x+(i+1-(a+1)/2)*o,y:(r+1)*s}}),r.fit&&i.fit(n.padding),i.one("layoutready",r.ready),i.trigger("layoutready"),i.one("layoutstop",r.stop),i.trigger("layoutstop")},t.prototype.stop=function(){},e("layout","breadthfirst",t)}(cytoscape),function(e){"use strict";function t(t){this.options=e.util.extend({},r,t)}var r={fit:!0,ready:void 0,stop:void 0,rStepSize:10,padding:30,startAngle:1.5*Math.PI,counterclockwise:!1};t.prototype.run=function(){function e(){var e=0,t=u,r={x:l.x+g*Math.cos(e),y:l.y+g*Math.sin(e)},n={x:l.x+g*Math.cos(t),y:l.y+g*Math.sin(t)},i=Math.sqrt((n.x-r.x)*(n.x-r.x)+(n.y-r.y)*(n.y-r.y));return i}for(var t=this.options,r=t,n=t.cy,i=n.nodes().filter(function(){return!this.isFullAutoParent()}),a=n.container(),o=a.clientWidth,s=a.clientHeight,l={x:o/2,y:s/2},c=r.startAngle,u=2*Math.PI/i.length,d=0,p=0;p<i.length;p++){var h=i[p];d=Math.max(h.outerWidth(),h.outerHeight())}for(var g=o/2-d;e()<d&&i.length>=2;)g+=r.rStepSize;var p=0;i.positions(function(){var e=g*Math.cos(c),t=g*Math.sin(c),n={x:l.x+e,y:l.y+t};return p++,c=r.counterclockwise?c-u:c+u,n}),t.fit&&n.fit(r.padding),n.one("layoutready",t.ready),n.trigger("layoutready"),n.one("layoutstop",t.stop),n.trigger("layoutstop")},t.prototype.stop=function(){},e("layout","circle",t)}(cytoscape),function(e){"use strict";function t(t){this.options=e.util.extend({},r,t)}var r={fit:!0,ready:void 0,stop:void 0,padding:30,startAngle:1.5*Math.PI,counterclockwise:!1,minNodeSpacing:10,height:void 0,width:void 0,concentric:function(){return this.degree()},levelWidth:function(e){return e.maxDegree()/4}};t.prototype.run=function(){for(var e=this.options,t=e,r=e.cy,n=r.nodes().filter(function(){return!this.isFullAutoParent()}),i=r.container(),a=void 0!==t.width?t.width:i.clientWidth,o=void 0!==t.height?t.height:i.clientHeight,s={x:a/2,y:o/2},l=[],c=t.startAngle,u=0,d=0;d<n.length;d++){var p,h=n[d];p=t.concentric.call(h),l.push({value:p,node:h}),h._private.layoutData.concentric=p}n.updateStyle();for(var d=0;d<n.length;d++){var h=n[d];u=Math.max(u,h.outerWidth(),h.outerHeight())}l.sort(function(e,t){return t.value-e.value});for(var g=t.levelWidth(n),v=[[]],f=v[0],d=0;d<l.length;d++){var y=l[d];if(f.length>0){var m=Math.abs(f[0].value-y.value);m>=g&&(f=[],v.push(f))}f.push(y)}for(var b={},x=0,w=u+t.minNodeSpacing,d=0;d<v.length;d++){var _=v[d],E=2*Math.PI/_.length;if(_.length>1){var S=Math.cos(E)-Math.cos(0),P=Math.sin(E)-Math.sin(0),k=Math.sqrt(w*w/(S*S+P*P));x=Math.max(k,x)}for(var C=0;C<_.length;C++){var y=_[C],c=t.startAngle+(t.counterclockwise?1:-1)*E*C,D={x:s.x+x*Math.cos(c),y:s.y+x*Math.sin(c)};b[y.node.id()]=D}x+=w}n.positions(function(){var e=this.id();return b[e]}),e.fit&&r.fit(t.padding),r.one("layoutready",e.ready),r.trigger("layoutready"),r.one("layoutstop",e.stop),r.trigger("layoutstop")},t.prototype.stop=function(){},e("layout","concentric",t)}(cytoscape),function(e){"use strict";function t(t){this.options=e.util.extend({},n,t)}var r,n={ready:function(){},stop:function(){},refresh:0,fit:!0,padding:30,randomize:!0,debug:!1,nodeRepulsion:1e4,nodeOverlap:10,idealEdgeLength:10,edgeElasticity:100,nestingFactor:5,gravity:250,numIter:100,initialTemp:200,coolingFactor:.95,minTemp:1};t.prototype.run=function(){var e=this.options,t=e.cy;r=!0===e.debug?!0:!1;var n=new Date,a=i(t,e);r&&s(a),!0===e.randomize&&(l(a,t),0<e.refresh&&c(a,t,e)),m(a,t,e);for(var o=0;o<e.numIter;o++)if(u(a,t,e,o),0<e.refresh&&0===o%e.refresh&&c(a,t,e),a.temperature=a.temperature*e.coolingFactor,w("New temperature: "+a.temperature),a.temperature<e.minTemp){w("Temperature drop below minimum threshold. Stopping computation in step "+o);break}c(a,t,e),!0===e.fit&&t.fit(e.padding);var d=new Date;console.info("Layout took "+(d-n)+" ms"),t.one("layoutstop",e.stop),t.trigger("layoutstop")},t.prototype.stop=function(){var e=this.options;cy.one("layoutstop",e.stop),cy.trigger("layoutstop")};var i=function(e,t){for(var r={layoutNodes:[],idToIndex:{},nodeSize:e.nodes().size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:e.edges().size(),temperature:t.initialTemp,clientWidth:e.container().clientWidth,clientHeight:e.container().clientHeight},n=e.nodes(),i=0;i<r.nodeSize;i++){var o={};o.id=n[i].data("id"),o.parentId=n[i].data("parent"),o.children=[],o.positionX=n[i].position("x"),o.positionY=n[i].position("y"),o.offsetX=0,o.offsetY=0,o.height=n[i].height(),o.width=n[i].width(),o.maxX=o.positionX+o.width/2,o.minX=o.positionX-o.width/2,o.maxY=o.positionY+o.height/2,o.minY=o.positionY-o.height/2,o.padLeft=n[i]._private.style["padding-left"].pxValue,o.padRight=n[i]._private.style["padding-right"].pxValue,o.padTop=n[i]._private.style["padding-top"].pxValue,o.padBottom=n[i]._private.style["padding-bottom"].pxValue,r.layoutNodes.push(o),r.idToIndex[o.id]=i}for(var s=[],l=0,c=-1,u=[],i=0;i<r.nodeSize;i++){var d=r.layoutNodes[i],p=d.parentId;null!=p?r.layoutNodes[r.idToIndex[p]].children.push(d.id):(s[++c]=d.id,u.push(d.id))}for(r.graphSet.push(u);c>=l;){var h=s[l++],g=r.idToIndex[h],v=r.layoutNodes[g],f=v.children;if(f.length>0){r.graphSet.push(f);for(var i=0;i<f.length;i++)s[++c]=f[i]}}for(var i=0;i<r.graphSet.length;i++)for(var y=r.graphSet[i],m=0;m<y.length;m++){var b=r.idToIndex[y[m]];r.indexToGraph[b]=i}for(var x=e.edges(),i=0;i<r.edgeSize;i++){var _=x[i],E={};E.id=_.data("id"),E.sourceId=_.data("source"),E.targetId=_.data("target");var S=t.idealEdgeLength,P=r.idToIndex[E.sourceId],k=r.idToIndex[E.targetId],C=r.indexToGraph[P],D=r.indexToGraph[k];if(C!=D){for(var N=a(E.sourceId,E.targetId,r),T=r.graphSet[N],M=0,o=r.layoutNodes[P];-1===$.inArray(o.id,T);)o=r.layoutNodes[r.idToIndex[o.parentId]],M++;for(o=r.layoutNodes[k];-1===$.inArray(o.id,T);)o=r.layoutNodes[r.idToIndex[o.parentId]],M++;w("LCA of nodes "+E.sourceId+" and "+E.targetId+". Index: "+N+" Contents: "+T.toString()+". Depth: "+M),S*=M*t.nestingFactor}E.idealLength=S,r.layoutEdges.push(E)}return r},a=function(e,t,r){var n=o(e,t,0,r);return 2>n.count?0:n.graph},o=function(e,t,r,n){var i=n.graphSet[r];if(-1<$.inArray(e,i)&&-1<$.inArray(t,i))return{count:2,graph:r};for(var a=0,s=0;s<i.length;s++){var l=i[s],c=n.idToIndex[l],u=n.layoutNodes[c].children;if(0!==u.length){var d=n.indexToGraph[n.idToIndex[u[0]]],p=o(e,t,d,n);if(0!==p.count){if(1!==p.count)return p;if(a++,2===a)break}}}return{count:a,graph:r}},s=function(e){if(r){console.debug("layoutNodes:");for(var t=0;t<e.nodeSize;t++){var n=e.layoutNodes[t],i="\nindex: "+t+"\nId: "+n.id+"\nChildren: "+n.children.toString()+"\nparentId: "+n.parentId+"\npositionX: "+n.positionX+"\npositionY: "+n.positionY+"\nOffsetX: "+n.offsetX+"\nOffsetY: "+n.offsetY+"\npadLeft: "+n.padLeft+"\npadRight: "+n.padRight+"\npadTop: "+n.padTop+"\npadBottom: "+n.padBottom;console.debug(i)}console.debug("idToIndex");for(var t in e.idToIndex)console.debug("Id: "+t+"\nIndex: "+e.idToIndex[t]);console.debug("Graph Set");for(var a=e.graphSet,t=0;t<a.length;t++)console.debug("Set : "+t+": "+a[t].toString());for(var i="IndexToGraph",t=0;t<e.indexToGraph.length;t++)i+="\nIndex : "+t+" Graph: "+e.indexToGraph[t];console.debug(i),i="Layout Edges";for(var t=0;t<e.layoutEdges.length;t++){var o=e.layoutEdges[t];i+="\nEdge Index: "+t+" ID: "+o.id+" SouceID: "+o.sourceId+" TargetId: "+o.targetId+" Ideal Length: "+o.idealLength}console.debug(i),i="nodeSize: "+e.nodeSize,i+="\nedgeSize: "+e.edgeSize,i+="\ntemperature: "+e.temperature,console.debug(i)}},l=function(e){for(var t=e.clientWidth,r=e.clientHeight,n=0;n<e.nodeSize;n++){var i=e.layoutNodes[n];i.positionX=Math.random()*t,i.positionY=Math.random()*r}},c=function(e,t,r){var n="Refreshing positions";w(n),t.nodes().positions(function(t,r){var i=e.layoutNodes[e.idToIndex[r.data("id")]];return n="Node: "+i.id+". Refreshed position: ("+i.positionX+", "+i.positionY+").",w(n),{x:i.positionX,y:i.positionY}}),!0!==e.ready&&(n="Triggering layoutready",w(n),e.ready=!0,t.one("layoutready",r.ready),t.trigger("layoutready"))},u=function(e,t,r,n){var i="\n\n###############################";i+="\nSTEP: "+n,i+="\n###############################\n",w(i),d(e,t,r),v(e,t,r),f(e,t,r),y(e,t,r),m(e,t,r)},d=function(e,t,r){var n="calculateNodeForces";w(n);for(var i=0;i<e.graphSet.length;i++){var a=e.graphSet[i],o=a.length;n="Set: "+a.toString(),w(n);for(var s=0;o>s;s++)for(var l=e.layoutNodes[e.idToIndex[a[s]]],c=s+1;o>c;c++){var u=e.layoutNodes[e.idToIndex[a[c]]];p(l,u,e,t,r)}}},p=function(e,t,r,n,i){var a="Node repulsion. Node1: "+e.id+" Node2: "+t.id,o=t.positionX-e.positionX,s=t.positionY-e.positionY;if(a+="\ndirectionX: "+o+", directionY: "+s,0===o&&0===s)return void(a+="\nNodes have the same position.");var l=g(e,t,o,s);if(l>0){a+="\nNodes DO overlap.",a+="\nOverlap: "+l;var c=i.nodeOverlap*l,u=Math.sqrt(o*o+s*s);a+="\nDistance: "+u;var d=c*o/u,p=c*s/u}else{a+="\nNodes do NOT overlap.";var v=h(e,o,s),f=h(t,-1*o,-1*s),y=f.x-v.x,m=f.y-v.y,b=y*y+m*m,u=Math.sqrt(b);a+="\nDistance: "+u;var c=i.nodeRepulsion/b,d=c*y/u,p=c*m/u}e.offsetX-=d,e.offsetY-=p,t.offsetX+=d,t.offsetY+=p,a+="\nForceX: "+d+" ForceY: "+p,w(a)},h=function(e,t,r){var n=e.positionX,i=e.positionY,a=e.height,o=e.width,s=r/t,l=a/o,c="Computing clipping point of node "+e.id+" . Height:  "+a+", Width: "+o+"\nDirection "+t+", "+r,u={};do{if(0===t&&r>0){u.x=n,c+="\nUp direction",u.y=i+a/2;break}if(0===t&&0>r){u.x=n,u.y=i+a/2,c+="\nDown direction";break}if(t>0&&s>=-1*l&&l>=s){u.x=n+o/2,u.y=i+o*r/2/t,c+="\nRightborder";break}if(0>t&&s>=-1*l&&l>=s){u.x=n-o/2,u.y=i-o*r/2/t,c+="\nLeftborder";break}if(r>0&&(-1*l>=s||s>=l)){u.x=n+a*t/2/r,u.y=i+a/2,c+="\nTop border";break}if(0>r&&(-1*l>=s||s>=l)){u.x=n-a*t/2/r,u.y=i-a/2,c+="\nBottom border";break}}while(!1);return c+="\nClipping point found at "+u.x+", "+u.y,w(c),u},g=function(e,t,r,n){if(r>0)var i=e.maxX-t.minX;else var i=t.maxX-e.minX;if(n>0)var a=e.maxY-t.minY;else var a=t.maxY-e.minY;return i>=0&&a>=0?Math.sqrt(i*i+a*a):0},v=function(e,t,r){for(var n=0;n<e.edgeSize;n++){var i=e.layoutEdges[n],a=e.idToIndex[i.sourceId],o=e.layoutNodes[a],s=e.idToIndex[i.targetId],l=e.layoutNodes[s],c=l.positionX-o.positionX,u=l.positionY-o.positionY;if(0===c&&0===u)return;var d=h(o,c,u),p=h(l,-1*c,-1*u),g=p.x-d.x,v=p.y-d.y,f=Math.sqrt(g*g+v*v),y=Math.pow(i.idealLength-f,2)/r.edgeElasticity;if(0!==f)var m=y*g/f,b=y*v/f;else var m=0,b=0;o.offsetX+=m,o.offsetY+=b,l.offsetX-=m,l.offsetY-=b;var x="Edge force between nodes "+o.id+" and "+l.id;x+="\nDistance: "+f+" Force: ("+m+", "+b+")",w(x)}},f=function(e,t,r){var n="calculateGravityForces";w(n);for(var i=0;i<e.graphSet.length;i++){var a=e.graphSet[i],o=a.length;if(n="Set: "+a.toString(),w(n),0===i)var s=e.clientHeight/2,l=e.clientWidth/2;else var c=e.layoutNodes[e.idToIndex[a[0]]],u=e.layoutNodes[e.idToIndex[c.parentId]],s=u.positionX,l=u.positionY;n="Center found at: "+s+", "+l,w(n);for(var d=0;o>d;d++){var p=e.layoutNodes[e.idToIndex[a[d]]];n="Node: "+p.id;var h=s-p.positionX,g=l-p.positionY,v=Math.sqrt(h*h+g*g);if(v>1){var f=r.gravity*h/v,y=r.gravity*g/v;p.offsetX+=f,p.offsetY+=y,n+=": Applied force: "+f+", "+y}else n+=": skypped since it's too close to center";w(n)}}},y=function(e){var t=[],r=0,n=-1;for(w("propagateForces"),t.push.apply(t,e.graphSet[0]),n+=e.graphSet[0].length;n>=r;){var i=t[r++],a=e.idToIndex[i],o=e.layoutNodes[a],s=o.children;if(0<s.length){var l=o.offsetX,c=o.offsetY,u="Propagating offset from parent node : "+o.id+". OffsetX: "+l+". OffsetY: "+c;u+="\n Children: "+s.toString(),w(u);for(var d=0;d<s.length;d++){var p=e.layoutNodes[e.idToIndex[s[d]]];p.offsetX+=l,p.offsetY+=c,t[++n]=s[d]}o.offsetX=0,o.offsetY=0}}},m=function(e){var t="Updating positions";w(t);for(var r=0;r<e.nodeSize;r++){var n=e.layoutNodes[r];0<n.children.length&&(w("Resetting boundaries of compound node: "+n.id),n.maxX=void 0,n.minX=void 0,n.maxY=void 0,n.minY=void 0)}for(var r=0;r<e.nodeSize;r++){var n=e.layoutNodes[r];if(0<n.children.length)w("Skipping position update of node: "+n.id);else{t="Node: "+n.id+" Previous position: ("+n.positionX+", "+n.positionY+").";var i=b(n.offsetX,n.offsetY,e.temperature);n.positionX+=i.x,n.positionY+=i.y,n.offsetX=0,n.offsetY=0,n.minX=n.positionX-n.width,n.maxX=n.positionX+n.width,n.minY=n.positionY-n.height,n.maxY=n.positionY+n.height,t+=" New Position: ("+n.positionX+", "+n.positionY+").",w(t),x(n,e)}}for(var r=0;r<e.nodeSize;r++){var n=e.layoutNodes[r];0<n.children.length&&(n.positionX=(n.maxX+n.minX)/2,n.positionY=(n.maxY+n.minY)/2,n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,t="Updating position, size of compound node "+n.id,t+="\nPositionX: "+n.positionX+", PositionY: "+n.positionY,t+="\nWidth: "+n.width+", Height: "+n.height,w(t))}},b=function(e,t,r){var n="Limiting force: ("+e+", "+t+"). Max: "+r,i=Math.sqrt(e*e+t*t);if(i>r)var a={x:r*e/i,y:r*t/i};else var a={x:e,y:t};return n+=".\nResult: ("+a.x+", "+a.y+")",w(n),a},x=function(e,t){var r="Propagating new position/size of node "+e.id,n=e.parentId;if(null==n)return r+=". No parent node.",void w(r);var i=t.layoutNodes[t.idToIndex[n]],a=!1;return(null==i.maxX||e.maxX+i.padRight>i.maxX)&&(i.maxX=e.maxX+i.padRight,a=!0,r+="\nNew maxX for parent node "+i.id+": "+i.maxX),(null==i.minX||e.minX-i.padLeft<i.minX)&&(i.minX=e.minX-i.padLeft,a=!0,r+="\nNew minX for parent node "+i.id+": "+i.minX),(null==i.maxY||e.maxY+i.padBottom>i.maxY)&&(i.maxY=e.maxY+i.padBottom,a=!0,r+="\nNew maxY for parent node "+i.id+": "+i.maxY),(null==i.minY||e.minY-i.padTop<i.minY)&&(i.minY=e.minY-i.padTop,a=!0,r+="\nNew minY for parent node "+i.id+": "+i.minY),a?(w(r),x(i,t)):(r+=". No changes in boundaries/position of parent node "+i.id,void w(r))},w=function(e){r&&console.debug(e)};e("layout","cose",t)}(cytoscape),function(e){"use strict";function t(t){this.options=e.util.extend({},r,t)}var r={fit:!0,padding:30,rows:void 0,columns:void 0,position:function(){},ready:void 0,stop:void 0};t.prototype.run=function(){var e=this.options,t=e,r=e.cy,n=r.nodes(),i=r.container(),a=i.clientWidth,o=i.clientHeight;if(0===o||0===a)n.positions(function(){return{x:0,y:0}});else{var s=n.size(),l=Math.sqrt(s*o/a),c=Math.round(l),u=Math.round(a/o*l),d=function(e){if(null==e)return Math.min(c,u);var t=Math.min(c,u);t==c?c=e:u=e},p=function(e){if(null==e)return Math.max(c,u);var t=Math.max(c,u);t==c?c=e:u=e};if(null!=t.rows&&null!=t.columns)c=t.rows,u=t.columns;else if(null!=t.rows&&null==t.columns)c=t.rows,u=Math.ceil(s/c);else if(null==t.rows&&null!=t.columns)u=t.columns,c=Math.ceil(s/u);else if(u*c>s){var h=d(),g=p();(h-1)*g>=s?d(h-1):(g-1)*h>=s&&p(g-1)}else for(;s>u*c;){var h=d(),g=p();(g+1)*h>=s?p(g+1):d(h+1)}for(var v=a/u,f=o/c,y=0;y<n.length;y++){var m=n[y],b=m.outerWidth(),x=m.outerHeight();v=Math.max(v,b),f=Math.max(f,x)}for(var w={},_=function(e,t){return w["c-"+e+"-"+t]?!0:!1},E=function(e,t){w["c-"+e+"-"+t]=!0},S=0,P=0,k=function(){P++,P>=u&&(P=0,S++)},C={},y=0;y<n.length;y++){var m=n[y],D=t.position(m);if(D&&(void 0!==D.row||void 0!==D.col)){var N={row:D.row,col:D.col};if(void 0===N.col)for(N.col=0;_(N.row,N.col);)N.col++;else if(void 0===N.row)for(N.row=0;_(N.row,N.col);)N.row++;C[m.id()]=N,E(N.row,N.col)}}n.positions(function(e,t){var r,n;if(t.locked()||t.isFullAutoParent())return!1;var i=C[t.id()];if(i)r=i.col*v+v/2,n=i.row*f+f/2;else{for(;_(S,P);)k();r=P*v+v/2,n=S*f+f/2,E(S,P),k()}return{x:r,y:n}})}e.fit&&r.fit(t.padding),r.one("layoutready",e.ready),r.trigger("layoutready"),r.one("layoutstop",e.stop),r.trigger("layoutstop")},t.prototype.stop=function(){},e("layout","grid",t)}(cytoscape),function(e){"use strict";function t(t){this.options=e.util.extend(!0,{},r,t)}var r={ready:function(){},stop:function(){}};t.prototype.run=function(){var e=this.options,t=e.cy;t.nodes().positions(function(){return{x:0,y:0}}),t.one("layoutready",e.ready),t.trigger("layoutready"),t.one("layoutstop",e.stop),t.trigger("layoutstop")},t.prototype.stop=function(){var e=this.options,t=e.cy;t.one("layoutstop",e.stop),t.trigger("layoutstop")},e("layout","null",t)}(cytoscape),function(e){"use strict";function t(t){this.options=e.util.extend(!0,{},r,t)}var r={fit:!0,ready:void 0,stop:void 0,positions:void 0,zoom:void 0,pan:void 0,padding:30};t.prototype.run=function(){function e(e){return null==t.positions?null:null==t.positions[e._private.data.id]?null:t.positions[e._private.data.id]}var t=this.options,r=t.cy,n=r.nodes();n.positions(function(t,r){var n=e(r);return r.locked()||null==n?!1:n}),null!=t.pan&&r.pan(t.pan),null!=t.zoom&&r.zoom(t.zoom),r.one("layoutready",t.ready),r.trigger("layoutready"),t.fit&&r.fit(t.padding),r.one("layoutstop",t.stop),r.trigger("layoutstop")},e("layout","preset",t),e("core","presetLayout",function(){var e=this,t={},r={};return e.nodes().each(function(e,t){r[t.data("id")]=t.position()}),t.positions=r,t.name="preset",t.zoom=e.zoom(),t.pan=e.pan(),t})}(cytoscape),function(e){"use strict";function t(t){this.options=e.util.extend(!0,{},r,t)}var r={ready:void 0,stop:void 0,fit:!0,padding:30};t.prototype.run=function(){var e=this.options,t=e.cy,r=t.nodes(),n=t.container(),i=n.clientWidth,a=n.clientHeight;r.positions(function(e,t){return t.locked()?!1:{x:Math.round(Math.random()*i),y:Math.round(Math.random()*a)}}),t.one("layoutready",e.ready),t.trigger("layoutready"),e.fit&&t.fit(e.padding),t.one("layoutstop",e.stop),t.trigger("layoutstop")},t.prototype.stop=function(){},e("layout","random",t)}(cytoscape),function(e){"use strict";function t(t){this.options=e.util.extend(!0,{},r,t)}var r={maxSimulationTime:1e3,ungrabifyWhileSimulating:!0,fit:!0,random:!1};t.prototype.run=function(){function e(e){var t=e.scratch("springy").model.id,r=b.layout.nodePoints[t].p,n=e.position(),i=null!=n.x&&null!=n.y?v(e.position()):{x:4*Math.random()-2,y:4*Math.random()-2};r.x=i.x,r.y=i.y}function t(){i.ungrabifyWhileSimulating&&x.ungrabify(),b.start()}function r(e){d.filterNodes(function(){return!1}),setTimeout(function(){i.ungrabifyWhileSimulating&&x.grabify(),e()},100)}var n=this,i=this.options,a=i.cy,o=a.nodes(),s=a.edges(),l=a.container(),c=l.clientWidth,u=l.clientHeight,d=new Springy.Graph;o.each(function(e,t){t.scratch("springy",{model:d.newNode({element:t})})}),s.each(function(e,t){var r=t.source().scratch("springy").model,n=t.target().scratch("springy").model;t.scratch("springy",{model:d.newEdge(r,n,{element:t})})});var p=new Springy.Layout.ForceDirected(d,400,400,.5),h=p.getBoundingBox(),g=function(e){var t=h.topright.subtract(h.bottomleft),r=e.subtract(h.bottomleft).divide(t.x).x*c,n=e.subtract(h.bottomleft).divide(t.y).y*u;return new Springy.Vector(r,n)},v=function(e){var t=h.topright.subtract(h.bottomleft),r=e.x/c*t.x+h.bottomleft.x,n=e.y/u*t.y+h.bottomleft.y;return new Springy.Vector(r,n)},f=a.collection(),y=a.nodes().size(),m=1,b=new Springy.Renderer(p,function(){},function(){},function(t,r){var n=g(r),o=t.data.element;window.p=r,window.n=t,o.locked()?e(o):(o._private.position={x:n.x,y:n.y},f=f.add(o)),m==y&&(a.one("layoutready",i.ready),a.trigger("layoutready")),m++});o.each(function(t,r){i.random||e(r)}),setInterval(function(){f.size()>0&&(f.rtrigger("position"),f=a.collection())},50),o.bind("drag",function(){e(this)});var x=o.filter(":grabbable"),w=n.stopSystem=function(){r(function(){i.fit&&a.fit(),a.one("layoutstop",i.stop),a.trigger("layoutstop"),n.stopSystem=null})};t(),setTimeout(function(){w()},i.maxSimulationTime)},t.prototype.stop=function(){null!=this.stopSystem&&this.stopSystem()},e("layout","springy",t)}(cytoscape),function(e){"use strict";function t(e){this.options=e}t.prototype.notify=function(){},e("renderer","null",t)}(cytoscape);