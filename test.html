<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cytoscape.js Test</title>
    <script src="build/cytoscape.min.js"></script>
    <style>
      body {
        margin: 0;
        font-family: Arial, sans-serif;
      }
      #cy {
        width: 100vw;
        height: 100vh;
        display: block;
        background: #f0f0f0;
      }
    </style>
  </head>
  <body>
    <div id="cy"></div>
    <script>
      let cy = cytoscape({
        container: document.getElementById('cy'),
        style: [
          {
            selector: 'node',
            css: {
              label: 'data(label)',
              'text-valign': 'center',
              'text-halign': 'center',
              height: '10px',
              width: '10px',
              'font-size': '16px',
              'text-events': 'yes',
              // 'box-select-labels': 'yes',
            },
          },
          {
            selector: 'node:selected',
            style: {
              color: '#fff',
              'text-outline-color': '#000',
              'text-outline-width': 3,
              'background-color': 'red',
            },
          },
          {
            selector: 'edge',
            css: {
              'target-arrow-shape': 'triangle',
              label: 'data(label)',
              'text-rotation': 'autorotate',
              'text-margin-x': '5px',
              'text-margin-y': '5px',
              color: '#333',
            },
          },
          {
            selector: 'edge:selected',
            css: {
              'text-outline-color': '#000',
              'text-outline-width': 0,
              color: 'white',
            },
          },
          {
            selector: 'edge[label]',
            css: {
              label: 'data(label)',
              'text-valign': 'top',
              'text-halign': 'center',
              'text-rotation': 'autorotate',
              'text-margin-x': '0px',
              'text-margin-y': '0px',
            },
          },
          {
            selector: '.background',
            css: {
              'text-background-opacity': 1,
              color: '#fff',
              'text-background-color': '#000',
            },
          },
          {
            selector: '.top-center',
            style: {
              'text-valign': 'bottom',
              'text-halign': 'center',
              // 'box-select-labels': 'yes',
              'text-rotation': `${Math.floor(Math.random()*360)}deg`,
            },
          },
        ],
        elements: {
          nodes: [
            {
              data: {
                id: '1',
                label: '1DP 67/90A9IIOF TTL',
              },
              classes: 'outline',
            },
            {
              data: {
                id: '2',
                label: 'background',
              },
              classes: 'background',
            },
            {
              data: {
                id: '3',
                label: 'This is a very long label text',
              },
              classes: 'top-center',
            },
            {
              data: {
                id: '4',
                label: 'This another very long label with `box-select-labels` events attached',
              },
              classes: 'top-center',
            },
          ],
          edges: [
            {
              data: {
                source: '1',
                target: '2',
                label: 'RT CB65B/1002',
              },
              classes: 'outline',
            },
            {
              data: {
                source: '2',
                target: '3',
                label: 'RT CB65B/1002',
              },
              classes: 'background',
            },
            {
              data: {
                source: '3',
                target: '4',
                label: 'RT CB65B/1002',
              },
              classes: 'top-center',
            },
            {
              data: {
                source: '4',
                target: '1',
                label: 'RT CB65B/1002',
              },
              classes: 'none',
            },
          ],
        },
        layout: {
          name: 'circle',
        },
      });

      cy.on('tap', 'node', function (evt) {
        console.log('Node clicked:', evt.target.id());
      });
    </script>
  </body>
</html>
